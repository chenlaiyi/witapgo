(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-goods-index~pages-subPages-group-assemble-assemble"],{"1a85":function(n,t,e){"use strict";var i=e("a161"),a=e.n(i);a.a},"236c":function(n,t,e){"use strict";var i=e("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(e("5176"));e("7514"),e("6762"),e("2fdb");var s=i(e("a745")),o=i(e("75fc"));e("c5f6");var u=i(e("80bf")),d=i(e("f7c1")),r={data:function(){return{showBuyMenu:!1,goods_price:"",goods_num:1,stock_num:0,buy_limit:0,user_limit_num:0,goods_sku_id:"",goods_spec_arr:[],sku_coupon_price:0,specData:[],image_path:null,skuItem:null,activityData:null,lp_now_stk:0}},props:{goodsSpec:{type:Array,default:function(){return null}},goodsDetail:{type:Object,default:function(){return null}},specDisabled:{type:Boolean,default:!1},groupBuyType:{type:String,default:""}},components:{PopupView:d.default},computed:{selectSpec:function(){var n=this.specData,t=[];return n&&n.length>0&&n.map(function(n){n.item.map(function(n){n.checked&&t.push(n.title)})}),t.join(" · ")},isSelectSpec:function(){if(this.goodsDetail)return!Number(this.goodsDetail.optionstatus>0)||this.goods_spec_arr.filter(function(n){return!!n}).length===this.specData.length},buyMeunHeight:function(){if(this.goodsDetail&&this.specData["list"])return Number(this.goodsDetail.optionstatus)>0?this.specData&&this.specData["list"]["length"]>1?"67vh":"50vh":"40vh"},hasGroups:function(){return this.goodsActivity&&this.goodsActivity.group_id},groupsType:function(){return"3"===this.goodsDetail.type&&"2"===this.groupBuyType},isShowJoinGroups:function(){return this.activityData&&1===this.activityData.is_show_groups&&this.activityData.groupsNumber>0},isMaxBuyLimit:function(){if(this.activityData){var n=this.limit_buy,t=this.surplus_quantity,e=this.activityData.buyNumber;if("string"===typeof e)return 10===n&&this.goods_num+Number(e)>=t}}},watch:{goodsSpec:function(n){var t;n&&n.length>0&&(t=this.specData).splice.apply(t,[0,n.length].concat((0,o.default)(n)))},goodsDetail:function(n){n&&this.initBuyMeunData(n)},groupBuyType:function(n){n&&this.updateSpecGoods()}},mounted:function(){},methods:{initBuyMeunData:function(n){var t=this,e={};if(e.goods_sku_id=n["spec"]?n["spec"]["info"][0]["id"]:"",e.goods_price=n["spec"]?!t.groupsType&&n.is_vip>0&&"1"===n.vipstatus?n["spec"]["info"][0]["vipprice"]:n["spec"]["info"][0]["price"]:n["price"],e.sku_coupon_price=n["spec"]?n["spec"]["info"][0]["vipprice"]:n["vipprice"],e.stock_num=n.stk,e.buy_limit=Number(n.buy_limit),e.user_limit_num=n.user_limit_num,e.image_path="5"===n.type?n.logo:n.thumbs[0],e.lp_now_stk=n["lp_now_stk"],Number(n.optionstatus)>0&&n["spec"]["list"][0]["item"]["thumb"]&&(e.image_path=n["spec"]["list"][0]["item"]["thumb"]),Number(n.optionstatus)>0){var i=t.initManySpecData(this.specData),a=i.map(function(n){var t="";return n.item.map(function(n){n.checked&&(t=n.id)}),t});if(a.length>0){var s=n.spec.info.filter(function(n){return n.specs===a.join("_")});e.stock_num=s.length>0?s[0].stock:n.stk}e.specData=i}this.setData(e)},initManySpecData:function(n){for(var t in n)for(var e in n[t].item)e<1&&(n[t].item[0].checked=!0,this.goods_spec_arr.splice(t,1,n[t].item[0].id));return n},modelTap:function(n){var t=this,e=Number(n.currentTarget.dataset.attrIdx),i=Number(n.currentTarget.dataset.itemIdx),a=n.currentTarget.dataset.itemDisabled,s=n.currentTarget.dataset.itemCheck,o=null;t.specDisabled&&a||(o=t.specData[e].item.map(function(n,o){if(t.specDisabled?a||(n.checked=!s&&i===o,i===o&&t.goods_spec_arr.splice(e,1,n.signid)):n.checked=i===o,n.checked){var u=n.thumb?n.thumb:t.goodsDetail.thumbs[0];t.setData({image_path:u})}return i===o&&(t.goods_spec_arr.splice(e,1,n.checked?n.id:null),t.specDisabled&&t.filterDisabledSpec(n,e)),n}),t.$set(t.specData[e],"item",o),t.updateSpecGoods())},filterDisabledSpec:function(n,t){var e=this,i=e.goodsDetail.sku,a=e.specData,o=a.length,u=[];if((0,s.default)(a)&&(0,s.default)(i)){if(i.map(function(t){var e=t.is_use,i=(t.title,t.spec_sku_id),a=void 0===i?"":i;1!==o||e?!e&&a.includes(n.signid)&&u.push(a):u.push(a)}),1===o)return;a.map(function(n,i){var a=n.spec_item_list;i!==t&&a.map(function(n){var t=e.goods_spec_arr.map(function(n){return n});t[i]=n.signid,t=t.filter(function(n){return!!n}).join("_"),n.disabled=u.includes(t)})})}},updateSpecGoods:function(){var n=this.goods_spec_arr.join("_"),t=this.goodsDetail.spec?this.goodsDetail.spec.info:[],e=this.goodsDetail,i=e.is_vip,a=(e.discount_price,e.vipstatus),s=e.type,o=null;if(o=t.find(function(t){return t.specs==n}),"object"===typeof o)this.skuItem=o,this.setData({goods_sku_id:o.id,goods_price:"1"===this.groupBuyType||i>0&&"1"===a?o.vipprice:o.price,stock_num:o.stock,goods_num:1,sku_coupon_price:o.vipprice});else if(void 0===o||""===o){this.skuItem?this.skuItem:t[0];"3"===s?(this.goods_price="2"===this.groupBuyType?this.goodsDetail["price"]:this.goodsDetail["aloneprice"],this.stock_num=this.stock_num):(this.goods_price=t[0].price,this.stock_num=t[0].stock)}},up:function(){var n=this.stock_num,t=this.buy_limit,e=this.user_limit_num;t>0&&this.goods_num>=e?uni.showToast({icon:"none",title:0===e?"购买数量已达上限":"您最多可购买".concat(e,"件商品")}):this.goods_num<n&&++this.goods_num},down:function(){this.goods_num>1&&--this.goods_num},btnClick:function(n){var t=this.goods_num,e=this.goods_sku_id,i="3"===this.goodsDetail.type&&"2"===this.groupBuyType?"1":"2",s={btnType:n,goods_num:t,goods_sku_id:e};"3"===this.goodsDetail.type&&(0,a.default)(s,{buystatus:i}),"1"===this.goodsDetail.type&&this.lp_now_stk>0&&t>this.lp_now_stk?u.default.showError("抢购数量已达上限"):(this.showBuyMenu=!1,this.activeBuyMeuns(!1),this.$emit("submit",s))},activeBuyMeuns:function(n){var t=this,e=(t.groupBuyType,t.specData);n&&this.updateSpecGoods(),(0,s.default)(e)&&e.length>0&&(e=e.map(function(e,i){return e.item=e.item.map(function(e,a){return n||(e.checked=!1),t.goods_spec_arr.splice(i,1,""),e}),e}),this.specData=e)},onToggleTrade:function(){this.showBuyMenu=!this.showBuyMenu}}};t.default=r},2477:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{}},props:{show:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},showOverlay:{type:Boolean,default:!0},type:{type:String,default:"center"},modelData:{type:Object,default:function(){}}},components:{},computed:{},mounted:function(){},methods:{handleMaskClick:function(){this.$emit("clickmask")}}};t.default=i},"3f21":function(n,t,e){t=n.exports=e("2350")(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* 购买菜单 */.goods-buy-menu[data-v-6d62dd32]{width:100vw;height:67vh;background:#fff;border-radius:%?12?% %?12?% 0 0;position:relative}.goods-buy-menu .icon-roundclose[data-v-6d62dd32]{position:absolute;top:%?20?%;right:%?20?%;font-size:%?42?%;height:1em;width:1em;color:#999}.trade-main[data-v-6d62dd32]{padding:%?20?%}.buy-info .buy-images uni-image[data-v-6d62dd32]{width:%?180?%;height:%?180?%;display:block;border-radius:%?12?%}.buy-content[data-v-6d62dd32]{margin-left:%?30?%;font-size:%?24?%}.buy-money[data-v-6d62dd32]{font-size:%?40?%;color:#fe504f}.buy-money uni-text[data-v-6d62dd32]{font-size:%?24?%}.buy-stock[data-v-6d62dd32]{margin-top:%?20?%;color:#999}.buy-spec[data-v-6d62dd32]{margin-top:%?24?%}.buy-spec-list[data-v-6d62dd32]{margin-top:%?30?%;height:calc(65vh - %?336?%)}.buy-spec-item[data-v-6d62dd32]{padding-bottom:%?30?%}.spec-item-title[data-v-6d62dd32]{font-size:%?28?%;line-height:2em;margin-top:%?12?%}.spec-items[data-v-6d62dd32]{-webkit-flex-wrap:wrap;flex-wrap:wrap}.spec-items .spec-item[data-v-6d62dd32]{font-size:%?26?%;white-space:nowrap;background:#f5f5f5;padding:%?12?% %?20?%;border-radius:%?12?%;color:#333;margin:%?20?% %?20?% 0 0;border:%?1?% solid transparent}.spec-items .spec-item.active[data-v-6d62dd32]{background:#fffbfb;color:#fe504f;border:%?1?% solid #f44}.spec-items .spec-item.disabled[data-v-6d62dd32]{background:#f5f5f5;color:#d0d0d0}.buy-number[data-v-6d62dd32]{margin:%?20?% 0}.buy-button-box[data-v-6d62dd32]{position:absolute;left:0;right:0;bottom:0;height:%?140?%;background:#fff}.buy-button-box .buy-button[data-v-6d62dd32]{color:#fff;border-radius:%?50?%;width:90%;margin:%?16?% 5% 0;background:#fe504f;font-size:%?28?%;line-height:2.8em}.buy-button-box .buy-button.join-btn[data-v-6d62dd32]{background:#ffd940;color:#333}.buy-button-box .buy-button.notAva-btn[data-v-6d62dd32]{background-color:#eee!important;color:#999!important}.member-price-label[data-v-6d62dd32]{color:#333;height:0;line-height:%?30?%;border-width:%?0?% %?10?% %?30?% 0;border-style:none solid solid;border-color:transparent #000 #efd68f;position:relative;left:%?10?%;padding-left:%?6?%;border-radius:%?4?% 0 0 %?4?%;margin-left:%?-10?%}.member-coupon-price[data-v-6d62dd32]{color:#efd68f}.coupon-price-2[data-v-6d62dd32]{padding:0 %?10?%;height:%?30?%;line-height:%?30?%;border-radius:0 %?4?% %?4?% 0}.member-coupon-view[data-v-6d62dd32]{position:relative;margin-left:%?12?%;top:%?-6?%}.selectNumber uni-input[data-v-6d62dd32]{text-align:center;width:%?100?%}",""])},5291:function(n,t,e){t=n.exports=e("2350")(!1),t.push([n.i,".pop[data-v-4f817d96]{visibility:hidden}.pop--show[data-v-4f817d96]{visibility:visible}.pop__mask[data-v-4f817d96]{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1001;background:rgba(0,0,0,.5);display:none}.pop__mask--hide[data-v-4f817d96]{background:0 0}.pop__container[data-v-4f817d96]{position:fixed;left:50%;top:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0);-webkit-transform-origin:center;transform-origin:center;-webkit-transition:all .3s ease;transition:all .3s ease;z-index:1002;opacity:0}.pop--show .pop__container[data-v-4f817d96]{opacity:1}.pop--show .pop__mask[data-v-4f817d96]{display:block}.pop--left .pop__container[data-v-4f817d96]{left:0;top:50%;-webkit-transform:translate3d(-100%,-50%,0);transform:translate3d(-100%,-50%,0)}.pop--show.pop--left .pop__container[data-v-4f817d96]{-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}.pop--right .pop__container[data-v-4f817d96]{right:0;top:50%;left:auto;-webkit-transform:translate3d(100%,-50%,0);transform:translate3d(100%,-50%,0)}.pop--show.pop--right .pop__container[data-v-4f817d96]{-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}.pop--bottom .pop__container[data-v-4f817d96]{top:auto;left:50%;bottom:0;-webkit-transform:translate3d(-50%,100%,0);transform:translate3d(-50%,100%,0)}.pop--show.pop--bottom .pop__container[data-v-4f817d96]{-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0)}.pop--top .pop__container[data-v-4f817d96]{top:0;left:50%;-webkit-transform:translate3d(-50%,-100%,0);transform:translate3d(-50%,-100%,0)}.pop--show.pop--top .pop__container[data-v-4f817d96]{-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0)}",""])},"733b":function(n,t,e){"use strict";var i=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",[e("popup-view",{attrs:{show:n.showBuyMenu,type:"bottom"},on:{clickmask:function(t){arguments[0]=t=n.$handleEvent(t),n.onToggleTrade.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"goods-buy-menu",style:{height:n.buyMeunHeight}},[e("v-uni-view",{staticClass:"iconfont icon-roundclose",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.onToggleTrade.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"trade-main"},[e("v-uni-view",{staticClass:"buy-info dis-flex flex-y-center"},[e("v-uni-view",{staticClass:"buy-images",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.previewSkuImage.apply(void 0,arguments)}}},[e("v-uni-image",{attrs:{src:n.image_path}})],1),e("v-uni-view",{staticClass:"buy-content"},[e("v-uni-view",{staticClass:"buy-money price-font-family dis-flex flex-y-line"},[e("v-uni-text",{staticClass:"money-label"},[n._v("¥")]),n._v(n._s(n.goods_price)),"1"===n.goodsDetail.vipstatus?e("v-uni-view",{staticClass:"dis-flex flex-y-center member-coupon-view"},[e("v-uni-view",{staticClass:"member-price-label f-22"},[n._v("会员")]),e("v-uni-view",{staticClass:"f-22 col-f onelist-hidden b-0 coupon-price-2"},[n._v("价格"),e("v-uni-text",{staticClass:"member-coupon-price"},[n._v(n._s(n.sku_coupon_price))]),n._v("元")],1)],1):n._e()],1),e("v-uni-view",{staticClass:"buy-stock"},[n._v("库存"+n._s(n.stock_num)+"件")]),n.specData&&n.specData.length>0?e("v-uni-view",{staticClass:"buy-spec"},[n._v("选择 "+n._s(n.selectSpec))]):n._e()],1)],1),e("v-uni-scroll-view",{staticClass:"buy-spec-list",style:{height:"calc("+n.buyMeunHeight+" - 370rpx)"},attrs:{"scroll-y":""}},[n.specData&&n.specData.length>0?[n._l(n.specData,function(t,i){return[e("v-uni-view",{key:i+"_0",staticClass:"buy-spec-item"},[e("v-uni-view",{staticClass:"spec-item-title"},[n._v(n._s(t.title))]),t.item.length>0?e("v-uni-view",{staticClass:"spec-items dis-flex flex-dir-row"},[n._l(t.item,function(t,a){return[e("v-uni-view",{key:a+"_0",staticClass:"spec-item",class:{active:t.checked,disabled:t.disabled},attrs:{"data-attr-idx":i,"data-item-idx":a,"data-item-check":t.checked,"data-item-disabled":t.disabled},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.modelTap.apply(void 0,arguments)}}},[n._v(n._s(t.title))])]})],2):n._e()],1)]})]:n._e(),e("v-uni-view",{staticClass:"buy-number dis-flex flex-y-center flex-x-between"},[e("v-uni-view",{staticClass:"buyNumber f-28"},[e("v-uni-text",[n._v("购买数量")])],1),e("v-uni-view",{staticClass:"selectNumber dis-flex flex-y-center"},[e("v-uni-button",{staticClass:"default",class:[n.goods_num>1?"":" default-active"],attrs:{type:"default"},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.down.apply(void 0,arguments)}}},[n._v("-")]),e("v-uni-input",{attrs:{type:"number",value:n.goods_num,disabled:""}}),e("v-uni-button",{staticClass:"default",class:{"default-active":n.goods_num>=n.stock_num||n.buy_limit>0&&n.goods_num>=n.user_limit_num},attrs:{disabled:n.goods_num>=n.stock_num||n.isMaxBuyLimit,type:"default"},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.up.apply(void 0,arguments)}}},[n._v("+")])],1)],1)],2),e("v-uni-view",{staticClass:"buy-button-box dis-flex flex-y-center"},[n.isSelectSpec?["3"===n.goodsDetail["type"]&&"2"===n.groupBuyType?[e("v-uni-button",{staticClass:"buy-button join-btn",class:{"notAva-btn":0==n.stock_num},attrs:{disabled:0==n.stock_num||n.isMaxBuyLimit},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.btnClick("confirm")}}},[n._v(n._s(0==n.stock_num?"暂无库存":"去参团"))])]:[e("v-uni-button",{staticClass:"buy-button",class:{"notAva-btn":0==n.stock_num},attrs:{disabled:0==n.stock_num},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.btnClick("confirm")}}},[n._v(n._s(0==n.stock_num?"暂无库存":"确定"))])]]:[e("v-uni-button",{staticClass:"buy-button",attrs:{disabled:""}},[n._v("请选择商品规格")])]],2)],1)],1)],1)],1)},a=[];e.d(t,"a",function(){return i}),e.d(t,"b",function(){return a})},7748:function(n,t,e){var i=e("5291");"string"===typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);var a=e("4f06").default;a("a1d4ae9e",i,!0,{sourceMap:!1,shadowMode:!1})},"8f5c":function(n,t,e){"use strict";var i=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",{staticClass:"page"},[e("v-uni-view",{staticClass:"pop",class:["pop--"+n.type,{"pop--show":n.show}]},[n.overlay?e("v-uni-view",{staticClass:"pop__mask",class:{"pop__mask--hide":!n.showOverlay},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.handleMaskClick.apply(void 0,arguments)}}}):n._e(),e("v-uni-view",{staticClass:"pop__container"},[n._t("default")],2)],1)],1)},a=[];e.d(t,"a",function(){return i}),e.d(t,"b",function(){return a})},a161:function(n,t,e){var i=e("3f21");"string"===typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);var a=e("4f06").default;a("b863b4f6",i,!0,{sourceMap:!1,shadowMode:!1})},a9d6:function(n,t,e){"use strict";e.r(t);var i=e("2477"),a=e.n(i);for(var s in i)"default"!==s&&function(n){e.d(t,n,function(){return i[n]})}(s);t["default"]=a.a},c9d9:function(n,t,e){"use strict";e.r(t);var i=e("236c"),a=e.n(i);for(var s in i)"default"!==s&&function(n){e.d(t,n,function(){return i[n]})}(s);t["default"]=a.a},de61:function(n,t,e){"use strict";e.r(t);var i=e("733b"),a=e("c9d9");for(var s in a)"default"!==s&&function(n){e.d(t,n,function(){return a[n]})}(s);e("1a85");var o=e("2877"),u=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,"6d62dd32",null);t["default"]=u.exports},e048:function(n,t,e){"use strict";var i=e("7748"),a=e.n(i);a.a},f7c1:function(n,t,e){"use strict";e.r(t);var i=e("8f5c"),a=e("a9d6");for(var s in a)"default"!==s&&function(n){e.d(t,n,function(){return a[n]})}(s);e("e048");var o=e("2877"),u=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,"4f817d96",null);t["default"]=u.exports}}]);