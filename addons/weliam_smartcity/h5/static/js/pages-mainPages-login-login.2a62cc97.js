(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-login-login"],{"0d8b":function(e,t,a){"use strict";var n=a("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("c5f6");var i=n(a("bd86")),s=n(a("3099")),o=(n(a("9e9f")),{data:function(){var e;return e={text1Focus:!0,text2Focus:!1,text3Focus:!1,text4Focus:!1,sms1:"",sms2:"",sms3:"",sms4:"",page:1,see:!1,password:"",getImgUrl:"",getImgCode:"",getSmsCode:"",timeCount:0,smsCode:"",timeEnd:"重新获取短信验证码",userSet:{sms_switch:"",img_switch:""},phone:""},(0,i.default)(e,"password",""),(0,i.default)(e,"currentPageUrl",""),e},onLoad:function(){this.init(),console.info(uni.getStorageSync("currentPage"))},watch:{sms1:{handler:function(){var e=this;1==e.sms1.length&&(e.text2Focus=!0,e.text1Focus=!1)}},sms2:{handler:function(){var e=this;1==e.sms2.length&&(e.text3Focus=!0,e.text2Focus=!1),0==e.sms2.length&&(e.text1Focus=!0,e.text2Focus=!1)}},sms3:{handler:function(){var e=this;1==e.sms3.length&&(e.text4Focus=!0,e.text3Focus=!1),0==e.sms3.length&&(e.text2Focus=!0,e.text3Focus=!1)}},sms4:{handler:function(){var e=this;0==e.sms4.length&&(console.info(e.text3Focus),e.text3Focus=!0,e.text4Focus=!1)}}},methods:{init:function(){var e=this;e.getRegisterSet()},toLoginAgreement:function(){s.default.navigationTo({url:"pages/mainPages/agreement/agreement"})},sendSms:function(){var e=this;if(3!==e.page){if(""==e.phone||11!==e.phone.length)return uni.showToast({icon:"none",title:"请输入正确格式的手机号",duration:2e3}),e.GVC(),void(e.password="");if(""==e.password)return uni.showToast({icon:"none",title:"验证码不能为空",duration:2e3}),e.GVC(),void(e.password="");if(e.password!==e.getImgCode)return uni.showToast({icon:"none",title:"验证码错误",duration:2e3}),e.GVC(),void(e.password="")}var t={type:2,phone:e.phone};s.default._post_form("&do=PIN",t,function(t){var a=60,n=setInterval(function(){a--,e.timeEnd=a+"s后重新获取验证码",e.timeCount=a,0==a&&clearInterval(n)},1e3);e.getSmsCode=t.data.code,3!==e.page&&(e.page=3)})},userLogin:function(e){var t=this;if(1==t.page){if(""==t.phone||11!==t.phone.length)return void uni.showToast({icon:"none",title:"请输入正确格式的手机号",duration:2e3});if(""==t.password)return void uni.showToast({icon:"none",title:"密码不能为空",duration:2e3})}if(3!=t.page||(t.smsCode=t.sms1+t.sms2+t.sms3+t.sms4,t.getSmsCode=Number(t.getSmsCode),t.smsCode=Number(t.smsCode),t.smsCode===t.getSmsCode)){var a={type:e,phone:t.phone,password:t.password,backurl:""};s.default._post_form("&p=member&do=userLogin",a,function(e){if(uni.setStorageSync("weliam_user_token",e.data.token),""==uni.getStorageSync("currentPage"))s.default.navigationTo({url:"pages/mainPages/index/index"});else{for(var a in t.currentPageUrl=uni.getStorageSync("currentPage").route+"?i="+uni.getStorageSync("currentPage").options.i,uni.getStorageSync("currentPage").options)console.info(a),"i"!==a&&(t.currentPageUrl=t.currentPageUrl+"&"+a+"="+uni.getStorageSync("currentPage").options[a]);console.info(t.currentPageUrl),s.default.navigationTo({url:t.currentPageUrl})}})}else uni.showToast({icon:"none",title:"短信验证码不正确",duration:2e3})},getRegisterSet:function(){var e=this,t={};s.default._post_form("&p=member&do=getRegisterSet",t,function(t){e.userSet=t.data,1==e.userSet.img_switch&&e.GVC()})},GVC:function(){var e=this,t={};s.default._post_form("&do=GVC",t,function(t){e.getImgUrl=t.data.image_data,e.getImgCode=t.data.code})},toPassword:function(e){var t=this;t.phone="",t.password="",t.page=e,console.info(t.page)},go:function(){s.default.navigationTo({url:"pages/mainPages/register/register"})},goForgetPassword:function(){s.default.navigationTo({url:"pages/mainPages/forgetPassword/forgetPassword"})},show:function(e){var t=this;t.see=e}}});t.default=o},3577:function(e,t,a){"use strict";a.r(t);var n=a("cd7b"),i=a("e343");for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a("6f94");var o=a("2877"),u=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"9a6a2986",null);t["default"]=u.exports},"6f94":function(e,t,a){"use strict";var n=a("8895"),i=a.n(n);i.a},"7e83":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeBAMAAADJHrORAAAAKlBMVEUAAACZmZmYmJiYmJiZmZmYmJiZmZmZmZmZmZmZmZmZmZmYmJiYmJiZmZl8y3cbAAAADXRSTlMAiR4T9HDnz7xZr0EvkmkznAAAALlJREFUGNNjGBBguuzutaUGcK6i710gcFSAchl9r0sra4vfdYRweWpvbGAwZmDYcbcIzJ9ybQKD1h0gY9qVDUCS9W4zA1OuA5DFVHsVSMZeZGDgunsZbNDdAKC0AAOD7d2LYK2yNxl0bwHps3fvCvMA7ee4y8AJlgdan2sAkofqB/JvgfXDzL97N4mBufcqxP4NDBp3byiA7Ie7T0cB5D64+2MMbMLvuiL57wrYfzBguczXfaUBAx0AAFmtSOx+pyfSAAAAAElFTkSuQmCC"},8895:function(e,t,a){var n=a("e3cd");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("06cd672e",n,!0,{sourceMap:!1,shadowMode:!1})},a6ed:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAIVBMVEUAAACZmZmZmZmZmZmZmZmZmZmZmZmVlZWZmZmZmZmZmZmbOMCBAAAACnRSTlMAQO/BfCmcDF3bzQG3bwAAAJNJREFUOMtjGAXDAiQFgEg3MCnUgCThpQokWFc5AElGLQEkCZZFQB67JUhH1woUs5qWQBllixpQJCpXGYJpjlnLUG23MgbLVFgtm+WALM68uEB4lXJKstZigcglyBJV04HOXLVq1UoBBlYlZAnWAqCkqqDgSiA7EN2TXQlAqwKw+D6rAehRB2zBAjROyoFhFAwXAAAZqB2cCQZYAQAAAABJRU5ErkJggg=="},cd7b:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"login"},[1==e.page||2==e.page?n("v-uni-view",{staticClass:"loginPackage"},[1==e.page?n("v-uni-view",{staticClass:"title"},[e._v("登录注册更精彩")]):e._e(),2==e.page?n("v-uni-view",{staticClass:"title"},[e._v("请输入手机号码")]):e._e(),n("v-uni-view",{staticClass:"loginAgreement",on:{click:function(t){t=e.$handleEvent(t),e.toLoginAgreement(t)}}},[n("span",[e._v("登录注册表示同意"),n("span",[e._v("用户协议、隐私条款")])])]),n("v-uni-view",{staticClass:"loginInput"},[n("v-uni-view",[n("v-uni-input",{attrs:{placeholder:"请输入手机号",type:"number"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),n("span")],1),1==e.page?n("v-uni-view",[0==e.see?n("v-uni-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}):e._e(),1==e.see?n("v-uni-input",{attrs:{placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}):e._e(),n("v-uni-view",[0==e.see?n("img",{attrs:{src:a("a6ed")},on:{click:function(t){t=e.$handleEvent(t),e.show(!0)}}}):e._e(),1==e.see?n("img",{attrs:{src:a("7e83")},on:{click:function(t){t=e.$handleEvent(t),e.show(!1)}}}):e._e(),n("span",{on:{click:function(t){t=e.$handleEvent(t),e.goForgetPassword(t)}}},[e._v("忘记密码")])])],1):e._e(),2==e.page&&1==e.userSet.img_switch?n("v-uni-view",[n("v-uni-input",{attrs:{placeholder:"请输入图形验证码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("img",{attrs:{src:e.getImgUrl},on:{click:function(t){t=e.$handleEvent(t),e.GVC(t)}}})],1):e._e()],1),1==e.page?n("v-uni-view",{staticClass:"loginSubimt",on:{click:function(t){t=e.$handleEvent(t),e.userLogin(1)}}},[n("span",[e._v("登陆")])]):e._e(),2==e.page?n("v-uni-view",{staticClass:"loginSubimt",on:{click:function(t){t=e.$handleEvent(t),e.sendSms(t)}}},[n("span",[e._v("获取短信验证码")])]):e._e(),n("v-uni-view",{staticClass:"checkLoginType"},[n("span",{directives:[{name:"show",rawName:"v-show",value:2==e.page,expression:"page == 2"}],on:{click:function(t){t=e.$handleEvent(t),e.toPassword(1)}}},[e._v("账号密码登录")]),1==e.page&&0==e.userSet.sms_switch?n("span",{on:{click:function(t){t=e.$handleEvent(t),e.toPassword(2)}}},[e._v("短信验证码登录")]):e._e(),n("span",{on:{click:function(t){t=e.$handleEvent(t),e.go()}}},[e._v("新用户注册")])])],1):e._e(),3==e.page?n("v-uni-view",[n("v-uni-view",{staticClass:"loginPackage"},[n("v-uni-view",{staticClass:"smsTitle"},[n("span",[e._v("我们将以短信形式将验证码发送至")])]),n("v-uni-view",{staticClass:"smsTitle1"},[n("span",[e._v(e._s(e.phone))])]),n("v-uni-view",{staticClass:"smsCodeInput"},[n("v-uni-view",[n("v-uni-input",{attrs:{type:"number",maxlength:"1",id:"text1",focus:e.text1Focus},model:{value:e.sms1,callback:function(t){e.sms1=t},expression:"sms1"}})],1),n("v-uni-view",[n("v-uni-input",{attrs:{type:"number",maxlength:"1",id:"text2",focus:e.text2Focus},model:{value:e.sms2,callback:function(t){e.sms2=t},expression:"sms2"}})],1),n("v-uni-view",[n("v-uni-input",{attrs:{type:"number",maxlength:"1",id:"text3",focus:e.text3Focus},model:{value:e.sms3,callback:function(t){e.sms3=t},expression:"sms3"}})],1),n("v-uni-view",[n("v-uni-input",{attrs:{type:"number",maxlength:"1",id:"text4",focus:e.text4Focus},model:{value:e.sms4,callback:function(t){e.sms4=t},expression:"sms4"}})],1)],1),0==e.timeCount?n("v-uni-view",{staticClass:"sendSmsCode",on:{click:function(t){t=e.$handleEvent(t),e.sendSms(t)}}},[n("span",[e._v("重新发送验证码")])]):n("v-uni-view",{staticClass:"sendSmsCode"},[n("span",[e._v(e._s(e.timeEnd))])]),n("v-uni-view",{staticClass:"smsCodeSubimt",on:{click:function(t){t=e.$handleEvent(t),e.userLogin(2)}}},[n("span",[e._v("登陆")])])],1)],1):e._e()],1)],1)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},e343:function(e,t,a){"use strict";a.r(t);var n=a("0d8b"),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t["default"]=i.a},e3cd:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,"uni-page-body[data-v-9a6a2986]{background:#fff}.login[data-v-9a6a2986]{width:%?750?%;background:#fff;font-size:0}.loginPackage[data-v-9a6a2986]{padding:%?64?%}.title[data-v-9a6a2986]{margin-top:%?26?%;font-size:%?48?%;font-weight:700;color:#333}.loginAgreement[data-v-9a6a2986]{margin-top:%?20?%}.loginAgreement>span[data-v-9a6a2986]{font-size:%?24?%;color:#999}.loginAgreement>span>span[data-v-9a6a2986]{color:#2e6b9e}.loginInput[data-v-9a6a2986]{margin-top:%?115?%}.loginInput>uni-view[data-v-9a6a2986]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-top:%?25?%;height:%?81?%;width:%?622?%;border-bottom:1px solid #eee}.loginInput>uni-view>uni-input[data-v-9a6a2986]{width:%?400?%;margin-top:%?10?%;vertical-align:top;font-size:%?28?%;color:#333}.loginInput>uni-view>img[data-v-9a6a2986]{vertical-align:top;width:%?128?%;height:%?57?%}.loginInput>uni-view>uni-view[data-v-9a6a2986]{vertical-align:middle;display:inline-block}.loginInput>uni-view>uni-view>img[data-v-9a6a2986]{vertical-align:middle;width:%?48?%;height:%?48?%;margin-right:%?18?%}.loginInput>uni-view>uni-view>span[data-v-9a6a2986]{line-height:%?60?%;vertical-align:middle;font-size:%?24?%;color:#999}uni-input[data-v-9a6a2986]::-webkit-input-placeholder{font-size:%?28?%;color:#999}uni-input[data-v-9a6a2986]::-moz-placeholder{font-size:%?28?%;color:#999}uni-input[data-v-9a6a2986]::-ms-input-placeholder{font-size:%?28?%;color:#999}uni-input[data-v-9a6a2986]::placeholder{font-size:%?28?%;color:#999}.loginSubimt[data-v-9a6a2986]{margin:%?60?% auto 0 auto;width:%?622?%;height:%?88?%;background:#f44;border-radius:44px;text-align:center}.loginSubimt>span[data-v-9a6a2986]{line-height:%?88?%;font-size:%?30?%;color:#fff}.checkLoginType[data-v-9a6a2986]{margin:%?60?% auto 0 auto;width:%?622?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.checkLoginType>span[data-v-9a6a2986]{font-size:%?24?%;color:#999}.OtherType[data-v-9a6a2986]{margin-top:%?159?%}.OtherTypeTitle[data-v-9a6a2986]{text-align:center}.OtherTypeTitle>span[data-v-9a6a2986]{font-size:%?24?%;color:#999}.OtherTypeButton[data-v-9a6a2986]{width:%?220?%;margin:%?51?% auto 0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.OtherTypeButton>uni-view[data-v-9a6a2986]{display:inline-block;width:%?74?%;height:%?74?%;border-radius:50%;overflow:hidden}.OtherTypeButton>uni-view>img[data-v-9a6a2986]{width:%?74?%;height:%?74?%}.smsTitle[data-v-9a6a2986]{margin-top:%?64?%;text-align:center}.smsTitle>span[data-v-9a6a2986]{font-size:%?24?%;color:#999}.smsTitle1[data-v-9a6a2986]{margin-top:%?19?%;text-align:center}.smsTitle1>span[data-v-9a6a2986]{font-size:%?36?%;color:#333}.smsCodeInput[data-v-9a6a2986]{margin:%?104?% auto 0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:%?622?%}.smsCodeInput>uni-view[data-v-9a6a2986]{text-align:center;display:inline-block;width:%?120?%;border-bottom:1px solid #eee}.smsCodeInput>uni-view>uni-input[data-v-9a6a2986]{font-size:%?50?%;color:#333}.smsCodeSubimt[data-v-9a6a2986]{margin:%?79?% auto 0 auto;width:%?622?%;height:%?88?%;background:#f44;border-radius:%?44?%;text-align:center}.smsCodeSubimt>span[data-v-9a6a2986]{line-height:%?88?%;font-size:%?30?%;color:#fff}.sendSmsCode[data-v-9a6a2986]{margin-top:%?30?%;width:%?250?%}.sendSmsCode>span[data-v-9a6a2986]{font-size:%?24?%;color:#f44}body.?%PAGE?%[data-v-9a6a2986]{background:#fff}",""])}}]);