(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-store-buyOrder"],{"02d0":function(t,i,e){t.exports=e.p+"static/img/right.1acb7482.svg"},"07b2":function(t,i,e){"use strict";var o=e("756c"),n=e.n(o);n.a},"0e6b":function(t,i,e){"use strict";var o=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("c5f6");var n=o(e("bd86")),a=o(e("1413")),s=o(e("3368")),c=o(e("4dfd")),r=o(e("0dfe")),u={data:function(){var t;return t={sid:null,iScoupon:!1,buyData:{},loadlogo:!0,vipCouponPrice:"0.00",consumPrice:"",notconsumPrice:"",buyPrice:"0.00",type:""},(0,n.default)(t,"sid",""),(0,n.default)(t,"pack_id",""),(0,n.default)(t,"useInfo",{}),(0,n.default)(t,"shopShow",!1),(0,n.default)(t,"showType","bottom"),(0,n.default)(t,"phoneHight",0),(0,n.default)(t,"sid",""),(0,n.default)(t,"packids",[]),t},onLoad:function(t){var i=this;uni.getSystemInfo({success:function(t){i.phoneHight=t.windowHeight+"px"}}),t.type?(i.type=t.type,i.mid=t.mid,1==t.type&&(i.sid=t.sid,i.getUseInfo(function(){console.info(i.useInfo),1==i.useInfo.is_shop&&(i.shopShow=!0)}),uni.setNavigationBarTitle({title:"特权使用"})),2==t.type&&(i.sid=t.sid,i.getUseInfo(),uni.setNavigationBarTitle({title:"在线买单"})),3==t.type&&(i.pack_id=t.pack_id,i.getUseInfo(),uni.setNavigationBarTitle({title:"礼包使用"}))):(i.sid=t.sid,i.getPayOnlineInfo(t.sid))},components:{loading:c.default,PopManager:a.default},watch:{notconsumPrice:{handler:function(){var t=this;t.useInfo.discount=Number(t.useInfo.discount),t.consumPrice=Number(t.consumPrice),t.notconsumPrice=Number(t.notconsumPrice),t.buyPrice=Number(t.buyPrice),t.vipCouponPrice=Number(t.vipCouponPrice),t.buyPrice=r.default.subtractionFloat(t.consumPrice,t.notconsumPrice,100)*(t.useInfo.discount/10)+t.notconsumPrice,t.vipCouponPrice=r.default.subtractionFloat(t.consumPrice,t.buyPrice,100)}},iScoupon:{handler:function(){var t=this;t.notconsumPrice=""}},consumPrice:{handler:function(){var t=this;t.iScoupon?(t.useInfo.discount=Number(t.useInfo.discount),t.consumPrice=Number(t.consumPrice),t.notconsumPrice=Number(t.notconsumPrice),t.buyPrice=Number(t.buyPrice),t.vipCouponPrice=Number(t.vipCouponPrice),t.buyPrice=r.default.subtractionFloat(t.consumPrice,t.notconsumPrice,100)*(t.useInfo.discount/10)+t.notconsumPrice,t.vipCouponPrice=r.default.subtractionFloat(t.consumPrice,t.buyPrice,100)):(t.useInfo.discount=Number(t.useInfo.discount),t.consumPrice=Number(t.consumPrice),t.notconsumPrice=Number(t.notconsumPrice),t.buyPrice=Number(t.buyPrice),t.vipCouponPrice=Number(t.vipCouponPrice),t.buyPrice=t.consumPrice*(t.useInfo.discount/10),t.vipCouponPrice=r.default.subtractionFloat(t.consumPrice,t.buyPrice,100))}}},methods:{iScouponCheck:function(){var t=this;t.iScoupon=!t.iScoupon,t.iScoupon||(t.notconsumPrice="")},checkLb:function(t){var i=this;if(-1==i.packids.indexOf(t))i.packids.push(t);else for(var e=0;e<i.packids.length;e++)i.packids[e]==t&&i.packids.splice(e,1)},closeShopShow:function(t){var i=this;i.sid=t,i.shopShow=!1,i.getUseInfo()},getPayOnlineInfo:function(t){var i=this,e={sid:t};s.default._post_form("&p=halfcard&do=getPayOnlineInfo",e,function(t){i.useInfo=t.data,i.loadlogo=!1},function(t){i.loadlogo=!1})},usePrivileged:function(){},usePayOnline:function(){var t=this,i={sid:t.sid,money:t.consumPrice,no_money:t.notconsumPrice};if(console.info(t.useInfo.payonline),"1"==t.useInfo.payonline)s.default._post_form("&p=halfcard&do=usePayOnline",i,function(t){s.default.navigationTo({url:"pages/mainPages/payment/payment?orderid="+t.data+"&plugin=halfcard"})});else{var e={mid:t.mid,packids:t.packids,money:t.consumPrice,no_money:t.notconsumPrice,card_id:t.useInfo.card_id};s.default._post_form("&p=halfcard&do=usePrivileged",e,function(t){uni.showToast({icon:"none",title:"消费成功",duration:2e3,success:function(){setTimeout(function(){uni.navigateBack({delta:1})},2e3)}})})}},getUseInfo:function(t){var i=this,e={type:i.type,sid:i.sid,pack_id:i.pack_id,mid:i.mid};s.default._post_form("&p=halfcard&do=useInfo",e,function(e){i.useInfo=e.data,console.info(i.useInfo),i.loadlogo=!1,t&&t()},function(t){s.default.navigationTo({url:"pages/mainPages/userCenter/userCenter"})})}},computed:{buyPrice:function(){var t=this,i=t.buyData,e=Number(t.consumPrice),o=Number(t.notconsumPrice);if(10===i.discount)return e.toFixed(2);if(10!==i.discount&&!t.iScoupon)return t.vipCouponPrice=(e*Number(i.discount/10)).toFixed(2),(e-e*Number(i.discount/10)).toFixed(2);if(10!==i.discount&&t.iScoupon){if(!(e>0&&e<=o)){var n=e-o;return t.vipCouponPrice=(n*Number(i.discount/10)).toFixed(2),(n-n*Number(i.discount/10)+o).toFixed(2)}s.default.showError("不可消费金额不能大于消费金额最低支付0.01元")}}}};i.default=u},1413:function(t,i,e){"use strict";e.r(i);var o=e("ad41"),n=e("4125");for(var a in n)"default"!==a&&function(t){e.d(i,t,function(){return n[t]})}(a);e("aba1");var s=e("2877"),c=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,"6c747836",null);i["default"]=c.exports},"2bda":function(t,i,e){"use strict";e.r(i);var o=e("b9e8"),n=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(i,t,function(){return o[t]})}(a);i["default"]=n.a},3058:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".loadlogo-container[data-v-43c0d7f6]{width:100%;height:100%;background-color:#fff;position:fixed;z-index:99999}.loadlogo[data-v-43c0d7f6]{width:80px;height:80px;\r\n\t/* margin: -60px 0 0 -60px; */position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.loadlogo .image[data-v-43c0d7f6]{width:100%;height:100%}",""])},4125:function(t,i,e){"use strict";e.r(i);var o=e("7a7b"),n=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(i,t,function(){return o[t]})}(a);i["default"]=n.a},"4dfd":function(t,i,e){"use strict";e.r(i);var o=e("aaf2"),n=e("2bda");for(var a in n)"default"!==a&&function(t){e.d(i,t,function(){return n[t]})}(a);e("c0f9");var s=e("2877"),c=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,"43c0d7f6",null);i["default"]=c.exports},6747:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,'.nwrap[data-v-4b5497f4]{white-space:nowrap}.switch[data-v-4b5497f4]{width:%?80?%;height:%?40?%;border:%?2?% solid #f44;border-radius:%?20?%}.switch>uni-view[data-v-4b5497f4]{padding:%?6?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.switch>uni-view>uni-view[data-v-4b5497f4]{width:%?28?%;height:%?28?%;background:#f44;-webkit-box-shadow:%?0?% %?2?% %?6?% %?0?% rgba(255,68,68,.35);box-shadow:%?0?% %?2?% %?6?% %?0?% rgba(255,68,68,.35);border-radius:50%}.useName[data-v-4b5497f4]{color:#f44;font-size:%?24?%}.infoMb[data-v-4b5497f4]{width:%?550?%;margin-left:%?20?%;display:inline-block;vertical-align:top}.infoMb>uni-view[data-v-4b5497f4]{vertical-align:middle;display:inline-block}.infoMb>uni-view>uni-view:first-child>span[data-v-4b5497f4]{font-size:%?28?%;font-weight:700;color:#333}.infoMb>uni-view>uni-view:nth-child(2)>span[data-v-4b5497f4]{display:inline-block;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;width:%?520?%;font-size:%?24?%;color:#999}.infoMb>img[data-v-4b5497f4]{margin-top:%?40?%;float:right;vertical-align:middle;width:%?25?%}.logoMb[data-v-4b5497f4]{vertical-align:top;display:inline-block}.logoMb>img[data-v-4b5497f4]{height:%?100?%;width:%?100?%}.shopShow[data-v-4b5497f4]{background:#fff;width:%?750?%}uni-page-body[data-v-4b5497f4]{background-color:#f0edf4}.checkStoreMbPackage[data-v-4b5497f4]{border-bottom:%?1?% solid grey;padding:%?30?%}.input-box[data-v-4b5497f4]{padding:%?20?%;border:1px solid #cfced3;-webkit-box-shadow:0 0 %?10?% %?4?% #cfced3;box-shadow:0 0 %?10?% %?4?% #cfced3;position:relative;z-index:2;margin-top:%?4?%}.input-box .consumption-box-input[data-v-4b5497f4]{background-color:#f4f4f6;height:%?100?%;padding:0 %?20?%;-webkit-box-shadow:0 0 %?10?% #f4f4f6;box-shadow:0 0 %?10?% #f4f4f6}.input-box .couponPrice-box[data-v-4b5497f4]{padding:0 %?10?%;margin:%?30?% 0}.mitigate-pocket[data-v-4b5497f4]{-webkit-box-shadow:0 0 5px #cfced3;box-shadow:0 0 5px #cfced3;margin:0 %?2?%}.mitigate-pocket .mitigate-pocket-fgx[data-v-4b5497f4]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:%?630?%;height:%?2?%;border-bottom:1px dashed #eee}.mitigate-pocket[data-v-4b5497f4]:before{content:" ";width:%?30?%;height:%?30?%;border-radius:50%;background-color:#f0edf4;position:absolute;top:50%;left:%?-14?%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.mitigate-pocket[data-v-4b5497f4]:after{content:" ";width:%?30?%;height:%?30?%;border-radius:50%;background-color:#f0edf4;position:absolute;top:50%;right:%?-14?%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.mitigate[data-v-4b5497f4]{padding:%?40?% %?30?% %?40?% %?40?%}.mitigate .mitigate-price[data-v-4b5497f4]{color:#cd8553}.store-title[data-v-4b5497f4]{color:#cd8553;background-color:#fef9ed;height:%?70?%;line-height:%?70?%;margin:0 %?2?%}.buy-label[data-v-4b5497f4]{margin:%?10?% 0 %?20?%;padding:0 %?10?%;letter-spacing:%?2?%}.submit-btn[data-v-4b5497f4]{background-color:#1bbc9a;height:%?90?%;line-height:%?90?%}.hoverButton[data-v-4b5497f4]{opacity:.2;background-color:#000}body.?%PAGE?%[data-v-4b5497f4]{background-color:#f0edf4}',""])},"756c":function(t,i,e){var o=e("6747");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=e("4f06").default;n("19af0e4c",o,!0,{sourceMap:!1,shadowMode:!1})},"7a7b":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o={data:function(){return{}},props:{show:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},showOverlay:{type:Boolean,default:!0},type:{type:String,default:"center"},modelData:{type:Object,default:function(){}}},components:{},computed:{},mounted:function(){},methods:{handleMaskClick:function(){this.$emit("clickmask")}}};i.default=o},"964a":function(t,i,e){var o=e("a031");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=e("4f06").default;n("d0d04810",o,!0,{sourceMap:!1,shadowMode:!1})},"98c2":function(t,i,e){"use strict";var o=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("v-uni-view",[o("v-uni-view",{staticClass:"content padding-box-all"},[o("v-uni-form",[3!=t.type?o("v-uni-view",{staticClass:"input-box b-f"},[o("v-uni-view",{staticClass:"consumption-box-input dis-flex flex-x-between flex-y-center bor-radius-10upx"},[o("v-uni-view",{staticClass:"f-30 col-3 nwrap"},[t._v("消费总金额")]),o("v-uni-view",{staticClass:"input-style"},[o("v-uni-input",{staticClass:"t-r",attrs:{type:"number",value:"",name:"consumpPrice"},model:{value:t.consumPrice,callback:function(i){t.consumPrice=i},expression:"consumPrice"}})],1)],1),[o("v-uni-view",{staticClass:"couponPrice-box dis-flex flex-y-center"},[o("v-uni-view",{staticClass:"radio m-right10",on:{click:function(i){i=t.$handleEvent(i),t.iScouponCheck(i)}}},[o("v-uni-radio-group",{attrs:{name:"couponPrice"}},[o("v-uni-radio",{attrs:{value:"radio1",checked:t.iScoupon,color:"#27CE00"}})],1)],1),o("v-uni-view",{staticClass:"f-28 col-c"},[t._v("输入不参与优惠金额(如酒水、套餐)")])],1),t.iScoupon?[o("v-uni-view",{staticClass:"consumption-box-input dis-flex flex-x-between flex-y-center bor-radius-10upx"},[o("v-uni-view",{staticClass:"f-30 col-3"},[t._v("不可优惠金额")]),o("v-uni-view",{staticClass:"input-style"},[o("v-uni-input",{staticClass:"t-r",attrs:{type:"number",value:"",name:"notconsumpPrice",disabled:!t.iScoupon},model:{value:t.notconsumPrice,callback:function(i){t.notconsumPrice=i},expression:"notconsumPrice"}})],1)],1)]:t._e()]],2):t._e(),o("v-uni-view",{staticClass:"mitigate-pocket b-f p-r"},[t._l(t.useInfo.pack,function(i,e){return o("v-uni-view",{staticClass:"mitigate dis-flex flex-x-between flex-y-center"},[o("v-uni-view",{staticClass:"dis-flex flex-y-center"},[o("v-uni-view",{staticClass:"f-30 col-3 m-right10"},[t._v(t._s(i.name))]),o("v-uni-view",{staticClass:"f-24 col-c"})],1),o("v-uni-view",{staticClass:"mitigate-price f-24"},[o("v-uni-view",{staticClass:"switch"},[-1!==t.packids.indexOf(i.id)?o("v-uni-view",{staticClass:"switchOn",on:{click:function(e){e=t.$handleEvent(e),t.checkLb(i.id)}}},[o("span"),o("v-uni-view")],1):t._e(),-1==t.packids.indexOf(i.id)?o("v-uni-view",{staticClass:"switchOn",on:{click:function(e){e=t.$handleEvent(e),t.checkLb(i.id)}}},[o("v-uni-view"),o("span")],1):t._e()],1)],1)],1)}),3!=t.type?o("v-uni-view",{staticClass:"mitigate dis-flex flex-x-between flex-y-center"},[o("v-uni-view",{staticClass:"dis-flex flex-y-center"},[o("v-uni-view",{staticClass:"f-30 col-3 m-right10"},[t._v("会员减免")]),o("v-uni-view",{staticClass:"f-24 col-c"},[t._v("会员减免"+t._s(t.useInfo.discount)+"折")])],1),o("v-uni-view",{staticClass:"mitigate-price f-24"},[t._v(t._s(t.vipCouponPrice)+"元")])],1):t._e(),o("v-uni-view",{staticClass:"out-pocket"},[3!=t.type?o("v-uni-view",{staticClass:"mitigate dis-flex flex-x-between flex-y-center"},[o("v-uni-view",{staticClass:"dis-flex flex-y-center"},[o("v-uni-view",{staticClass:"f-30 col-3 m-right10"},[t._v("实付金额")])],1),o("v-uni-view",{staticClass:"mitigate-price f-24"},[t._v(t._s(t.buyPrice)+"元")])],1):t._e()],1),3!=t.type?o("v-uni-view",{staticClass:"mitigate-pocket-fgx"}):t._e()],2),o("v-uni-view",{staticClass:"store-title f-24 t-c"},[o("span",{staticClass:"useName"},[t._v(t._s(""!==t.type?"持卡人":"商户")+":"+t._s(t.useInfo.name))])]),o("v-uni-view",{staticClass:"buy-label f-24 col-6"},[t._v("买单仅限于到店支付,请确认金额后提交")]),""==t.type?o("v-uni-button",{staticClass:"submit-btn t-c bor-radius-10upx f-28 col-f",attrs:{formType:"submit","hover-class":"hoverButton"},on:{click:function(i){i=t.$handleEvent(i),t.usePayOnline(i)}}},[t._v("和店员已确认,立即买单")]):t._e(),""!==t.type?o("v-uni-button",{staticClass:"submit-btn t-c bor-radius-10upx f-28 col-f",attrs:{formType:"submit","hover-class":"hoverButton"},on:{click:function(i){i=t.$handleEvent(i),t.usePayOnline(i)}}},[t._v(t._s(""!==t.type?"点击在线买单":"和店员已确认,立即买单"))]):t._e()],1)],1),o("PopManager",{attrs:{show:t.shopShow,type:t.showType}},[o("v-uni-view",{staticClass:"shopShow",style:{height:t.phoneHight}},t._l(t.useInfo.shop_list,function(i,n){return o("v-uni-view",{staticClass:"checkStoreMb",on:{click:function(e){e=t.$handleEvent(e),t.closeShopShow(i.id)}}},[o("v-uni-view",{staticClass:"checkStoreMbPackage"},[o("v-uni-view",{staticClass:"logoMb"},[o("img",{attrs:{src:i.logo}})]),o("v-uni-view",{staticClass:"infoMb"},[o("v-uni-view",[o("v-uni-view",[o("span",[t._v(t._s(i.storename))])]),o("v-uni-view",[o("span",[t._v(t._s(i.address))])])],1),o("img",{attrs:{src:e("02d0")}})],1)],1)],1)}),1)],1)],1)},n=[];e.d(i,"a",function(){return o}),e.d(i,"b",function(){return n})},a031:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".pop[data-v-6c747836]{visibility:hidden}.pop--show[data-v-6c747836]{visibility:visible}.pop__mask[data-v-6c747836]{position:fixed;top:0;left:0;right:0;bottom:0;z-index:100;background:rgba(0,0,0,.5);display:none}.pop__mask--hide[data-v-6c747836]{background:0 0}.pop__container[data-v-6c747836]{position:fixed;left:50%;top:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0);-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease;z-index:200;opacity:0}.pop--show .pop__container[data-v-6c747836]{opacity:1}.pop--show .pop__mask[data-v-6c747836]{display:block}.pop--left .pop__container[data-v-6c747836]{left:0;top:50%;-webkit-transform:translate3d(-100%,-50%,0);transform:translate3d(-100%,-50%,0)}.pop--show.pop--left .pop__container[data-v-6c747836]{-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}.pop--right .pop__container[data-v-6c747836]{right:0;top:50%;left:auto;-webkit-transform:translate3d(100%,-50%,0);transform:translate3d(100%,-50%,0)}.pop--show.pop--right .pop__container[data-v-6c747836]{-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}.pop--bottom .pop__container[data-v-6c747836]{top:auto;left:50%;bottom:0;-webkit-transform:translate3d(-50%,100%,0);transform:translate3d(-50%,100%,0)}.pop--show.pop--bottom .pop__container[data-v-6c747836]{-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0)}.pop--top .pop__container[data-v-6c747836]{top:0;left:50%;-webkit-transform:translate3d(-50%,-100%,0);transform:translate3d(-50%,-100%,0)}.pop--show.pop--top .pop__container[data-v-6c747836]{-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0)}",""])},a4aa:function(t,i,e){"use strict";e.r(i);var o=e("0e6b"),n=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(i,t,function(){return o[t]})}(a);i["default"]=n.a},aaf2:function(t,i,e){"use strict";var o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-view",{staticClass:"loadlogo-container"},[e("v-uni-view",{staticClass:"loadlogo"},[e("v-uni-image",{staticClass:"image",attrs:{src:"/static/images/loadlogo.svg",mode:"aspectFill"}})],1)],1)],1)},n=[];e.d(i,"a",function(){return o}),e.d(i,"b",function(){return n})},aba1:function(t,i,e){"use strict";var o=e("964a"),n=e.n(o);n.a},ad41:function(t,i,e){"use strict";var o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"page"},[e("v-uni-view",{staticClass:"pop",class:["pop--"+t.type,{"pop--show":t.show}]},[t.overlay?e("v-uni-view",{staticClass:"pop__mask",class:{"pop__mask--hide":!t.showOverlay},on:{click:function(i){i=t.$handleEvent(i),t.handleMaskClick(i)}}}):t._e(),e("v-uni-view",{staticClass:"pop__container"},[t._t("default")],2)],1)],1)},n=[];e.d(i,"a",function(){return o}),e.d(i,"b",function(){return n})},b202:function(t,i,e){"use strict";e.r(i);var o=e("98c2"),n=e("a4aa");for(var a in n)"default"!==a&&function(t){e.d(i,t,function(){return n[t]})}(a);e("07b2");var s=e("2877"),c=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,"4b5497f4",null);i["default"]=c.exports},b9e8:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o={};i.default=o},c0f9:function(t,i,e){"use strict";var o=e("f010"),n=e.n(o);n.a},f010:function(t,i,e){var o=e("3058");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=e("4f06").default;n("62449e59",o,!0,{sourceMap:!1,shadowMode:!1})}}]);