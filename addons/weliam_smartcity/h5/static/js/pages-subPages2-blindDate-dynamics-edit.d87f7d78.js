(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-subPages2-blindDate-dynamics-edit"],{2240:function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("4160"),a("a434"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("2c7c")),n=i(a("ec93")),d=i(a("8f6e")),s={data:function(){return{form:{content:"",photo:[],photo_show:[],video:"",lng:"",lat:"",address:"点击定位地址"},dynamic_id:"",isOpenLaction:!1,disabled:!0,userAddress:{},owenscitylist:[],phoneHight:"",phoneWidth:"",latlngs:null,counts:!0,userInfo:{},lblis:{}}},components:{PopManager:d.default},onLoad:function(e){var t=this;0!=e.id&&(console.log("触发"),t.dynamic_id=e.id),t.owenscitylist=uni.getStorageSync("cityList");var a=uni.getStorageSync("curLoction")||{};t.form.lat=a.latitude||"",t.form.lng=a.longitude||"",0!=e.id&&t.getMemberList(),t.latlngs=uni.getStorageSync("curLoction"),t.toLocale(),uni.getSystemInfo({success:function(e){t.phoneHight=e.windowHeight+"px",t.phoneWidth=e.windowWidth+"px"}})},onShow:function(){},methods:{getMemberList:function(){var e=this;o.default._post_form("&p=dating&do=dynamicEdit&type=get",{id:e.dynamic_id},(function(t){0==t.errno&&(e.form=t.data,e.form.address=t.data.address?t.data.address:"点击定位地址",e.form.photo_show=t.data.photo_show?t.data.photo_show:[])}),!1,(function(){}))},handlesubmitClick:function(){var e=this,t={};"点击定位地址"===e.form.address&&(e.form.address="",e.form.lat="",e.form.lng=""),t.data=JSON.stringify(e.form),o.default._post_form("&p=dating&do=dynamicEdit&id=".concat(e.dynamic_id,"&type=post"),t,(function(e){0==e.errno&&uni.reLaunch({url:"/pages/subPages2/blindDate/dynamics/myself"})}),!1,(function(){}))},goLocation:function(){var e=this;e.isOpenLaction=!0},getloctions:function(e){console.log(e,"666666");var t=this;o.default._post_form("&p=member&do=lng2areaid&lng=".concat(e.lng,"&lat=").concat(e.lat),{},(function(a){t.userAddress.detailed_address=e.detailed_address,t.userAddress.lat=e.lat,t.userAddress.lng=e.lng,t.userAddress.provinceid=a.data.provinceid,t.userAddress.countyid=a.data.countyid,t.userAddress.cityid=a.data.cityid,t.userAddress.provinceidName="",t.owenscitylist.forEach((function(e,a){e.id==t.userAddress.provinceid&&(t.form.address=e.name,t.userAddress.provinceidName=e.name,e.area.forEach((function(e){e.id==t.userAddress.cityid&&(t.form.address="".concat(t.form.address).concat(e.name),t.userAddress.areaidName=e.name,console.log(t.form.address,e.name),e.dist.forEach((function(e){e.id==t.userAddress.countyid&&(t.form.address="".concat(t.form.address).concat(e.name),t.userAddress.distidName=e.name)})))})))})),console.log(t.userAddress)}))},toLocale:function(){var e,t=this,a=1;window.addEventListener("message",(function(i){var o=i.data;t.counts&&((a>1||t.counts)&&o&&"locationPicker"==o.module&&(console.log(a),e={lat:o.latlng.lat,lng:o.latlng.lng,detailed_address:o.poiaddress},t.isOpenLaction=!1,t.disabled=!1,t.getloctions(e)),a++,t.counts=!1,setTimeout((function(){t.counts=!0}),1e3))}),!1)},uoloadIgs:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,i=this;n.default.uoloadIg(a.localIds[t],(function(n){if("uploadImage:ok"===n.errMsg){uni.showLoading({});var d={upload_type:2,id:n.serverId};o.default._post_form("&do=uploadFiles",d,(function(o){0===o.errno&&(i.form.photo.push(o.data.image),i.form.photo_show.push(o.data.img),t<e-1&&(t++,uni.setTimeout(i.uoloadIgs(e,t,a),500)),i.$forceUpdate())}),!1,(function(){uni.hideLoading()}))}else uni.hideLoading(),o.default.showError("上传失败")}))},upImages:function(){var e=this,t=6-e.form.photo_show.length||0;t<=0?o.default.showError("最多上传6涨图片"):n.default.choseImage((function(t){var a=t.localIds.length;e.uoloadIgs(a,0,t)}),t)},deleteImage:function(e){this.form.photo_show.splice(e,1),this.form.photo.splice(e,1)},upLoadVideo:function(){var e=this;uni.chooseVideo({count:1,sourceType:["camera","album"],success:function(t){console.log(t,"视频上传的res"),uni.showLoading(),uni.uploadFile({url:o.default.api_root+"&do=uploadFiles",filePath:t.tempFilePath,name:"file",formData:{upload_type:1,is_base:1},success:function(t){var a=JSON.parse(t.data),i=new e.$util.Base64;console.log("data",a),0===a.errno?e.form.video=i.decode(a.data.img):o.default.showError(a.message,(function(){})),uni.hideLoading()},fail:function(e){uni.hideLoading()}})}})},deleteVideo:function(){this.form.video="",this.isShowVideoClose=!1}}};t.default=s},2314:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.desc[data-v-bcae5dde]{width:%?690?%;height:%?260?%;margin:auto;padding-top:%?30?%;color:#333;font-size:%?28?%}.desc .label[data-v-bcae5dde]{height:%?40?%}.desc .value[data-v-bcae5dde]{width:100%;height:%?200?%;margin-top:%?20?%;line-height:%?40?%}.line[data-v-bcae5dde]{width:%?690?%;height:%?8?%;background-color:#f8f8f8;margin:auto;border-radius:%?4?%}.avatar-info[data-v-bcae5dde]{width:%?690?%;height:auto;margin:auto;padding:%?40?% 0}.avatar-info .up-box[data-v-bcae5dde]{width:100%;height:auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}.avatar-info .up-box .up-load[data-v-bcae5dde]{width:%?158?%;height:%?158?%;line-height:%?158?%;text-align:center;border-radius:%?20?%;margin:%?30?% %?10?% 0 0;border:%?1?% dashed #ccc;position:relative}.avatar-info .up-box .up-load .iconfont[data-v-bcae5dde]{font-size:%?60?%;color:#333;font-weight:700}.avatar-info .up-box .up-load uni-image[data-v-bcae5dde]{width:%?158?%;height:%?158?%;border-radius:%?20?%}.avatar-info .up-box .up-load .close[data-v-bcae5dde]{width:%?30?%;height:%?30?%;border-radius:%?15?%;color:#fff;background-color:rgba(0,0,0,.5);position:absolute;top:%?10?%;right:%?10?%;-webkit-transform:rotate(45deg);transform:rotate(45deg);font-size:%?32?%;line-height:%?28?%;text-align:center}.avatar-info .avatar[data-v-bcae5dde]{border:none}.avatar-info .qrcode[data-v-bcae5dde]{border:none}.h1-title[data-v-bcae5dde]{height:%?45?%;line-height:%?45?%;font-size:%?32?%;color:#333;font-weight:700}.video-box[data-v-bcae5dde]{width:%?690?%;margin:%?30?% auto 0;height:auto}.video-box .video-up-load[data-v-bcae5dde]{width:100%;height:%?390?%;border-radius:%?20?%;border:%?1?% dashed #ccc;line-height:%?390?%;text-align:center;margin:%?30?% auto %?40?%;position:relative}.video-box .video-up-load .iconfont[data-v-bcae5dde]{font-size:%?54?%;font-weight:700}.video-box .video-up-load .video[data-v-bcae5dde]{width:100%;height:100%}.video-box .video-up-load .close[data-v-bcae5dde]{width:%?60?%;height:%?60?%;border-radius:%?30?%;color:#fff;background-color:rgba(0,0,0,.5);position:absolute;top:%?18?%;right:%?18?%;-webkit-transform:rotate(45deg);transform:rotate(45deg);font-size:%?50?%;line-height:%?60?%;text-align:center}.footer-btn[data-v-bcae5dde]{width:%?690?%;height:%?80?%;line-height:%?80?%;text-align:center;border-radius:%?20?%;background:-webkit-linear-gradient(right,#ff8e88,#fdad28);background:linear-gradient(270deg,#ff8e88,#fdad28);border-radius:%?20?%;margin:auto;color:#fff;font-size:%?32?%}.location[data-v-bcae5dde]{width:%?690?%;height:auto;padding:%?20?% 0;font-size:%?26?%;color:#f44;margin:auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.location uni-image[data-v-bcae5dde]{padding-left:%?10?%;width:%?22?%;height:%?22?%}',""]),e.exports=t},"2ec1":function(e,t,a){"use strict";a.r(t);var i=a("2240"),o=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=o.a},"357d":function(e,t,a){var i=a("2314");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("4f06").default;o("65c8babb",i,!0,{sourceMap:!1,shadowMode:!1})},"4feb":function(e,t,a){"use strict";a.r(t);var i=a("b480d"),o=a("2ec1");for(var n in o)"default"!==n&&function(e){a.d(t,e,(function(){return o[e]}))}(n);a("eb1d");var d,s=a("f0c5"),r=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"bcae5dde",null,!1,i["a"],d);t["default"]=r.exports},b480d:function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticStyle:{"padding-bottom":"50rpx"}},[a("v-uni-view",{staticClass:"desc"},[a("v-uni-view",{staticClass:"h1-title"},[e._v("动态信息")]),a("v-uni-textarea",{staticClass:"value",attrs:{placeholder:"请输入动态信息","placeholder-style":"fontsize: 28rpx"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),a("v-uni-view",{staticClass:"line"}),a("v-uni-view",{staticClass:"avatar-info"},[a("v-uni-view",{staticClass:"h1-title"},[e._v("上传图片")]),a("v-uni-view",{staticClass:"up-box"},[a("v-uni-view",{staticClass:"up-load",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upImages.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"iconfont icon-tianjia"})],1),e._l(e.form.photo_show,(function(t,i){return a("v-uni-view",{key:i,staticClass:"up-load",staticStyle:{border:"none"}},[a("v-uni-image",{attrs:{src:t,mode:""}}),a("v-uni-view",{staticClass:"close",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteImage(i)}}},[e._v("+")])],1)}))],2)],1),a("v-uni-view",{staticClass:"line"}),a("v-uni-view",{staticClass:"video-box"},[a("v-uni-view",{staticClass:"h1-title"},[e._v("上传视频")]),e.form.video?a("v-uni-view",{staticClass:"video-up-load"},[a("v-uni-video",{staticClass:"video",attrs:{src:e.form.video,controls:!0}}),a("v-uni-view",{staticClass:"close",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.deleteVideo.apply(void 0,arguments)}}},[e._v("+")])],1):a("v-uni-view",{staticClass:"video-up-load",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upLoadVideo.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"iconfont icon-tianjia"})],1)],1),a("v-uni-view",{staticClass:"location",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goLocation.apply(void 0,arguments)}}},[a("v-uni-view",{staticStyle:{color:"#333"}},[e._v(e._s(e.form.address))]),a("v-uni-image",{attrs:{src:e.imgfixUrls+"merchant/where.svg"}}),a("v-uni-view",[e._v("定位")])],1),a("v-uni-view",{staticClass:"footer-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handlesubmitClick.apply(void 0,arguments)}}},[e._v("发布")]),a("PopManager",{attrs:{show:e.isOpenLaction,type:"bottom",overlay:"false",showOverlay:"false"}},[e.latlngs.latitude?a("v-uni-view",{staticClass:"iframe-wid-hgt",style:{height:e.phoneHight,width:e.phoneWidth}},[a("iframe",{attrs:{id:"mapPage",width:"100%",height:"100%",frameborder:"0",src:"https://apis.map.qq.com/tools/locpicker?search=1&type=1&key=KIQBZ-6OT3G-AOMQD-IHW6J-PEUDV-VCFAF&referer=myapp&coord="+e.latlngs.latitude+","+e.latlngs.longitude}})]):e._e(),e.latlngs.latitude?e._e():a("v-uni-view",{staticClass:"iframe-wid-hgt",style:{height:e.phoneHight,width:e.phoneWidth}},[a("iframe",{attrs:{id:"mapPage",width:"100%",height:"100%",frameborder:"0",src:"https://apis.map.qq.com/tools/locpicker?search=1&type=1&key=KIQBZ-6OT3G-AOMQD-IHW6J-PEUDV-VCFAF&referer=myapp"}})])],1)],1)},n=[]},eb1d:function(e,t,a){"use strict";var i=a("357d"),o=a.n(i);o.a}}]);