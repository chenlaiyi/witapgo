(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-payment-payment"],{"0c37":function(t,a,i){"use strict";i.r(a);var e=i("0cce"),n=i.n(e);for(var s in e)"default"!==s&&function(t){i.d(a,t,(function(){return e[t]}))}(s);a["default"]=n.a},"0cce":function(t,a,i){"use strict";var e=i("4ea4");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e(i("2c7c")),s=(e(i("ec93")),{data:function(){return{time:"",type:1,orderid:"",payInfo:{},plugin:"",types:null,phoneHight:null,deliverystring:null,img:""}},onLoad:function(t){var a=this;a.img=this.imgfixUrl,this.orderid=t.orderid,this.plugin=t.plugin,this.deliverystring=t.deliverystring,this.init(),t.types&&(this.types=t.types),uni.getSystemInfo({success:function(t){a.phoneHight=t.windowHeight+"px"}})},onShow:function(){},methods:{goduurUrl:function(t){var a=window.location.href,i=t+"&backurl="+encodeURIComponent(a);console.log(i),location.href=i,t=encodeURIComponent(t)},init:function(){var t=this;t.getOrderInfo()},checkPay:function(t){var a=this;4==a.type&&2==t||2==a.type&&4==t?a.type=5:5==a.type&&4==t?a.type=2:5==a.type&&2==t?a.type=4:a.type==t?uni.showToast({title:"请选择至少一个支付方式",icon:"none"}):a.type=t},getOrderInfo:function(){var t=this,a={orderid:"0"==t.orderid?"":t.orderid?t.orderid:1645,plugin:t.plugin||"wlfightgroup",deliverystring:t.deliverystring};n.default._post_form("&p=pay&do=getOrderInfo",a,(function(a){if(t.payInfo=a.data,a.data.diy_userInfo?t.type=5:0==a.data.wechat?0==a.data.credit?t.type=3:t.type=1:t.type=2,void 0!==a.data.sytime&&0!=a.data.sytime)var i=setInterval((function(){t.payInfo.sytime--,t.time=t.payInfo.sytime;var a=Math.floor(t.time%3600);t.time=Math.floor(t.time/3600)+":"+Math.floor(a/60)+":"+t.time%60,0==t.payInfo.sytime&&clearInterval(i)}),1e3);0==a.data.sytime&&(t.time="00:00:00")}))},goPay:function(){var t=this,a=t.payInfo,i=t.type,e=1===i?t.textSubData.moneytext:2===i?"微信":4===i?"乐豆支付":"支付宝",s=n.default.getClientType(),o={order_no:a.tid,name:a.goodname,pay_type:4===i||5===i?1:i};1===i?uni.showModal({title:"温馨提示",content:"确认使用".concat(e,"方式付款"),success:function(e){e.confirm&&(uni.showLoading({title:"正在处理..."}),n.default._post_form("&p=pay&do=requestPay",o,(function(e){1==t.types?(console.info(111111),n.default.navigationTo({url:"pages/mainPages/successRelease/successRelease?id="+e.data.tieziid})):(console.info(22222),1!==i&&4!==i||(1===e.data.status?n.default.showSuccess("支付成功",(function(){n.default.navigationTo({url:"pages/mainPages/paySuccess/paySuccess?tid="+a.tid+"&plugin="+t.plugin,navType:"rediRect"})})):2===e.data.status?(o.pay_type=2,o.blendflag=1,n.default._post_form("&p=pay&do=requestPay",o,(function(a){t.wechatPayment(a.data,s)}),!1,(function(){uni.hideLoading()}))):n.default.showError("支付失败",(function(){n.default.navigationTo({url:"pages/subPages/orderList/orderList?type=0"})}))))}),!1,(function(){uni.hideLoading()})))}}):4===i||5===i?(uni.showLoading({title:"正在处理..."}),n.default._post_form("&p=pay&do=requestPay",o,(function(e){1==t.types?(console.info(111111),n.default.navigationTo({url:"pages/mainPages/successRelease/successRelease?id="+e.data.tieziid})):(console.info(22222),5!==i&&4!==i||(1===e.data.status?n.default.showSuccess("支付成功",(function(){n.default.navigationTo({url:"pages/mainPages/paySuccess/paySuccess?tid="+a.tid+"&plugin="+t.plugin,navType:"rediRect"})})):2===e.data.status?(t.type=5,o.pay_type=2,o.blendflag=1,n.default._post_form("&p=pay&do=requestPay",o,(function(a){t.wechatPayment(a.data,s)}),!1,(function(){uni.hideLoading()}))):n.default.showError("支付失败",(function(){n.default.navigationTo({url:"pages/subPages/orderList/orderList?type=0"})}))))}),!1,(function(){uni.hideLoading()}))):(uni.showLoading({title:"正在处理..."}),n.default._post_form("&p=pay&do=requestPay",o,(function(a){2===i&&t.wechatPayment(a.data,s),3===i&&t.aliPayment(a.data)}),!1,(function(){uni.hideLoading()})))},aliPayment:function(t){console.log(t);var a=new this.$util.Base64,i=a.encode(t);n.default.navigationTo({url:"pages/mainPages/payment/pay?goto="+i})},wechatPayment:function(t,a){console.log(t,a);var i=this,e=t;"2"===a?location.href=e:"1"===a&&WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},(function(t){"get_brand_wcpay_request:ok"==t.err_msg?n.default.navigationTo({url:"pages/mainPages/paySuccess/paySuccess?tid="+i.payInfo.tid,navType:"rediRect"}):n.default.showError("支付失败",(function(){n.default.navigationTo({url:"pages/subPages/orderList/orderList?type=0",navType:"reLaunch"})}))}))}},computed:{textSubData:function(){return uni.getStorageSync("TextSubstitution")}}});a.default=s},"0d21a":function(t,a,i){var e=i("24fb");a=e(!1),a.push([t.i,"uni-page-body[data-v-144102cb]{background:#fff!important;overflow-x:hidden}.payment[data-v-144102cb]{font-size:0;background:#fff!important;padding-bottom:%?50?%}.paymentPackage[data-v-144102cb]{border:1px solid transparent}.surplusTime[data-v-144102cb]{margin-top:%?99?%;text-align:center}.surplusTime > span[data-v-144102cb]{font-size:%?24?%;color:#999}.conversion[data-v-144102cb]{padding:%?6?% %?10?%;margin-left:%?20?%;min-width:%?100?%;height:%?40?%;line-height:%?38?%;display:inline-block;color:#fff;background:-webkit-gradient(linear,left top,right top,from(#ee3023),to(#fa6033));background:-webkit-linear-gradient(left,#ee3023,#fa6033);background:linear-gradient(90deg,#ee3023,#fa6033);-webkit-border-radius:%?7?%;border-radius:%?7?%}.price[data-v-144102cb]{margin-top:%?29?%;text-align:center}.price > span[data-v-144102cb]{font-size:%?48?%;font-weight:700;color:#333}.price > span > span[data-v-144102cb]{font-size:%?72?%}.goodsInfo[data-v-144102cb]{text-align:center;width:%?367?%;margin:%?28?% auto 0 auto}.goodsInfo > span[data-v-144102cb]{font-size:%?24?%;color:#999}.paymentTypePackage[data-v-144102cb]{margin-top:%?60?%;padding:0 %?30?%}.paymentTypeList[data-v-144102cb]{margin-top:%?39?%}.paymentTypeList > uni-view[data-v-144102cb]{display:inline-block}.imgPackage[data-v-144102cb]{vertical-align:top;width:%?45?%;height:%?50?%}.imgPackage > uni-image[data-v-144102cb]{width:%?45?%;height:%?50?%}.inputPackage[data-v-144102cb]{vertical-align:top;margin-left:%?38?%;width:%?600?%;border-bottom:1px solid #eee}.inputPackage1[data-v-144102cb]{vertical-align:top;margin-left:%?38?%;width:%?600?%}.inputPackageLeftTitle[data-v-144102cb]{font-size:%?28?%;color:#333}.inputPackageMain[data-v-144102cb]{width:%?600?%;padding-bottom:%?40?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.inputPackageMain > uni-view[data-v-144102cb]{vertical-align:middle;display:inline-block}.inputPackageLeftBody[data-v-144102cb]{margin-top:%?9?%;font-size:%?24?%;color:#999}.paySubmit[data-v-144102cb]{position:fixed;bottom:10vh;margin-left:%?60?%;width:%?630?%;height:%?80?%;background:#f44;-webkit-border-radius:%?10?%;border-radius:%?10?%;text-align:center}.paySubmit > span[data-v-144102cb]{font-size:%?28?%;color:#fff;line-height:%?80?%}.inputPackageRight[data-v-144102cb]{margin-top:%?20?%;width:%?40?%;height:%?40?%;border:%?1?% solid #ccc;-webkit-border-radius:50%;border-radius:50%}.inputPackageRightCheck[data-v-144102cb]{margin-top:%?20?%;width:%?40?%;height:%?40?%;background:#f44;-webkit-border-radius:50%;border-radius:50%;text-align:center;overflow:hidden}.inputPackageRightCheck > uni-image[data-v-144102cb]{margin-top:%?11?%;width:%?28?%;height:%?23?%}body.?%PAGE?%[data-v-144102cb]{background:#fff!important}",""]),t.exports=a},"13d9":function(t,a,i){"use strict";var e=i("6eb4"),n=i.n(e);n.a},"286a":function(t,a,i){"use strict";i.r(a);var e=i("787d"),n=i("0c37");for(var s in n)"default"!==s&&function(t){i.d(a,t,(function(){return n[t]}))}(s);i("13d9");var o,c=i("f0c5"),u=Object(c["a"])(n["default"],e["b"],e["c"],!1,null,"144102cb",null,!1,e["a"],o);a["default"]=u.exports},"6eb4":function(t,a,i){var e=i("0d21a");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=i("4f06").default;n("4a844147",e,!0,{sourceMap:!1,shadowMode:!1})},"787d":function(t,a,i){"use strict";var e;i.d(a,"b",(function(){return n})),i.d(a,"c",(function(){return s})),i.d(a,"a",(function(){return e}));var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-scroll-view",{staticClass:"payment",style:{height:t.phoneHight},attrs:{"scroll-y":!0,"scroll-x":!1}},[i("v-uni-view",{staticClass:"paymentPackage"},[0!==t.payInfo.sytime?i("v-uni-view",{staticClass:"surplusTime"},[i("span",[t._v("支付剩余时间 "+t._s(t.time))])]):t._e(),i("v-uni-view",{staticClass:"price"},[i("span",[t._v("￥"),i("span",[t._v(t._s(t.payInfo.price))])])]),i("v-uni-view",{staticClass:"goodsInfo"},[i("span",[t._v(t._s(t.payInfo.goodname))])]),i("v-uni-view",{staticClass:"paymentTypePackage"},[1!=t.payInfo.credit||t.payInfo.diy_userInfo?t._e():i("v-uni-view",{staticClass:"paymentTypeList",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.checkPay(1)}}},[i("v-uni-view",{staticClass:"imgPackage"},[i("v-uni-image",{attrs:{src:t.imgfixUrls+"merchant/balancePay.svg"}})],1),i("v-uni-view",{staticClass:"inputPackage"},[i("v-uni-view",{staticClass:"inputPackageMain"},[i("v-uni-view",{staticClass:"inputPackageLeft"},[i("v-uni-view",{staticClass:"inputPackageLeftTitle"},[t._v(t._s(t.textSubData.moneytext)+"支付")]),i("v-uni-view",{staticClass:"inputPackageLeftBody"},[t._v("账户余额：￥"+t._s(t.payInfo.balance))])],1),1==t.type?i("v-uni-view",{staticClass:"inputPackageRightCheck"},[i("v-uni-image",{attrs:{src:t.imgfixUrls+"merchant/payCheck.svg"}})],1):t._e(),1!==t.type?i("v-uni-view",{staticClass:"inputPackageRight"}):t._e()],1)],1)],1),t.payInfo.diy_userInfo?i("v-uni-view",{staticClass:"paymentTypeList",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.checkPay(4)}}},[i("v-uni-view",{staticClass:"imgPackage"},[i("v-uni-image",{attrs:{src:t.imgfixUrls+"merchant/balancePay.svg"}})],1),i("v-uni-view",{staticClass:"inputPackage"},[i("v-uni-view",{staticClass:"inputPackageMain"},[i("v-uni-view",{staticClass:"inputPackageLeft",staticStyle:{flex:"1"}},[i("v-uni-view",{staticClass:"inputPackageLeftTitle"},[t._v("兑换券抵扣"),i("v-uni-text",{staticStyle:{padding:"0 10upx"}},[t._v(":")]),t._v("可用兑换券金额"),i("v-uni-text",{staticStyle:{padding:"0 10upx",color:"#EF4740","font-weight":"700"}},[t._v(t._s(t.payInfo.balance))]),i("v-uni-text",{staticStyle:{padding:"0 10upx"}},[t._v("(可抵用"),i("v-uni-text",{staticStyle:{padding:"0 10upx",color:"#EF4740","font-weight":"700"}},[t._v(t._s(t.payInfo.diy_userInfo.dkprice))]),t._v("元)")],1)],1),i("v-uni-view",{staticClass:"inputPackageLeftBody dis-flex",staticStyle:{color:"#333333"}},[i("v-uni-view",{},[t._v(t._s(t.payInfo.diy_userInfo.dhtip2))]),i("v-uni-view",{staticClass:"conversion",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.goduurUrl(t.payInfo.diy_userInfo.dhurl)}}},[t._v("去兑换"),i("v-uni-text",{staticClass:"iconfont icon-right",staticStyle:{"font-size":"24upx"}})],1)],1)],1),4==t.type||5==t.type?i("v-uni-view",{staticClass:"inputPackageRightCheck"},[i("v-uni-image",{attrs:{src:t.imgfixUrls+"merchant/payCheck.svg"}})],1):t._e(),4!==t.type&&5!==t.type?i("v-uni-view",{staticClass:"inputPackageRight"}):t._e()],1)],1)],1):t._e(),1==t.payInfo.wechat?i("v-uni-view",{staticClass:"paymentTypeList",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.checkPay(2)}}},[i("v-uni-view",{staticClass:"imgPackage"},[i("v-uni-image",{attrs:{src:t.imgfixUrls+"merchant/wechatPay.svg"}})],1),i("v-uni-view",{staticClass:"inputPackage"},[i("v-uni-view",{staticClass:"inputPackageMain"},[i("v-uni-view",{staticClass:"inputPackageLeft"},[i("v-uni-view",{staticClass:"inputPackageLeftTitle"},[t._v("微信支付")]),i("v-uni-view",{staticClass:"inputPackageLeftBody"},[t._v("微信支付，安全快捷")])],1),2==t.type||5==t.type?i("v-uni-view",{staticClass:"inputPackageRightCheck"},[i("v-uni-image",{attrs:{src:t.imgfixUrls+"merchant/payCheck.svg"}})],1):t._e(),2!==t.type&&5!==t.type?i("v-uni-view",{staticClass:"inputPackageRight"}):t._e()],1)],1)],1):t._e(),1==t.payInfo.alipay?i("v-uni-view",{staticClass:"paymentTypeList",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.checkPay(3)}}},[i("v-uni-view",{staticClass:"imgPackage"},[i("v-uni-image",{attrs:{src:t.imgfixUrls+"merchant/payPal.svg"}})],1),i("v-uni-view",{staticClass:"inputPackage1"},[i("v-uni-view",{staticClass:"inputPackageMain"},[i("v-uni-view",{staticClass:"inputPackageLeft"},[i("v-uni-view",{staticClass:"inputPackageLeftTitle"},[t._v("支付宝支付")]),i("v-uni-view",{staticClass:"inputPackageLeftBody"},[t._v("简单、安全、快速")])],1),3==t.type?i("v-uni-view",{staticClass:"inputPackageRightCheck"},[i("v-uni-image",{attrs:{src:t.imgfixUrls+"merchant/payCheck.svg"}})],1):t._e(),3!==t.type?i("v-uni-view",{staticClass:"inputPackageRight"}):t._e()],1)],1)],1):t._e()],1),i("v-uni-view",{staticClass:"paySubmitPackage",style:{marginTop:t.payInfo.diy_userInfo?"0":"100upx"}},[t.payInfo.diy_userInfo?i("v-uni-view",{staticClass:"t-c",staticStyle:{"padding-top":"70upx","padding-bottom":"200upx"}},[i("v-uni-view",{staticClass:"t-c f-24",staticStyle:{color:"#E44131"}},[t._v("实付款")]),i("v-uni-view",{staticClass:"f-w",staticStyle:{color:"#E44131","padding-top":"10upx"}},[i("v-uni-text",{staticClass:"f-38",staticStyle:{"padding-right":"10upx"}},[t._v("¥")]),2==t.type||3==t.type?i("v-uni-text",{staticStyle:{"font-size":"60upx"}},[t._v(t._s(t.payInfo.price))]):t._e(),2!==t.type&&3!==t.type?i("v-uni-text",{staticStyle:{"font-size":"60upx"}},[t._v(t._s(Math.round(100*(Math.abs(parseFloat(t.payInfo.diy_userInfo.dkprice)-parseFloat(t.payInfo.price))+Number.EPSILON))/100))]):t._e()],1),2==t.type||3==t.type?i("v-uni-view",{staticClass:"f-24",staticStyle:{color:"#999999","padding-top":"10upx"}},[t._v("总价:¥"+t._s(t.payInfo.price)+",兑换券抵扣:0.00")]):t._e(),2!==t.type&&3!==t.type?i("v-uni-view",{staticClass:"f-24",staticStyle:{color:"#999999","padding-top":"10upx"}},[t._v("总价:¥"+t._s(t.payInfo.price)+",兑换券抵扣:¥"+t._s(t.payInfo.diy_userInfo.dkprice))]):t._e()],1):t._e(),i("v-uni-view",{staticClass:"paySubmit",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goPay.apply(void 0,arguments)}}},[i("span",[t._v("确认支付")])])],1)],1)],1)},s=[]}}]);