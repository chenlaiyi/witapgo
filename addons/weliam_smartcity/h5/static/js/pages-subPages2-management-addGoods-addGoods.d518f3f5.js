(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-subPages2-management-addGoods-addGoods"],{"073b":function(t,i,a){var e=a("7dec");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=a("4f06").default;s("03446475",e,!0,{sourceMap:!1,shadowMode:!1})},"2c82":function(t,i,a){"use strict";a.r(i);var e=a("9b40"),s=a.n(e);for(var n in e)"default"!==n&&function(t){a.d(i,t,function(){return e[t]})}(n);i["default"]=s.a},"3ae4":function(t,i,a){i=t.exports=a("2350")(!1),i.push([t.i,'uni-image[data-v-5278bb16]{height:%?150?%;width:%?150?%;border-radius:%?10?%}.swiperBox[data-v-5278bb16]:after{content:"";width:30%}.uni-input[data-v-5278bb16]{font-size:%?30?%}.close[data-v-5278bb16]{position:absolute;right:0;top:0}.popfixed[data-v-5278bb16]{width:92vw;height:96vh;overflow:auto;background-color:#f7f7f7;position:fixed;left:0;top:0;padding:%?30?%;z-index:99;padding-bottom:%?300?%}.keys[data-v-5278bb16]{display:inline-block;color:#999;font-size:%?30?%}.userImgUpdata[data-v-5278bb16]{width:%?150?%;height:%?150?%;border-radius:%?10?%;background-color:#f8f8f8;border:1px solid #999;text-align:center}.userImgUpdata > uni-image[data-v-5278bb16]{margin-top:%?50?%;width:%?50?%;height:%?50?%}.f-l[data-v-5278bb16]{-webkit-box-flex:0.3;-webkit-flex:0.3;flex:0.3}.f-r[data-v-5278bb16]{-webkit-box-flex:0.7;-webkit-flex:0.7;flex:0.7;padding-top:%?8?%}.b-f1[data-v-5278bb16]{border-bottom:1px solid #f8f8f8;padding:%?15?% 0 %?20?%;display:-webkit-box;display:-webkit-flex;display:flex}.addGoods[data-v-5278bb16]{padding:0 %?30?%}.xingxing[data-v-5278bb16]{padding-left:%?10?%;display:inline-block;line-height:%?40?%;font-weight:700;font-size:%?40?%;color:#f44}',""])},"5e58":function(t,i,a){"use strict";var e=a("073b"),s=a.n(e);s.a},"671b":function(t,i,a){"use strict";var e,s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"addGoods"},[a("v-uni-view",{staticStyle:{overflow:"auto","padding-bottom":"200upx"}},[a("v-uni-view",{staticClass:"b-f1"},[a("v-uni-view",{staticClass:"f-l"},[a("v-uni-text",{staticClass:"keys"},[t._v("商品名称")]),a("v-uni-text",{staticClass:"xingxing"},[t._v("*")])],1),a("v-uni-view",{staticClass:"f-r"},[a("v-uni-input",{staticClass:"uni-input",staticStyle:{direction:"rtl"},attrs:{placeholder:"清输入商品名称"},model:{value:t.form.name,callback:function(i){t.$set(t.form,"name",i)},expression:"form.name"}})],1)],1),a("v-uni-view",{staticClass:"b-f1"},[a("v-uni-view",{staticClass:"f-l"},[a("v-uni-text",{staticClass:"keys"},[t._v("商品分类")]),a("v-uni-text",{staticClass:"xingxing"},[t._v("*")])],1),a("v-uni-view",{staticClass:"f-r"},[a("v-uni-picker",{attrs:{value:t.index,range:t.array},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.bindPickerChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-input t-r f-34",staticStyle:{color:"#999999"}},[t._v(t._s(t.form.cateid))])],1)],1)],1),a("v-uni-view",{staticClass:"b-f1"},[a("v-uni-view",{staticClass:"f-l"},[a("v-uni-text",{staticClass:"keys"},[t._v("价格")]),a("v-uni-text",{staticClass:"xingxing"},[t._v("*")])],1),a("v-uni-view",{staticClass:"f-r"},[a("v-uni-input",{staticClass:"uni-input",staticStyle:{direction:"rtl"},attrs:{placeholder:"清输入销售价格"},model:{value:t.form.price,callback:function(i){t.$set(t.form,"price",i)},expression:"form.price"}})],1)],1),a("v-uni-view",{staticClass:"b-f1"},[a("v-uni-view",{staticClass:"f-l"},[a("v-uni-text",{staticClass:"keys"},[t._v("原价")]),a("v-uni-text",{staticClass:"xingxing"},[t._v("*")])],1),a("v-uni-view",{staticClass:"f-r"},[a("v-uni-input",{staticClass:"uni-input",staticStyle:{direction:"rtl"},attrs:{type:"number",placeholder:"请输入商品原价"},model:{value:t.form.oldprice,callback:function(i){t.$set(t.form,"oldprice",i)},expression:"form.oldprice"}})],1)],1),a("v-uni-view",{staticClass:"b-f1"},[a("v-uni-view",{staticClass:"f-l"},[a("v-uni-text",{staticClass:"keys"},[t._v("额外配送费")]),a("v-uni-text",{staticClass:"xingxing"},[t._v("*")])],1),a("v-uni-view",{staticClass:"f-r"},[a("v-uni-input",{staticClass:"uni-input",staticStyle:{direction:"rtl"},attrs:{placeholder:"请输入配送价格",type:"number"},model:{value:t.form.deliveryprice,callback:function(i){t.$set(t.form,"deliveryprice",i)},expression:"form.deliveryprice"}})],1)],1),a("v-uni-view",{staticClass:"uploadView diy-nav-list border-line b-f1"},[a("v-uni-view",{staticClass:"f-l",staticStyle:{"line-height":"150upx"}},[a("v-uni-text",{staticClass:"keys"},[t._v("缩略图")])],1),a("v-uni-view",{staticClass:"verMid uploadButton f-r"},[""!=t.form.thumb?a("v-uni-view",{staticClass:"imgPreview",staticStyle:{position:"relative",display:"inline-block"}},[a("v-uni-image",{attrs:{src:t.form.thumb}}),a("v-uni-image",{staticClass:"close",staticStyle:{width:"30upx",height:"30upx"},attrs:{src:t.imgfixUrls+"merchant/close.png"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.closeImg(1)}}})],1):a("v-uni-view",{staticClass:"userImgUpdata",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.updataImg(1)}}},[a("v-uni-image",{attrs:{src:t.imgfixUrls+"merchant/addImg.svg"}})],1)],1)],1),a("v-uni-view",{staticClass:"uploadView b-f1"},[a("v-uni-view",{staticClass:"f-l",staticStyle:{"line-height":"150upx"}},[a("v-uni-text",{staticClass:"keys"},[t._v("轮播图")])],1),a("v-uni-view",{staticClass:"verMid uploadButton f-r dis-flex swiperBox",staticStyle:{"flex-wrap":"wrap","justify-content":"space-between"}},[t._l(t.form.thumbs,function(i,e){return[t.form.thumbs!==[]?a("v-uni-view",{staticClass:"imgPreview verMid",staticStyle:{position:"relative"}},[a("v-uni-image",{attrs:{src:i}}),a("v-uni-image",{staticClass:"close",staticStyle:{width:"30upx",height:"30upx"},attrs:{src:t.imgfixUrls+"merchant/close.png"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.closeImg(2,e)}}})],1):t._e()]}),t.form.thumbs.length<6?a("v-uni-view",{staticClass:"userImgUpdata verMid",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.updataImg(2)}}},[a("v-uni-image",{attrs:{src:t.imgfixUrls+"merchant/addImg.svg"}})],1):t._e()],2)],1),a("v-uni-view",{staticClass:"b-f1"},[a("v-uni-view",{staticClass:"f-l"},[a("v-uni-text",{staticClass:"keys"},[t._v("状态")]),a("v-uni-text",{staticClass:"xingxing"},[t._v("*")])],1),a("v-uni-view",{staticClass:"f-r"},[a("v-uni-picker",{attrs:{value:t.indexis,range:t.arrays},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.shangjia.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-input t-r f-34",staticStyle:{color:"#999999"}},[t._v(t._s(t.status))])],1)],1)],1),a("v-uni-view",{staticClass:"b-f1"},[a("v-uni-view",{staticClass:"f-l"},[a("v-uni-text",{staticClass:"keys"},[t._v("商品规格")])],1),a("v-uni-view",{staticClass:"f-r t-r",staticStyle:{"font-size":"28upx",color:"#999999"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openguige.apply(void 0,arguments)}}},[t._v("规格"),a("v-uni-text",{staticClass:"iconfont icon-right",staticStyle:{"font-size":"28upx"}})],1)],1),a("v-uni-view",{staticStyle:{position:"fixed",left:"0",bottom:"0",width:"92%",padding:"30upx"}},[a("v-uni-button",{attrs:{type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.addGoods.apply(void 0,arguments)}}},[t._v("确认"+t._s(t.addgood))])],1)],1),t.show?a("v-uni-view",{staticClass:"popfixed"},[a("v-uni-view",{staticClass:"f-w",staticStyle:{"padding-bottom":"50upx"}},[t._v("商品规格"),a("v-uni-text",{staticClass:"dis-il-block iconfont icon-close",staticStyle:{float:"right",padding:"0upx 20upx 20upx"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.closePop.apply(void 0,arguments)}}})],1),t._l(t.form.optionArray,function(i,e){return a("v-uni-view",{key:e,staticStyle:{border:"1px solid #f8f8f8","border-radius":"15upx",padding:"20upx","background-color":"#FFFFFF","margin-bottom":"30upx"}},[a("v-uni-view",{staticClass:"dis-flex",staticStyle:{"padding-bottom":"10upx","border-bottom":"1px solid #f1f1f1"}},[a("v-uni-view",{staticClass:"flex-box",staticStyle:{"font-size":"30upx"}},[t._v("商品名称")]),a("v-uni-view",{staticClass:"flex-box t-r",staticStyle:{"font-size":"30upx",color:"#999999"}},[t._v(t._s(i.name))])],1),a("v-uni-view",{staticClass:"dis-flex",staticStyle:{"padding-bottom":"10upx","padding-top":"10upx","border-bottom":"1px solid #f1f1f1"}},[a("v-uni-view",{staticClass:"flex-box",staticStyle:{"font-size":"30upx"}},[t._v("商品价格")]),a("v-uni-view",{staticClass:"flex-box t-r",staticStyle:{"font-size":"30upx",color:"#999999"}},[t._v("￥"+t._s(i.price))])],1),a("v-uni-view",{staticClass:"dis-flex",staticStyle:{"padding-top":"10upx"}},[a("v-uni-view",{staticClass:"flex-box",staticStyle:{"font-size":"30upx"}},[t._v("商品原价")]),a("v-uni-view",{staticClass:"flex-box t-r",staticStyle:{"font-size":"30upx",color:"#999999"}},[t._v("￥"+t._s(i.oldprice))])],1)],1)}),0==t.form.optionArray.length?a("v-uni-view",{staticClass:"f-40 t-c",staticStyle:{color:"#999999"}},[t._v("暂无规格数据,请点击按钮进行添加~")]):t._e(),a("v-uni-view",{staticStyle:{height:"160upx",width:"100%"}}),a("v-uni-view",{staticStyle:{position:"fixed",left:"0",bottom:"0","z-index":"98",width:"92%",padding:"30upx"}},[a("v-uni-button",{attrs:{type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.addSpecification.apply(void 0,arguments)}}},[t._v("添加规格")])],1)],2):t._e(),a("popup-view",{attrs:{show:t.shows,type:"center",bottom:"0%"},on:{clickmask:function(i){arguments[0]=i=t.$handleEvent(i),t.onShows.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"b-f",staticStyle:{padding:"30upx",width:"70vw","border-radius":"15upx"}},[a("v-uni-view",{staticClass:"f-w f-34",staticStyle:{padding:"30upx 0"}},[t._v("规格添加"),a("v-uni-text",{staticClass:"dis-il-block iconfont icon-close",staticStyle:{float:"right",padding:"0upx 20upx 20upx"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onShows.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"dis-flex f-30",staticStyle:{"padding-bottom":"20upx"}},[a("v-uni-view",{staticStyle:{flex:"0.3"}},[t._v("规格名称")]),a("v-uni-view",{staticStyle:{flex:"0.7"}},[a("v-uni-input",{staticClass:"uni-input",staticStyle:{direction:"rtl"},attrs:{placeholder:"请输入规格名称"},model:{value:t.addSpecifications.name,callback:function(i){t.$set(t.addSpecifications,"name",i)},expression:"addSpecifications.name"}})],1)],1),a("v-uni-view",{staticClass:"dis-flex f-30",staticStyle:{"padding-bottom":"20upx"}},[a("v-uni-view",{staticStyle:{flex:"0.3"}},[t._v("价格")]),a("v-uni-view",{staticStyle:{flex:"0.7"}},[a("v-uni-input",{staticClass:"uni-input",staticStyle:{direction:"rtl"},attrs:{placeholder:"请输入销售价格"},model:{value:t.addSpecifications.price,callback:function(i){t.$set(t.addSpecifications,"price",i)},expression:"addSpecifications.price"}})],1)],1),a("v-uni-view",{staticClass:"dis-flex f-30",staticStyle:{"padding-bottom":"50upx"}},[a("v-uni-view",{staticStyle:{flex:"0.3"}},[t._v("原价")]),a("v-uni-view",{staticStyle:{flex:"0.7"}},[a("v-uni-input",{staticClass:"uni-input",staticStyle:{direction:"rtl"},attrs:{placeholder:"请输入规格原价"},model:{value:t.addSpecifications.oldprice,callback:function(i){t.$set(t.addSpecifications,"oldprice",i)},expression:"addSpecifications.oldprice"}})],1)],1),a("v-uni-view",{},[a("v-uni-button",{attrs:{type:"warn"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.confirmAdd.apply(void 0,arguments)}}},[t._v("确 定")])],1)],1)],1)],1)},n=[];a.d(i,"b",function(){return s}),a.d(i,"c",function(){return n}),a.d(i,"a",function(){return e})},"6e0d":function(t,i,a){"use strict";a.r(i);var e=a("671b"),s=a("2c82");for(var n in s)"default"!==n&&function(t){a.d(i,t,function(){return s[t]})}(n);a("88e5");var o,c=a("f0c5"),l=Object(c["a"])(s["default"],e["b"],e["c"],!1,null,"5278bb16",null,!1,e["a"],o);i["default"]=l.exports},"7dec":function(t,i,a){i=t.exports=a("2350")(!1),i.push([t.i,".pop[data-v-3a0b2864]{visibility:hidden}.pop--show[data-v-3a0b2864]{visibility:visible}.pop__mask[data-v-3a0b2864]{position:fixed;top:0;left:0;right:0;bottom:0;z-index:998;background:rgba(0,0,0,.5);display:none}.pop__mask--hide[data-v-3a0b2864]{background:0 0}.pop__container[data-v-3a0b2864]{position:fixed;left:50%;top:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0);-webkit-transform-origin:center;transform-origin:center;-webkit-transition:all .3s ease;transition:all .3s ease;z-index:999;opacity:0}.pop--show .pop__container[data-v-3a0b2864]{opacity:1}.pop--show .pop__mask[data-v-3a0b2864]{display:block}.pop--left .pop__container[data-v-3a0b2864]{left:0;top:50%;-webkit-transform:translate3d(-100%,-50%,0);transform:translate3d(-100%,-50%,0)}.pop--show.pop--left .pop__container[data-v-3a0b2864]{-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}.pop--right .pop__container[data-v-3a0b2864]{right:0;top:50%;left:auto;-webkit-transform:translate3d(100%,-50%,0);transform:translate3d(100%,-50%,0)}.pop--show.pop--right .pop__container[data-v-3a0b2864]{-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}.pop--bottom .pop__container[data-v-3a0b2864]{top:auto;left:50%;bottom:0;-webkit-transform:translate3d(-50%,100%,0);transform:translate3d(-50%,100%,0)}.pop--show.pop--bottom .pop__container[data-v-3a0b2864]{-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0)}.pop--top .pop__container[data-v-3a0b2864]{top:0;left:50%;-webkit-transform:translate3d(-50%,-100%,0);transform:translate3d(-50%,-100%,0)}.pop--show.pop--top .pop__container[data-v-3a0b2864]{-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0)}",""])},"88e5":function(t,i,a){"use strict";var e=a("ae6c"),s=a.n(e);s.a},9052:function(t,i,a){"use strict";var e,s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"page"},[a("v-uni-view",{staticClass:"pop",class:["pop--"+t.type,{"pop--show":t.show}]},[t.overlay?a("v-uni-view",{staticClass:"pop__mask",class:{"pop__mask--hide":!t.showOverlay},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleMaskClick.apply(void 0,arguments)}}}):t._e(),a("v-uni-view",{staticClass:"pop__container",style:{bottom:t.bottom}},[t._t("default")],2)],1)],1)},n=[];a.d(i,"b",function(){return s}),a.d(i,"c",function(){return n}),a.d(i,"a",function(){return e})},"9b40":function(t,i,a){"use strict";var e=a("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=e(a("db0c"));a("ac6a");var n=e(a("f499"));a("c5f6");var o=e(a("a745")),c=e(a("9401")),l=e(a("80bf")),r=e(a("f7c1")),d={components:{PopupView:r.default},data:function(){return{arrays:["上架","下架"],status:"上架",form:{name:"",cateid:"",price:"",oldprice:"",deliveryprice:"",thumb:"",thumbs:[],optionArray:[]},shows:!1,array:[],index:0,show:!1,addSpecifications:{name:"",price:"",oldprice:""},storeid:"",id:"",indexis:0,addgood:"添加"}},onLoad:function(t){var i=this;i.id=t.id,i.id&&(this.addgood="修改"),uni.getStorage({key:"checkStoreid",success:function(t){i.storeid=t.data,i.getform()}})},methods:{getform:function(){var t=this;l.default._post_form("&p=citydelivery&do=createGoodsPage&storeid=".concat(this.storeid,"&id=").concat(this.id),{},function(i){(0,o.default)(i.data.goods)?(t.array=[],t.cateList=i.data.catelist,t.cateList.map(function(i){t.array.push(i.name)}),t.form.cateid=t.array[t.index],console.log(222)):(console.log(11111),t.form=i.data.goods,t.form.optionArray=[],console.log(t.form),t.cateList=i.data.catelist,t.cateList.map(function(i){t.array.push(i.name)}),Number(t.form.cateid)?t.cateList.map(function(i){i.id==t.form.cateid&&(t.form.cateid=i.name)}):t.form.cateid=t.array[t.index],t.form.thumbs||(t.form.thumbs=[]))})},addGoods:function(){var t=this;if(console.log(this.form),this.form.name)if(this.form.cateid)if(this.form.price)if(this.form.oldprice)if(this.form.deliveryprice){var i=this.form;i.storeid=this.storeid;var a=(0,n.default)(i.optionArray),e=new this.$util.Base64,s=e.encode(a);i.optionArray=s,this.cateList.map(function(t){t.name==i.cateid&&(i.cateid=t.id)}),"上架"==this.status?i.status="2":i.status="4",console.log(i),l.default._post_form("&p=citydelivery&do=saveDeliveryGoods",i,function(i){console.log(i),uni.showToast({title:"".concat(t.addgood,"成功")}),uni.navigateBack()})}else uni.showToast({title:"配送价格不能为空",icon:"none"});else uni.showToast({title:"商品原价不能为空",icon:"none"});else uni.showToast({title:"商品价格不能为空",icon:"none"});else uni.showToast({title:"商品分类不能为空",icon:"none"});else uni.showToast({title:"商品名称不能为空",icon:"none"})},confirmAdd:function(){var t=!0;(0,s.default)(this.addSpecifications).forEach(function(i){i||(uni.showToast({title:"请填写完整规格数据",icon:"none"}),t=!1)}),t&&(this.form.optionArray=[],console.log((0,s.default)(this.addSpecifications)),this.form.optionArray.push(this.addSpecifications),this.addSpecifications={name:"",price:"",oldprice:""},this.shows=!this.shows,uni.showToast({title:"添加成功"}))},onShows:function(){this.shows=!this.shows},addSpecification:function(){this.shows=!this.shows},closePop:function(){this.show=!this.show},openguige:function(){this.show=!this.show},bindPickerChange:function(t){this.index=t.target.value,this.form.cateid=this.array[this.index]},shangjia:function(t){this.indexis=t.target.value,this.status=this.arrays[this.indexis]},closeImg:function(t,i){var a=this;if(1==t)a.form.thumb="";else if(2==t)for(var e=0;e<a.form.thumbs.length;e++)e==i&&a.form.thumbs.splice(e,1)},updataImg:function(t){var i=this;c.default.choseImage(function(a){c.default.uoloadIg(a.localIds[0],function(a){if("uploadImage:ok"===a.errMsg){uni.showLoading({});var e={upload_type:2,id:a.serverId};l.default._post_form("&do=uploadFiles",e,function(a){0===a.errno&&(1==t&&(i.form.thumb=a.data.img),2==t&&i.form.thumbs.push(a.data.img))},!1,function(){uni.hideLoading()})}else uni.hideLoading(),l.default.showError("上传失败")})})}}};i.default=d},a9d6:function(t,i,a){"use strict";a.r(i);var e=a("b6fe"),s=a.n(e);for(var n in e)"default"!==n&&function(t){a.d(i,t,function(){return e[t]})}(n);i["default"]=s.a},ae6c:function(t,i,a){var e=a("3ae4");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=a("4f06").default;s("373adf50",e,!0,{sourceMap:!1,shadowMode:!1})},b6fe:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={data:function(){return{}},props:{show:{type:Boolean,default:!1},overlay:{default:!0},showOverlay:{default:!0},type:{type:String,default:"center"},bottom:{type:String,default:""},modelData:{type:Object,default:function(){}}},components:{},computed:{},mounted:function(){},methods:{handleMaskClick:function(){this.$emit("clickmask")}}};i.default=e},f7c1:function(t,i,a){"use strict";a.r(i);var e=a("9052"),s=a("a9d6");for(var n in s)"default"!==n&&function(t){a.d(i,t,function(){return s[t]})}(n);a("5e58");var o,c=a("f0c5"),l=Object(c["a"])(s["default"],e["b"],e["c"],!1,null,"3a0b2864",null,!1,e["a"],o);i["default"]=l.exports}}]);