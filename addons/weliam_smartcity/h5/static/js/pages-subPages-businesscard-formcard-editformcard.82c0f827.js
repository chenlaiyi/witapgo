(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-subPages-businesscard-formcard-editformcard"],{"3e77":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[t.loadlogo?t._e():a("loadlogo"),t.loadlogo?[a("far-bottom"),a("v-uni-view",{staticClass:"header p-r"},[a("v-uni-view",{staticClass:"iconfont icon-info col-f4 header-Icon"}),a("v-uni-view",{staticClass:"header-title col-9 f-24"},[t._v("完善个人名片的而用户，更容易获得商业人脉，并得到平台名片榜单推荐")])],1),a("v-uni-view",{staticClass:"formData-box"},[a("v-uni-form",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.sbformData.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"userData-box bor-radius-10upx b-f"},[a("v-uni-view",{staticClass:"user-avatar",style:{"background-image":"url("+t.avatarLogo+")"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upImages.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"user-name-inputBox"},[a("v-uni-view",{staticClass:"f-28 col-3 t-c m-btm20"},[t._v("真实姓名")]),a("v-uni-input",{staticClass:"user-name-input f-28 col-9",attrs:{type:"text",value:t.cardinfo.name,name:"name",placeholder:"请填写姓名"}})],1),a("v-uni-view",{staticClass:"user-contact-inputBox dis-flex flex-y-center"},[a("v-uni-view",{staticClass:"user-contact-item flex-box"},[a("v-uni-view",{staticClass:"user-contact-phone f-24 col-3 t-c m-btm20"},[t._v("手机号")]),a("v-uni-input",{staticClass:"user-contact-input f-28 col-9",attrs:{type:"number",value:t.cardinfo.mobile,name:"mobile",placeholder:"请填写电话"}})],1),a("v-uni-view",{staticClass:"user-contact-item flex-box"},[a("v-uni-view",{staticClass:"user-contact-wx f-24 col-3 t-c m-btm20"},[t._v("微信号")]),a("v-uni-input",{staticClass:"user-contact-input f-28 col-9",attrs:{type:"text",value:t.cardinfo.wechat,name:"wechat",placeholder:"请填写微信号"}})],1)],1)],1),a("v-uni-view",{staticClass:"enter-title padding-box-all f-24 col-9"},[t._v("企业信息")]),a("v-uni-view",{staticClass:"enterData-box bor-radius-10upx b-f"},[a("v-uni-view",{staticClass:"enterData-content"},[a("v-uni-view",{staticClass:"enterData-input-box dis-flex flex-y-center border-line border-bottom"},[a("v-uni-view",{staticClass:"f-28 m-right70"},[t._v("公司")]),a("v-uni-input",{staticClass:"user-contact-input f-28 col-9",attrs:{type:"text",value:t.cardinfo.company,name:"company",placeholder:"请填写公司"}})],1),a("v-uni-view",{staticClass:"enterData-input-box dis-flex flex-y-center border-line border-bottom"},[a("v-uni-view",{staticClass:"f-28 m-right70"},[t._v("部门")]),a("v-uni-input",{staticClass:"user-contact-input f-28 col-9",attrs:{type:"text",value:t.cardinfo.branch,name:"branch",placeholder:"请填写部门"}})],1),a("v-uni-view",{staticClass:"enterData-input-box dis-flex flex-y-center border-line border-bottom"},[a("v-uni-view",{staticClass:"f-28 m-right70"},[t._v("职位")]),a("v-uni-input",{staticClass:"user-contact-input f-28 col-9",attrs:{type:"text",value:t.cardinfo.position,name:"position",placeholder:"请填写职位"}})],1),a("v-uni-view",{staticClass:"enterData-input-box enterData-textarea border-line border-bottom"},[a("v-uni-textarea",{staticClass:"f-28 col-9",attrs:{value:t.cardinfo.desc,placeholder:"",name:"desc",placeholder:"请填写一句话介绍负责业务"}})],1),a("v-uni-view",{staticClass:"enterData-input-box dis-flex flex-y-center border-line border-bottom p-r"},[a("v-uni-view",{staticClass:"f-28 m-right70"},[t._v("省市")]),a("v-uni-view",{},[a("v-uni-view",{staticClass:"uni-input",staticStyle:{"font-size":"24upx","line-height":"80upx",display:"inline-block",height:"80upx","vertical-align":"middle"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.visble.apply(void 0,arguments)}}},[t._v(t._s(t.citytext))]),a("w-pickerb",{ref:"region",attrs:{visible:t.visiblec,mode:"region",value:[t.userAddress.provinceid,t.userAddress.cityid,t.userAddress.countyid],"default-type":"value","hide-area":!1},on:{"update:visible":function(e){arguments[0]=e=t.$handleEvent(e),t.visiblec=e},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirm(e,"region")},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.onCancel.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"enterData-input-box dis-flex flex-y-center border-line border-bottom p-r"},[a("v-uni-view",{staticClass:"f-28 m-right70"},[t._v("地址")]),a("v-uni-input",{staticClass:"user-contact-input f-28 col-9",attrs:{type:"text",value:t.address,name:"address",placeholder:"请输入详细地址"}}),a("v-uni-view",{staticClass:"location dis-flex flex-y-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getLocation.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"locationIconClass iconfont icon-location col-f4 m-right10"}),a("v-uni-view",{staticClass:"f-24 col-f4"},[t._v("定位")])],1)],1),a("v-uni-picker",{staticClass:"dataPicker",attrs:{mode:"multiSelector",range:t.catesList,"range-key":"name",value:t.typeIndex},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.checkType.apply(void 0,arguments)},columnchange:function(e){arguments[0]=e=t.$handleEvent(e),t.changeKey.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"enterData-input-box dis-flex flex-y-center p-r"},[a("v-uni-view",{staticClass:"dis-flex flex-y-center "},[a("v-uni-view",{staticClass:"f-28 m-right70"},[t._v("行业")]),a("v-uni-view",{staticClass:"f-28 col-3"},[t._v(t._s(t.onelevelName)+" "+t._s(t.twolevelName))])],1),a("v-uni-view",{staticClass:"iconfont icon-right rightIconClass col-9"})],1)],1)],1)],1),a("v-uni-view",{staticClass:"enter-title padding-box-all f-24 col-9"},[t._v("隐私设置")]),a("v-uni-view",{staticClass:"enterData-box bor-radius-10upx b-f"},[a("v-uni-view",{staticClass:"enterData-content"},[a("v-uni-view",{staticClass:"enterData-input-box dis-flex flex-y-center flex-x-between border-line border-bottom"},[a("v-uni-view",{staticClass:"f-28 m-right70"},[t._v("公开手机号")]),a("v-uni-view",{staticClass:"dis-flex flex-y-center"},[a("v-uni-view",{staticClass:"col-9 f-24 m-right30"},[t._v("在名片中显示手机号")]),a("v-uni-switch",{staticClass:"switchStyle",attrs:{name:"show_mobile",checked:"1"===t.cardinfo.show_mobile,color:"#FF4444"}})],1)],1),a("v-uni-view",{staticClass:"enterData-input-box dis-flex flex-y-center flex-x-between border-line border-bottom"},[a("v-uni-view",{staticClass:"f-28 m-right70"},[t._v("公开微信号")]),a("v-uni-view",{staticClass:"dis-flex flex-y-center"},[a("v-uni-view",{staticClass:"col-9 f-24 m-right30"},[t._v("在名片中显示微信号")]),a("v-uni-switch",{staticClass:"switchStyle",attrs:{name:"show_wechat",checked:"1"===t.cardinfo.show_wechat,color:"#FF4444"}})],1)],1),a("v-uni-view",{staticClass:"enterData-input-box dis-flex flex-y-center flex-x-between border-line border-bottom"},[a("v-uni-view",{staticClass:"f-28 m-right70"},[t._v("公开位置信息")]),a("v-uni-view",{staticClass:"dis-flex flex-y-center"},[a("v-uni-view",{staticClass:"col-9 f-24 m-right30"},[t._v("在您的名片中公开显示")]),a("v-uni-switch",{staticClass:"switchStyle",attrs:{name:"show_addr",checked:"1"===t.cardinfo.show_addr,color:"#FF4444"}})],1)],1)],1)],1),a("v-uni-button",{staticClass:"submit-btn f-28 t-c col-f",attrs:{"form-type":"submit"}},[t._v("保存")])],1)],1)]:t._e(),a("PopManager",{attrs:{show:t.isOpenLaction,type:"bottom",overlay:"false",showOverlay:"false"}},[t.latlngs?a("v-uni-view",{staticClass:"iframe-wid-hgt",style:{height:t.phoneHeight}},[a("iframe",{attrs:{id:"mapPage",width:"100%",height:"100%",frameborder:"0",src:"https://apis.map.qq.com/tools/locpicker?search=1&type=1&key=KIQBZ-6OT3G-AOMQD-IHW6J-PEUDV-VCFAF&referer=myapp&coord="+t.latlngs.latitude+","+t.latlngs.longitude}})]):t._e(),t.latlngs?t._e():a("v-uni-view",{staticClass:"iframe-wid-hgt",style:{height:t.phoneHeight}},[a("iframe",{attrs:{id:"mapPage",width:"100%",height:"100%",frameborder:"0",src:"https://apis.map.qq.com/tools/locpicker?search=1&type=1&key=KIQBZ-6OT3G-AOMQD-IHW6J-PEUDV-VCFAF&referer=myapp"}})])],1)],2)},s=[]},5548:function(t,e,a){var i=a("f773");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("6ad742fc",i,!0,{sourceMap:!1,shadowMode:!1})},7547:function(t,e,a){"use strict";a.r(e);var i=a("a315"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"7c29":function(t,e,a){"use strict";var i=a("5548"),n=a.n(i);n.a},a315:function(t,e,a){"use strict";var i=a("4ea4");a("99af"),a("d81d"),a("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("5530")),s=i(a("ade3")),o=i(a("2c7c")),r=i(a("c2a2")),c=i(a("ec93")),l=i(a("8f6e")),d=i(a("43ce")),u=i(a("fbf7")),v=a("7bb8"),f={data:function(){var t;return t={visiblec:!1,loadlogo:!1,phoneHeight:null,isOpenLaction:!1,meals:[],catesList:[],typeIndex:[0,0],onelevel:"",twolevel:"",onelevelName:"",twolevelName:"",lat:"",lng:"",address:"",cardinfo:{},cardid:null,avatarLogo:""},(0,s.default)(t,"isOpenLaction",!1),(0,s.default)(t,"userAddress",{id:"",name:"",tel:"",detailed_address:"",provinceidName:"",provinceid:"",areaidName:"",countyid:"",cityid:"",distidName:"",status:0,lat:"",lng:""}),(0,s.default)(t,"counts",!0),(0,s.default)(t,"citytext","请选择省市区"),(0,s.default)(t,"owenscitylist",[]),(0,s.default)(t,"latlngs",{}),t},components:{Loadlogo:r.default,PopManager:l.default,checkCity:d.default,wPickerb:u.default},onLoad:function(t){var e=this;e.latlngs=uni.getStorageSync("curLoction"),e.owenscitylist=uni.getStorageSync("cityList"),e.cardid=t.id,e.getCardPage(t.id),e.locationListener()},methods:{onConfirm:function(t){console.log(t),this.userAddress.provinceid=t.obj.province.value,this.userAddress.cityid=t.obj.city.value,this.userAddress.countyid=t.obj.area.value,this.citytext=t.result},visble:function(){this.visiblec=!0},returnData:function(t){var e=this;e.userAddress=(0,n.default)((0,n.default)({},e.userAddress),t),console.log(e.userAddress)},galadata:function(t){var e=this;e.userAddress.areaidName=t.areaidName,e.userAddress.distidName=t.distidName,e.userAddress.provinceidName=t.provinceidName},getCardPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,e=this;o.default._post_form("&p=citycard&do=createCityCardPage",{id:t},(function(t){if(0===t.errno){var a=t.data.cates;if(a){for(var i=[],s=[],o=0;o<a.length;o++)i.push(a[o]);for(var r=0;r<a[0]["childrens"]["length"];r++)s.push(a[0]["childrens"][r]);e.catesList.push(i),e.catesList.push(s)}var c={lat:t.data.cardinfo.lat,lng:t.data.cardinfo.lng};console.log(c),e.getloctions(c),setTimeout((function(){e.userAddress=(0,n.default)((0,n.default)({},e.userAddress),t.data.cardinfo)})),e.setData(t.data),e.setData({onelevel:t.data.cardinfo.one_class,twolevel:t.data.cardinfo.two_class,onelevelName:t.data.cardinfo.onecatename,twolevelName:t.data.cardinfo.twocatename,address:t.data.cardinfo.address,lat:t.data.cardinfo.lat,lng:t.data.cardinfo.lng,avatarLogo:t.data.cardinfo.logo})}}),!1,(function(){e.loadlogo=!0}))},getLocation:function(){var t=this;t.isOpenLaction=!0},locationListener:function(){var t=this,e=1;uni.getSystemInfo({success:function(e){t.setData({phoneHeight:e.windowHeight+"px"})}}),window.addEventListener("message",(function(a){var i,n=a.data;if(!(e>1||t.counts))return!1;n&&"locationPicker"==n.module&&(console.log("location",n,e),t.address=n.poiaddress,t.lat=n.latlng.lat,t.lng=n.latlng.lng,t.isOpenLaction=!1,i={lat:n.latlng.lat,lng:n.latlng.lng},t.getloctions(i)),e++,t.counts=!1}),!1)},getloctions:function(t){var e=this;o.default._post_form("&p=member&do=lng2areaid&lng=".concat(t.lng,"&lat=").concat(t.lat),{},(function(a){return e.userAddress.lat=t.lat,e.userAddress.lng=t.lng,e.userAddress.provinceid=a.data.provinceid,e.userAddress.countyid=a.data.countyid,e.userAddress.cityid=a.data.cityid,e.userAddress.areaidName="",e.userAddress.provinceidName="",e.userAddress.distidName="",console.log(e.userAddress),e.owenscitylist.map((function(t,a){t.id==e.userAddress.provinceid&&(e.citytext=t.name,e.userAddress.provinceidName=t.name,t.area.map((function(t){t.id==e.userAddress.cityid&&(e.citytext="".concat(e.citytext).concat(t.name),e.userAddress.areaidName=t.name,console.log(e.citytext,t.name),t.dist.map((function(t){t.id==e.userAddress.countyid&&(e.citytext="".concat(e.citytext).concat(t.name),e.userAddress.distidName=t.name)})))})))})),!1}))},radioChange:function(t){},sbformData:function(t){var e=this,a=t.detail.value;a=(0,n.default)((0,n.default)({},a),{},{show_addr:a.show_addr?"1":"0",show_mobile:a.show_mobile?"1":"0",show_wechat:a.show_wechat?"1":"0",lat:e.lat,lng:e.lng,one_class:e.onelevel,two_class:e.twolevel,id:e.cardid,logo:e.avatarLogo});var i=[{name:"name",checkType:"string",checkRule:"1,4",errorMsg:"姓名应为1-4个字符"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确手机号"},{name:"wechat",checkType:"notnull",errorMsg:"请输入微信号"},{name:"company",checkType:"notnull",errorMsg:"公司名字不能为空"},{name:"branch",checkType:"notnull",errorMsg:"部门内容不能为空"},{name:"position",checkType:"notnull",errorMsg:"职位内容不能为空"},{name:"desc",checkType:"notnull",errorMsg:"简介内容不能为空"},{name:"address",checkType:"notnull",errorMsg:"请输入地址或直接定位"},{name:"one_class",checkType:"notnull",errorMsg:"行业内容不能为空"}],s=v.check(a,i);s?(uni.showLoading(),a.provinceid=e.userAddress.provinceid,a.cityid=e.userAddress.cityid,a.countyid=e.userAddress.countyid,o.default._post_form("&p=citycard&do=createCityCardApi",a,(function(t){if(0===t.errno){var e=t.data;0===e.paystatus&&o.default.showSuccess("修改成功",(function(){uni.navigateBack({delta:1})}))}}),!1,(function(){uni.hideLoading()}))):uni.showToast({title:v.error,icon:"none"})},checkType:function(t){var e=this,a=e.catesList;a[0][t.target.value[0]]&&(e.onelevelName=a[0][t.target.value[0]].name,e.onelevel=a[0][t.target.value[0]].id),a[1][t.target.value[1]]&&(e.twolevelName=a[1][t.target.value[1]].name,e.twolevel=a[1][t.target.value[1]].id)},changeKey:function(t){for(var e=this,a=[],i=0;i<e.catesList.length;i++)for(var n=0;n<e.catesList[i]["length"];n++)if(t.target.value==n&&0==t.target.column&&e.catesList[i][n]["childrens"]){for(var s=0;s<e.catesList[i][n]["childrens"]["length"];s++)a.push(e.catesList[i][n]["childrens"][s]);e.catesList.splice(1,2,a)}},uploadImageFiles:function(t){var e=this;o.default._post_form("&do=uploadFiles",t,(function(t){0===t.errno&&e.setData({avatarLogo:t.data.img})}),!1,(function(){uni.hideLoading()}))},upImages:function(){var t=this;c.default.choseImage((function(e){c.default.uoloadIg(e.localIds[0],(function(e){if("uploadImage:ok"===e.errMsg){uni.showLoading({});var a={upload_type:2,id:e.serverId};t.uploadImageFiles(a)}else o.default.showError("上传失败")}))}))}},computed:{userInfo:function(){return uni.getStorageSync("userinfo")}}};e.default=f},e633:function(t,e,a){"use strict";a.r(e);var i=a("3e77"),n=a("7547");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("7c29");var o,r=a("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"6a2f3243",null,!1,i["a"],o);e["default"]=c.exports},f773:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-6a2f3243]{background-color:#f8f8f8}.header-Icon[data-v-6a2f3243]{position:absolute;left:%?80?%;top:0;font-size:%?26?%}.header-title[data-v-6a2f3243]{width:%?505?%;text-align:center;margin:%?30?% auto %?100?%}.formData-box[data-v-6a2f3243]{padding:0 %?30?%}.userData-box .user-avatar[data-v-6a2f3243]{position:relative;width:%?140?%;height:%?140?%;background-size:%?140?% %?140?%;background-repeat:no-repeat;-webkit-border-radius:50%;border-radius:50%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:%?-60?%}.user-name-inputBox[data-v-6a2f3243]{padding-bottom:%?40?%;margin:0 %?30?%;border-bottom:1px solid #eee}.user-name-inputBox .user-name-input[data-v-6a2f3243]{margin:0 auto;width:%?200?%;text-align:center}.user-contact-inputBox[data-v-6a2f3243]{padding:%?30?% 0}.user-contact-inputBox .user-contact-input[data-v-6a2f3243]{margin:0 auto;width:%?180?%;text-align:center}.enterData-content[data-v-6a2f3243]{margin:0 %?30?%}.enterData-content .enterData-input-box[data-v-6a2f3243]{padding:%?30?% 0}.enterData-textarea uni-textarea[data-v-6a2f3243]{height:%?220?%}.location[data-v-6a2f3243]{position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.locationIconClass[data-v-6a2f3243]{font-size:%?32?%}.rightIconClass[data-v-6a2f3243]{font-size:%?24?%;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);right:0}.iframe-wid-hgt[data-v-6a2f3243]{width:100vw}.switchStyle[data-v-6a2f3243]{height:%?60?%}.switchStyle[data-v-6a2f3243] .uni-switch-input{width:%?82?%!important;height:%?40?%!important}.switchStyle[data-v-6a2f3243] .uni-switch-input::before{width:%?80?%!important;height:%?36?%!important}.switchStyle[data-v-6a2f3243] .uni-switch-input::after{width:%?40?%!important;height:%?36?%!important}.labeStyle:last-child .labeStyle-btm[data-v-6a2f3243]{margin-bottom:0}.submit-btn[data-v-6a2f3243]{background-color:#f44;margin:%?60?% 0;-webkit-border-radius:%?10?%;border-radius:%?10?%;height:%?80?%;line-height:%?80?%}body.?%PAGE?%[data-v-6a2f3243]{background-color:#f8f8f8}',""]),t.exports=e}}]);