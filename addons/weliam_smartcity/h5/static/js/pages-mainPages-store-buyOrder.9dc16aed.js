(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-store-buyOrder"],{"0980":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".pop[data-v-7008c164]{visibility:hidden}.pop--show[data-v-7008c164]{visibility:visible}.pop__mask[data-v-7008c164]{position:fixed;top:0;left:0;right:0;bottom:0;z-index:100;background:rgba(0,0,0,.5);display:none}.pop__mask--hide[data-v-7008c164]{background:0 0}.pop__container[data-v-7008c164]{position:fixed;left:50%;top:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0);-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease;z-index:200;opacity:0}.pop--show .pop__container[data-v-7008c164]{opacity:1}.pop--show .pop__mask[data-v-7008c164]{display:block}.pop--left .pop__container[data-v-7008c164]{left:0;top:50%;-webkit-transform:translate3d(-100%,-50%,0);transform:translate3d(-100%,-50%,0)}.pop--show.pop--left .pop__container[data-v-7008c164]{-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}.pop--right .pop__container[data-v-7008c164]{right:0;top:50%;left:auto;-webkit-transform:translate3d(100%,-50%,0);transform:translate3d(100%,-50%,0)}.pop--show.pop--right .pop__container[data-v-7008c164]{-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}.pop--bottom .pop__container[data-v-7008c164]{top:auto;left:50%;bottom:0;-webkit-transform:translate3d(-50%,100%,0);transform:translate3d(-50%,100%,0)}.pop--show.pop--bottom .pop__container[data-v-7008c164]{-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0)}.pop--top .pop__container[data-v-7008c164]{top:0;left:50%;-webkit-transform:translate3d(-50%,-100%,0);transform:translate3d(-50%,-100%,0)}.pop--show.pop--top .pop__container[data-v-7008c164]{-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0)}",""])},1204:function(t,e,i){"use strict";var n=i("4274"),o=i.n(n);o.a},1292:function(t,e,i){"use strict";i.r(e);var n=i("abb3"),o=i("a8c7");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("a21c");var s=i("2877"),c=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"513b65fc",null);e["default"]=c.exports},"3e02":function(t,e,i){"use strict";i.r(e);var n=i("d6ec8"),o=i("fbf7");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("a149");var s=i("2877"),c=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"8fcb8444",null);e["default"]=c.exports},4274:function(t,e,i){var n=i("0980");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("0e2a7240",n,!0,{sourceMap:!1,shadowMode:!1})},"55b0":function(t,e,i){var n=i("c6b8");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("d6678b88",n,!0,{sourceMap:!1,shadowMode:!1})},"67b6":function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c5f6");var o=n(i("bd86")),a=n(i("738b")),s=n(i("bf30")),c=n(i("3e02")),r=n(i("228a")),u={data:function(){var t;return t={sid:null,iScoupon:!1,buyData:{},loadlogo:!0,vipCouponPrice:"0.00",consumPrice:"",notconsumPrice:"",buyPrice:"0.00",type:""},(0,o.default)(t,"sid",""),(0,o.default)(t,"pack_id",""),(0,o.default)(t,"useInfo",{}),(0,o.default)(t,"shopShow",!1),(0,o.default)(t,"showType","bottom"),(0,o.default)(t,"phoneHight",0),(0,o.default)(t,"sid",""),(0,o.default)(t,"packids",[]),t},onLoad:function(t){var e=this;uni.getSystemInfo({success:function(t){e.phoneHight=t.windowHeight+"px"}}),t.type?(e.type=t.type,e.mid=t.mid,1==t.type&&(e.sid=t.sid,e.getUseInfo(function(){console.info(e.useInfo),1==e.useInfo.is_shop&&(e.shopShow=!0)}),uni.setNavigationBarTitle({title:"特权使用"})),2==t.type&&(e.sid=t.sid,e.getUseInfo(),uni.setNavigationBarTitle({title:"在线买单"})),3==t.type&&(e.pack_id=t.pack_id,e.getUseInfo(),uni.setNavigationBarTitle({title:"礼包使用"}))):(e.sid=t.sid,e.getPayOnlineInfo(t.sid))},components:{loading:c.default,PopManager:a.default},watch:{notconsumPrice:{handler:function(){var t=this;t.useInfo.discount=Number(t.useInfo.discount),t.consumPrice=Number(t.consumPrice),t.notconsumPrice=Number(t.notconsumPrice),t.buyPrice=Number(t.buyPrice),t.vipCouponPrice=Number(t.vipCouponPrice),t.buyPrice=r.default.subtractionFloat(t.consumPrice,t.notconsumPrice,100)*(t.useInfo.discount/10)+t.notconsumPrice,t.vipCouponPrice=r.default.subtractionFloat(t.consumPrice,t.buyPrice,100)}},iScoupon:{handler:function(){var t=this;t.notconsumPrice=""}},consumPrice:{handler:function(){var t=this;t.iScoupon?(t.useInfo.discount=Number(t.useInfo.discount),t.consumPrice=Number(t.consumPrice),t.notconsumPrice=Number(t.notconsumPrice),t.buyPrice=Number(t.buyPrice),t.vipCouponPrice=Number(t.vipCouponPrice),t.buyPrice=r.default.subtractionFloat(t.consumPrice,t.notconsumPrice,100)*(t.useInfo.discount/10)+t.notconsumPrice,t.vipCouponPrice=r.default.subtractionFloat(t.consumPrice,t.buyPrice,100)):(t.useInfo.discount=Number(t.useInfo.discount),t.consumPrice=Number(t.consumPrice),t.notconsumPrice=Number(t.notconsumPrice),t.buyPrice=Number(t.buyPrice),t.vipCouponPrice=Number(t.vipCouponPrice),t.buyPrice=t.consumPrice*(t.useInfo.discount/10),t.vipCouponPrice=r.default.subtractionFloat(t.consumPrice,t.buyPrice,100))}}},methods:{iScouponCheck:function(){var t=this;t.iScoupon=!t.iScoupon,t.iScoupon||(t.notconsumPrice="")},checkLb:function(t){var e=this;if(-1==e.packids.indexOf(t))e.packids.push(t);else for(var i=0;i<e.packids.length;i++)e.packids[i]==t&&e.packids.splice(i,1)},closeShopShow:function(t){var e=this;e.sid=t,e.shopShow=!1,e.getUseInfo()},getPayOnlineInfo:function(t){var e=this,i={sid:t};s.default._post_form("&p=halfcard&do=getPayOnlineInfo",i,function(t){e.useInfo=t.data,e.loadlogo=!1},function(t){e.loadlogo=!1})},usePrivileged:function(){},usePayOnline:function(){var t=this,e={sid:t.sid,money:t.consumPrice,no_money:t.notconsumPrice};if(console.info(t.useInfo.payonline),"1"==t.useInfo.payonline)s.default._post_form("&p=halfcard&do=usePayOnline",e,function(t){s.default.navigationTo({url:"pages/mainPages/payment/payment?orderid="+t.data+"&plugin=halfcard"})});else{var i={mid:t.mid,packids:t.packids,money:t.consumPrice,no_money:t.notconsumPrice,card_id:t.useInfo.card_id};s.default._post_form("&p=halfcard&do=usePrivileged",i,function(t){uni.showToast({icon:"none",title:"消费成功",duration:2e3,success:function(){setTimeout(function(){uni.navigateBack({delta:1})},2e3)}})})}},getUseInfo:function(t){var e=this,i={type:e.type,sid:e.sid,pack_id:e.pack_id,mid:e.mid};s.default._post_form("&p=halfcard&do=useInfo",i,function(i){e.useInfo=i.data,console.info(e.useInfo),e.loadlogo=!1,t&&t()},function(t){s.default.navigationTo({url:"pages/mainPages/userCenter/userCenter"})})}},computed:{buyPrice:function(){var t=this,e=t.buyData,i=Number(t.consumPrice),n=Number(t.notconsumPrice);if(10===e.discount)return i.toFixed(2);if(10!==e.discount&&!t.iScoupon)return t.vipCouponPrice=(i*Number(e.discount/10)).toFixed(2),(i-i*Number(e.discount/10)).toFixed(2);if(10!==e.discount&&t.iScoupon){if(!(i>0&&i<=n)){var o=i-n;return t.vipCouponPrice=(o*Number(e.discount/10)).toFixed(2),(o-o*Number(e.discount/10)+n).toFixed(2)}s.default.showError("不可消费金额不能大于消费金额最低支付0.01元")}}}};e.default=u},"70c9":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{}},props:{show:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},showOverlay:{type:Boolean,default:!0},type:{type:String,default:"center"},modelData:{type:Object,default:function(){}}},components:{},computed:{},mounted:function(){},methods:{handleMaskClick:function(){this.$emit("clickmask")}}};e.default=n},"70e0":function(t,e,i){"use strict";i.r(e);var n=i("70c9"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},"738b":function(t,e,i){"use strict";i.r(e);var n=i("8cd6"),o=i("70e0");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("1204");var s=i("2877"),c=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"7008c164",null);e["default"]=c.exports},"8cd6":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticClass:"pop",class:["pop--"+t.type,{"pop--show":t.show}]},[t.overlay?i("v-uni-view",{staticClass:"pop__mask",class:{"pop__mask--hide":!t.showOverlay},on:{click:function(e){e=t.$handleEvent(e),t.handleMaskClick(e)}}}):t._e(),i("v-uni-view",{staticClass:"pop__container"},[t._t("default")],2)],1)],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},a149:function(t,e,i){"use strict";var n=i("55b0"),o=i.n(n);o.a},a21c:function(t,e,i){"use strict";var n=i("ac76"),o=i.n(n);o.a},a8c7:function(t,e,i){"use strict";i.r(e);var n=i("67b6"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},abb3:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"content padding-box-all"},[i("v-uni-form",[3!=t.type?i("v-uni-view",{staticClass:"input-box b-f"},[i("v-uni-view",{staticClass:"consumption-box-input dis-flex flex-x-between flex-y-center bor-radius-10upx"},[i("v-uni-view",{staticClass:"f-30 col-3 nwrap"},[t._v("消费总金额")]),i("v-uni-view",{staticClass:"input-style"},[i("v-uni-input",{staticClass:"t-r",attrs:{type:"number",value:"",name:"consumpPrice"},model:{value:t.consumPrice,callback:function(e){t.consumPrice=e},expression:"consumPrice"}})],1)],1),[i("v-uni-view",{staticClass:"couponPrice-box dis-flex flex-y-center"},[i("v-uni-view",{staticClass:"radio m-right10",on:{click:function(e){e=t.$handleEvent(e),t.iScouponCheck(e)}}},[i("v-uni-radio-group",{attrs:{name:"couponPrice"}},[i("v-uni-radio",{attrs:{value:"radio1",checked:t.iScoupon,color:"#27CE00"}})],1)],1),i("v-uni-view",{staticClass:"f-28 col-c"},[t._v("输入不参与优惠金额(如酒水、套餐)")])],1),t.iScoupon?[i("v-uni-view",{staticClass:"consumption-box-input dis-flex flex-x-between flex-y-center bor-radius-10upx"},[i("v-uni-view",{staticClass:"f-30 col-3"},[t._v("不可优惠金额")]),i("v-uni-view",{staticClass:"input-style"},[i("v-uni-input",{staticClass:"t-r",attrs:{type:"number",value:"",name:"notconsumpPrice",disabled:!t.iScoupon},model:{value:t.notconsumPrice,callback:function(e){t.notconsumPrice=e},expression:"notconsumPrice"}})],1)],1)]:t._e()]],2):t._e(),i("v-uni-view",{staticClass:"mitigate-pocket b-f p-r"},[t._l(t.useInfo.pack,function(e,n){return i("v-uni-view",{staticClass:"mitigate dis-flex flex-x-between flex-y-center"},[i("v-uni-view",{staticClass:"dis-flex flex-y-center"},[i("v-uni-view",{staticClass:"f-30 col-3 m-right10"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"f-24 col-c"})],1),i("v-uni-view",{staticClass:"mitigate-price f-24"},[i("v-uni-view",{staticClass:"switch"},[-1!==t.packids.indexOf(e.id)?i("v-uni-view",{staticClass:"switchOn",on:{click:function(i){i=t.$handleEvent(i),t.checkLb(e.id)}}},[i("span"),i("v-uni-view")],1):t._e(),-1==t.packids.indexOf(e.id)?i("v-uni-view",{staticClass:"switchOn",on:{click:function(i){i=t.$handleEvent(i),t.checkLb(e.id)}}},[i("v-uni-view"),i("span")],1):t._e()],1)],1)],1)}),3!=t.type?i("v-uni-view",{staticClass:"mitigate dis-flex flex-x-between flex-y-center"},[i("v-uni-view",{staticClass:"dis-flex flex-y-center"},[i("v-uni-view",{staticClass:"f-30 col-3 m-right10"},[t._v("会员减免")]),i("v-uni-view",{staticClass:"f-24 col-c"},[t._v("会员减免"+t._s(t.useInfo.discount)+"折")])],1),i("v-uni-view",{staticClass:"mitigate-price f-24"},[t._v(t._s(t.vipCouponPrice)+"元")])],1):t._e(),i("v-uni-view",{staticClass:"out-pocket"},[3!=t.type?i("v-uni-view",{staticClass:"mitigate dis-flex flex-x-between flex-y-center"},[i("v-uni-view",{staticClass:"dis-flex flex-y-center"},[i("v-uni-view",{staticClass:"f-30 col-3 m-right10"},[t._v("实付金额")])],1),i("v-uni-view",{staticClass:"mitigate-price f-24"},[t._v(t._s(t.buyPrice)+"元")])],1):t._e()],1),3!=t.type?i("v-uni-view",{staticClass:"mitigate-pocket-fgx"}):t._e()],2),i("v-uni-view",{staticClass:"store-title f-24 t-c"},[i("span",{staticClass:"useName"},[t._v(t._s(""!==t.type?"持卡人":"商户")+":"+t._s(t.useInfo.name))])]),i("v-uni-view",{staticClass:"buy-label f-24 col-6"},[t._v("买单仅限于到店支付,请确认金额后提交")]),""==t.type?i("v-uni-button",{staticClass:"submit-btn t-c bor-radius-10upx f-28 col-f",attrs:{formType:"submit","hover-class":"hoverButton"},on:{click:function(e){e=t.$handleEvent(e),t.usePayOnline(e)}}},[t._v("和店员已确认,立即买单")]):t._e(),""!==t.type?i("v-uni-button",{staticClass:"submit-btn t-c bor-radius-10upx f-28 col-f",attrs:{formType:"submit","hover-class":"hoverButton"},on:{click:function(e){e=t.$handleEvent(e),t.usePayOnline(e)}}},[t._v(t._s(""!==t.type?"点击在线买单":"和店员已确认,立即买单"))]):t._e()],1)],1),i("PopManager",{attrs:{show:t.shopShow,type:t.showType}},[i("v-uni-view",{staticClass:"shopShow",style:{height:t.phoneHight}},t._l(t.useInfo.shop_list,function(e,n){return i("v-uni-view",{staticClass:"checkStoreMb",on:{click:function(i){i=t.$handleEvent(i),t.closeShopShow(e.id)}}},[i("v-uni-view",{staticClass:"checkStoreMbPackage"},[i("v-uni-view",{staticClass:"logoMb"},[i("v-uni-image",{attrs:{src:e.logo}})],1),i("v-uni-view",{staticClass:"infoMb"},[i("v-uni-view",[i("v-uni-view",[i("span",[t._v(t._s(e.storename))])]),i("v-uni-view",[i("span",[t._v(t._s(e.address))])])],1),i("v-uni-image",{attrs:{src:"/static/images/merchant/right.svg"}})],1)],1)],1)}),1)],1)],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},ac76:function(t,e,i){var n=i("eb57");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("a4991d56",n,!0,{sourceMap:!1,shadowMode:!1})},aef3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={};e.default=n},c6b8:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".loadlogo-container[data-v-8fcb8444]{width:100%;height:100%;background-color:#fff;position:fixed;z-index:99999}.loadlogo[data-v-8fcb8444]{width:80px;height:80px;\r\n\t/* margin: -60px 0 0 -60px; */position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.loadlogo .image[data-v-8fcb8444]{width:100%;height:100%}",""])},d6ec8:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"loadlogo-container"},[i("v-uni-view",{staticClass:"loadlogo"},[i("v-uni-image",{staticClass:"image",attrs:{src:"/static/images/loadlogo.svg",mode:"aspectFill"}})],1)],1)],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},eb57:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'.nwrap[data-v-513b65fc]{white-space:nowrap}.switch[data-v-513b65fc]{width:%?80?%;height:%?40?%;border:%?2?% solid #f44;border-radius:%?20?%}.switch>uni-view[data-v-513b65fc]{padding:%?6?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.switch>uni-view>uni-view[data-v-513b65fc]{width:%?28?%;height:%?28?%;background:#f44;-webkit-box-shadow:%?0?% %?2?% %?6?% %?0?% rgba(255,68,68,.35);box-shadow:%?0?% %?2?% %?6?% %?0?% rgba(255,68,68,.35);border-radius:50%}.useName[data-v-513b65fc]{color:#f44;font-size:%?24?%}.infoMb[data-v-513b65fc]{width:%?550?%;margin-left:%?20?%;display:inline-block;vertical-align:top}.infoMb>uni-view[data-v-513b65fc]{vertical-align:middle;display:inline-block}.infoMb>uni-view>uni-view:first-child>span[data-v-513b65fc]{font-size:%?28?%;font-weight:700;color:#333}.infoMb>uni-view>uni-view:nth-child(2)>span[data-v-513b65fc]{display:inline-block;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;width:%?520?%;font-size:%?24?%;color:#999}.infoMb>uni-image[data-v-513b65fc]{margin-top:%?40?%;float:right;vertical-align:middle;width:%?25?%}.logoMb[data-v-513b65fc]{vertical-align:top;display:inline-block}.logoMb>uni-image[data-v-513b65fc]{height:%?100?%;width:%?100?%}.shopShow[data-v-513b65fc]{background:#fff;width:%?750?%}uni-page-body[data-v-513b65fc]{background-color:#f0edf4}.checkStoreMbPackage[data-v-513b65fc]{border-bottom:%?1?% solid grey;padding:%?30?%}.input-box[data-v-513b65fc]{padding:%?20?%;border:1px solid #cfced3;-webkit-box-shadow:0 0 %?10?% %?4?% #cfced3;box-shadow:0 0 %?10?% %?4?% #cfced3;position:relative;z-index:2;margin-top:%?4?%}.input-box .consumption-box-input[data-v-513b65fc]{background-color:#f4f4f6;height:%?100?%;padding:0 %?20?%;-webkit-box-shadow:0 0 %?10?% #f4f4f6;box-shadow:0 0 %?10?% #f4f4f6}.input-box .couponPrice-box[data-v-513b65fc]{padding:0 %?10?%;margin:%?30?% 0}.mitigate-pocket[data-v-513b65fc]{-webkit-box-shadow:0 0 5px #cfced3;box-shadow:0 0 5px #cfced3;margin:0 %?2?%}.mitigate-pocket .mitigate-pocket-fgx[data-v-513b65fc]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:%?630?%;height:%?2?%;border-bottom:1px dashed #eee}.mitigate-pocket[data-v-513b65fc]:before{content:" ";width:%?30?%;height:%?30?%;border-radius:50%;background-color:#f0edf4;position:absolute;top:50%;left:%?-14?%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.mitigate-pocket[data-v-513b65fc]:after{content:" ";width:%?30?%;height:%?30?%;border-radius:50%;background-color:#f0edf4;position:absolute;top:50%;right:%?-14?%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.mitigate[data-v-513b65fc]{padding:%?40?% %?30?% %?40?% %?40?%}.mitigate .mitigate-price[data-v-513b65fc]{color:#cd8553}.store-title[data-v-513b65fc]{color:#cd8553;background-color:#fef9ed;height:%?70?%;line-height:%?70?%;margin:0 %?2?%}.buy-label[data-v-513b65fc]{margin:%?10?% 0 %?20?%;padding:0 %?10?%;letter-spacing:%?2?%}.submit-btn[data-v-513b65fc]{background-color:#1bbc9a;height:%?90?%;line-height:%?90?%}.hoverButton[data-v-513b65fc]{opacity:.2;background-color:#000}body.?%PAGE?%[data-v-513b65fc]{background-color:#f0edf4}',""])},fbf7:function(t,e,i){"use strict";i.r(e);var n=i("aef3"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a}}]);