<?php
 class HttpClient { var $host; var $port; var $path; var $method; var $postdata = ''; var $cookies = array(); var $referer; var $accept = "\x74\145\170\x74\x2f\x78\x6d\x6c\54\x61\160\x70\154\151\143\x61\x74\x69\x6f\x6e\x2f\x78\x6d\x6c\x2c\x61\160\x70\154\151\143\x61\164\151\157\156\x2f\x78\x68\x74\155\154\x2b\170\155\154\x2c\x74\x65\170\x74\57\150\164\155\154\x2c\164\x65\170\164\x2f\160\x6c\x61\151\156\x2c\x69\x6d\141\147\x65\57\x70\x6e\147\54\x69\x6d\x61\x67\145\57\152\160\145\147\x2c\x69\x6d\x61\147\145\57\147\151\146\54\52\57\x2a"; var $accept_encoding = "\147\x7a\x69\x70"; var $accept_language = "\145\x6e\55\165\x73"; var $user_agent = "\x49\x6e\143\165\x74\x69\157\x20\x48\164\164\160\x43\154\x69\145\x6e\164\40\166\x30\x2e\71"; var $timeout = 20; var $use_gzip = true; var $persist_cookies = true; var $persist_referers = true; var $debug = false; var $handle_redirects = true; var $max_redirects = 5; var $headers_only = false; var $username; var $password; var $status; var $headers = array(); var $content = ''; var $errormsg; var $redirect_count = 0; var $cookie_host = ''; function __construct($host, $port = 80) { $this->host = $host; $this->port = $port; } function get($path, $data = false) { goto r_ru9; oR7A8: $this->path .= "\x3f" . $this->buildQueryString($data); goto JJoN_; fVV_p: return $this->doRequest(); goto s5qWH; yqtGf: $this->method = "\x47\105\124"; goto zRrQO; r_ru9: $this->path = $path; goto yqtGf; JJoN_: fhJnk: goto fVV_p; zRrQO: if (!$data) { goto fhJnk; } goto oR7A8; s5qWH: } function post($path, $data) { goto Ayj_C; V7P2M: return $this->doRequest(); goto U8GNf; T81N_: $this->postdata = $this->buildQueryString($data); goto V7P2M; HDUwI: $this->method = "\120\x4f\x53\124"; goto T81N_; Ayj_C: $this->path = $path; goto HDUwI; U8GNf: } function buildQueryString($data) { goto DtUS5; EU488: wIfTF: goto EWox0; DtUS5: $querystring = ''; goto K0ts5; Z0FFq: return $querystring; goto PTo9X; EWox0: $querystring = substr($querystring, 0, -1); goto r2Nvs; r2Nvs: Hbx1h: goto Z0FFq; M7_Sz: goto Hbx1h; goto V3eig; dLmW1: $querystring = $data; goto M7_Sz; K0ts5: if (is_array($data)) { goto bP0jK; } goto dLmW1; V3eig: bP0jK: goto yEmgT; yEmgT: foreach ($data as $key => $val) { goto Wj9PH; jp23c: RXQQD: goto W36KX; i624M: foreach ($val as $val2) { $querystring .= urlencode($key) . "\x3d" . urlencode($val2) . "\46"; JLQBN: } goto hR1V7; hR1V7: PeEYx: goto jp23c; W36KX: FLC6R: goto SiZvA; BtSeO: $querystring .= urlencode($key) . "\75" . urlencode($val) . "\x26"; goto MXD_A; Wj9PH: if (is_array($val)) { goto wBEjM; } goto BtSeO; MXD_A: goto RXQQD; goto qg3Ti; qg3Ti: wBEjM: goto i624M; SiZvA: } goto EU488; PTo9X: } function doRequest() { goto RZIpd; Jc1N8: UJUou: goto FzQHJ; y8OUz: $uri = isset($this->headers["\x75\x72\x69"]) ? $this->headers["\x75\162\151"] : ''; goto JsmC_; FzQHJ: $this->content .= $line; goto nIGA9; y9cz7: fwrite($fp, $request); goto T1aey; SX3Df: if (!$this->handle_redirects) { goto hdFtW; } goto OsmUq; k15Ev: gd8De: goto VdZkz; dBSiX: Ju_lq: goto pdAvb; YA306: if (is_array($cookies)) { goto wheDX; } goto XYl7U; MiAvC: if (feof($fp)) { goto xnh95; } goto pF_LN; DGA5S: Zbr4G: goto JL_sH; vOoXB: CHfl5: goto iFgGY; pVG_2: if (!(isset($this->headers["\x63\x6f\156\x74\145\156\x74\x2d\x65\156\143\x6f\144\151\x6e\147"]) && $this->headers["\143\157\156\164\145\x6e\164\55\x65\156\x63\157\144\151\156\147"] == "\x67\172\151\160")) { goto RZ3hi; } goto zPZGH; lIGSn: v4YiA: goto FME0m; vRJDn: Svfx8: goto UurZI; CvCH5: $this->debug(trim($line)); goto fauDO; BGg99: zIyWk: goto vyaSR; gYVdk: $this->debug("\x52\145\x71\x75\x65\x73\x74", $request); goto y9cz7; fauDO: goto CA1m0; goto WqmRr; RRZU4: MPl43: goto GCYJi; OMKtA: hdFtW: goto kxWCo; XYl7U: $cookies = array($cookies); goto ySzky; pF_LN: $line = fgets($fp, 4096); goto Wd_ab; YRJpc: goto CA1m0; goto vRJDn; amZwr: $this->content = substr($this->content, 10); goto ObBkB; TBuxl: goto xnh95; goto T9i_N; eX71i: $this->errormsg = "\x53\164\141\x74\x75\163\40\x63\x6f\144\x65\x20\x6c\151\156\145\40\x69\x6e\x76\141\154\x69\144\72\40" . htmlentities($line); goto aMmts; kxWCo: return true; goto VnNyS; fsRkJ: $this->redirect_count = 0; goto MQikC; Zjwr0: $this->errormsg = "\116\165\155\142\145\x72\40\157\x66\x20\x72\145\x64\x69\x72\x65\x63\164\x73\x20\x65\170\x63\x65\145\144\x65\x64\x20\155\141\x78\x69\x6d\x75\x6d\x20\x28" . $this->max_redirects . "\51"; goto DCPF4; MyzvY: $url = parse_url($location . $uri); goto IFQlp; sTcIH: $this->referer = $this->getRequestURL(); goto kecpd; ph1PT: if (!(trim($line) == '')) { goto MPl43; } goto hupTN; WLA6i: $cookies = $this->headers["\163\x65\x74\55\143\x6f\157\153\x69\x65"]; goto YA306; k8QWD: fclose($fp); goto pVG_2; Wd_ab: if (!$atStart) { goto VGJ1W; } goto Whtu6; JL_sH: if (!$this->persist_referers) { goto UcMrj; } goto oRWdu; sOqbc: if (is_array($this->headers[$key])) { goto v4YiA; } goto SnRpH; FCzrT: Bqvgu: goto sOqbc; hupTN: $inHeaders = false; goto xKM_G; iFgGY: $this->cookie_host = $this->host; goto DGA5S; U7SYD: Cp07a: goto KX_BW; aMmts: $this->debug($this->errormsg); goto DHigm; WqmRr: VGJ1W: goto WS7D_; UurZI: $key = strtolower(trim($m[1])); goto LnIUU; VA6dG: if (!($this->persist_cookies && isset($this->headers["\x73\x65\x74\55\143\157\x6f\153\151\145"]) && $this->host == $this->cookie_host)) { goto Zbr4G; } goto WLA6i; SnRpH: $this->headers[$key] = array($this->headers[$key], $val); goto qbmYH; WS7D_: if (!$inHeaders) { goto UJUou; } goto ph1PT; T1aey: $this->headers = array(); goto F0jS0; ObBkB: $this->content = gzinflate($this->content); goto A_kOu; T9i_N: k3iI2: goto ldm0G; hL0Xo: $location = isset($this->headers["\154\157\x63\141\x74\151\157\156"]) ? $this->headers["\154\157\x63\141\164\x69\x6f\x6e"] : ''; goto y8OUz; KX_BW: $http_version = $m[1]; goto B_mkY; OsmUq: if (!(++$this->redirect_count >= $this->max_redirects)) { goto fFVpS; } goto Zjwr0; LnIUU: $val = trim($m[2]); goto YLdLg; uZnPp: $request = $this->buildRequest(); goto gYVdk; VdZkz: goto CA1m0; goto Jc1N8; MQikC: return false; goto l8uDq; A_kOu: RZ3hi: goto VA6dG; GCYJi: if (preg_match("\x2f\x28\x5b\136\72\135\53\x29\x3a\x5c\163\x2a\50\x2e\52\x29\x2f", $line, $m)) { goto Svfx8; } goto YRJpc; ySzky: wheDX: goto JT0O4; YLdLg: if (isset($this->headers[$key])) { goto Bqvgu; } goto VZ4oF; rch13: $inHeaders = true; goto ylNkb; l8uDq: fFVpS: goto hL0Xo; kecpd: UcMrj: goto SX3Df; im5Ef: CA1m0: goto MiAvC; kS86s: if (!$this->headers_only) { goto k3iI2; } goto TBuxl; ldm0G: goto CA1m0; goto RRZU4; Whtu6: $atStart = false; goto Q1wEG; B_mkY: $this->status = $m[2]; goto uzHZl; nIGA9: goto CA1m0; goto UnNlN; F0jS0: $this->content = ''; goto pSgxn; UnNlN: xnh95: goto k8QWD; vMuGj: switch ($errno) { case -3: $this->errormsg = "\x53\157\143\x6b\145\x74\40\143\x72\145\x61\x74\x69\157\156\x20\146\x61\151\x6c\145\x64\40\50\x2d\63\51"; case -4: $this->errormsg = "\104\x4e\x53\40\x6c\157\x6f\x6b\x75\x70\x20\x66\141\151\x6c\x75\162\x65\40\50\x2d\64\51"; case -5: $this->errormsg = "\103\x6f\156\156\145\x63\x74\151\x6f\156\x20\162\x65\146\165\163\x65\x64\40\157\x72\x20\x74\x69\155\x65\x64\40\x6f\x75\164\40\50\55\65\51"; default: goto ssONP; AIHvI: $this->errormsg .= "\40" . $errstr; goto zRHmB; ssONP: $this->errormsg = "\x43\x6f\x6e\x6e\145\143\x74\x69\157\x6e\40\x66\x61\x69\154\145\144\x20\x28" . $errno . "\51"; goto AIHvI; zRHmB: $this->debug($this->errormsg); goto Ry9Im; Ry9Im: } goto fj60O; JsmC_: if (!($location || $uri)) { goto FNfte; } goto MyzvY; yfK7m: FNfte: goto OMKtA; ylNkb: $atStart = true; goto im5Ef; JT0O4: foreach ($cookies as $cookie) { goto hn03U; w04FZ: NoXQB: goto Mi_d1; VdmFb: KKdLg: goto w04FZ; o2VNW: $this->cookies[$m[1]] = $m[2]; goto VdmFb; hn03U: if (!preg_match("\x2f\50\x5b\136\75\x5d\x2b\x29\75\50\x5b\136\x3b\x5d\53\51\x3b\x2f", $cookie, $m)) { goto KKdLg; } goto o2VNW; Mi_d1: } goto vOoXB; DCPF4: $this->debug($this->errormsg); goto fsRkJ; luTFG: goto gd8De; goto FCzrT; QRA_f: bHsrH: goto k15Ev; vyaSR: socket_set_timeout($fp, $this->timeout); goto uZnPp; VZ4oF: $this->headers[$key] = $val; goto luTFG; qbmYH: goto bHsrH; goto lIGSn; DHigm: return false; goto U7SYD; zPZGH: $this->debug("\x43\x6f\x6e\164\145\156\x74\x20\x69\163\40\147\172\x69\160\x20\145\x6e\143\157\144\145\x64\54\40\x75\156\172\x69\160\x70\x69\156\147\x20\x69\164"); goto amZwr; pSgxn: $this->errormsg = ''; goto rch13; IFQlp: return $this->get($url["\160\x61\164\x68"]); goto yfK7m; FME0m: $this->headers[$key][] = $val; goto QRA_f; uzHZl: $status_string = $m[3]; goto CvCH5; RZIpd: if ($fp = @fsockopen($this->host, $this->port, $errno, $errstr, $this->timeout)) { goto zIyWk; } goto vMuGj; fj60O: GEpjX: goto dBSiX; xKM_G: $this->debug("\x52\145\143\145\151\166\x65\x64\x20\110\145\141\x64\145\162\x73", $this->headers); goto kS86s; pdAvb: return false; goto BGg99; oRWdu: $this->debug("\120\x65\162\163\x69\x73\x74\151\156\147\40\x72\145\x66\x65\x72\x65\162\x3a\40" . $this->getRequestURL()); goto sTcIH; Q1wEG: if (preg_match("\x2f\x48\124\124\120\x5c\x2f\50\x5c\144\x5c\56\134\x64\x29\x5c\x73\x2a\x28\x5c\x64\x2b\51\x5c\163\52\50\56\x2a\51\57", $line, $m)) { goto Cp07a; } goto eX71i; VnNyS: } function buildRequest() { goto GP2GZ; lFkxm: A9MZy: goto QZoES; JN9ol: nIqqz: goto Axs4s; X5sR1: $headers[] = "\125\x73\145\162\x2d\x41\x67\145\x6e\164\72\40{$this->user_agent}"; goto V187M; jMqTo: if (!$this->referer) { goto A9MZy; } goto Q0Og9; Qu2Pw: $cookie = "\103\157\157\x6b\x69\145\x3a\40"; goto X9t9q; hZcL0: return $request; goto AJxNo; wdwVn: $headers[] = "{$this->method}\x20{$this->path}\x20\110\124\124\120\x2f\x31\x2e\x30"; goto BurNy; SGqDS: $headers[] = $cookie; goto A11Hi; KceuF: qfijF: goto IN57g; IN57g: $headers[] = "\101\x63\x63\x65\160\x74\x2d\154\141\156\147\165\141\x67\x65\72\x20{$this->accept_language}"; goto jMqTo; pE_82: tehvz: goto SGqDS; BIU66: $headers[] = "\x41\143\143\x65\x70\164\55\145\x6e\143\157\x64\151\156\147\x3a\x20{$this->accept_encoding}"; goto KceuF; f81EF: if (!($this->username && $this->password)) { goto tD4as; } goto aZfvG; A11Hi: fLLeu: goto f81EF; GP2GZ: $headers = array(); goto wdwVn; aZfvG: $headers[] = "\x41\x75\x74\x68\157\x72\x69\172\141\164\151\157\156\72\x20\102\101\x53\x49\103\x20" . base64_encode($this->username . "\72" . $this->password); goto d8vMD; V187M: $headers[] = "\101\x63\143\x65\x70\x74\72\40{$this->accept}"; goto pccVX; d8vMD: tD4as: goto rmXch; rmXch: if (!$this->postdata) { goto nIqqz; } goto Triz6; GbYW0: $headers[] = "\103\x6f\156\164\145\156\164\x2d\114\145\x6e\x67\164\x68\x3a\40" . strlen($this->postdata); goto JN9ol; Triz6: $headers[] = "\x43\x6f\156\x74\145\x6e\x74\x2d\x54\171\160\x65\x3a\x20\141\160\x70\x6c\x69\x63\141\164\x69\157\156\x2f\x78\55\x77\167\167\x2d\146\157\x72\155\x2d\x75\162\x6c\x65\156\x63\x6f\144\x65\144"; goto GbYW0; QZoES: if (!$this->cookies) { goto fLLeu; } goto Qu2Pw; Q0Og9: $headers[] = "\122\145\x66\145\x72\x65\x72\x3a\x20{$this->referer}"; goto lFkxm; BurNy: $headers[] = "\110\157\x73\x74\x3a\40{$this->host}"; goto X5sR1; Axs4s: $request = implode("\15\xa", $headers) . "\15\xa\15\xa" . $this->postdata; goto hZcL0; pccVX: if (!$this->use_gzip) { goto qfijF; } goto BIU66; X9t9q: foreach ($this->cookies as $key => $value) { $cookie .= "{$key}\x3d{$value}\x3b\x20"; GDZ10: } goto pE_82; AJxNo: } function getStatus() { return $this->status; } function getContent() { return $this->content; } function getHeaders() { return $this->headers; } function getHeader($header) { goto l1nsK; FJ6xv: if (isset($this->headers[$header])) { goto JHwvY; } goto ni8eR; hRrhp: return $this->headers[$header]; goto D7AHs; D7AHs: GLXMq: goto wlQmw; l1nsK: $header = strtolower($header); goto FJ6xv; ni8eR: return false; goto ImbL5; ImbL5: goto GLXMq; goto Z1EFO; Z1EFO: JHwvY: goto hRrhp; wlQmw: } function getError() { return $this->errormsg; } function getCookies() { return $this->cookies; } function getRequestURL() { goto u5rPQ; u5rPQ: $url = "\x68\164\164\160\72\57\57" . $this->host; goto AzM7M; m3urr: $url .= "\72" . $this->port; goto QnKuT; teLB_: $url .= $this->path; goto qD7g3; qD7g3: return $url; goto A2fxX; QnKuT: flWGD: goto teLB_; AzM7M: if (!($this->port != 80)) { goto flWGD; } goto m3urr; A2fxX: } function setUserAgent($string) { $this->user_agent = $string; } function setAuthorization($username, $password) { $this->username = $username; $this->password = $password; } function setCookies($array) { $this->cookies = $array; } function useGzip($boolean) { $this->use_gzip = $boolean; } function setPersistCookies($boolean) { $this->persist_cookies = $boolean; } function setPersistReferers($boolean) { $this->persist_referers = $boolean; } function setHandleRedirects($boolean) { $this->handle_redirects = $boolean; } function setMaxRedirects($num) { $this->max_redirects = $num; } function setHeadersOnly($boolean) { $this->headers_only = $boolean; } function setDebug($boolean) { $this->debug = $boolean; } function quickGet($url) { goto oc_xF; Vfsl8: if (!$client->get($path)) { goto q20dk; } goto CWqOI; R3QDV: bDfj0: goto vZM03; Ut7ae: return false; goto R3QDV; K1_p_: if (!isset($bits["\x71\165\x65\162\x79"])) { goto bHZX_; } goto OVZsh; OPR6f: $path = isset($bits["\x70\141\164\150"]) ? $bits["\x70\141\164\x68"] : "\57"; goto K1_p_; waQPi: bHZX_: goto CayA0; oc_xF: $bits = parse_url($url); goto mOhoE; mOhoE: $host = $bits["\150\157\163\164"]; goto Qg6y1; Qg6y1: $port = isset($bits["\x70\157\162\x74"]) ? $bits["\160\x6f\x72\164"] : 80; goto OPR6f; RQCoi: q20dk: goto Ut7ae; CWqOI: return $client->getContent(); goto jfe8k; CayA0: $client = new HttpClient($host, $port); goto Vfsl8; jfe8k: goto bDfj0; goto RQCoi; OVZsh: $path .= "\77" . $bits["\x71\165\x65\162\171"]; goto waQPi; vZM03: } function quickPost($url, $data) { goto MlmY9; xa5Jc: goto qhqXq; goto hSm7i; swW3U: $port = isset($bits["\x70\x6f\x72\164"]) ? $bits["\x70\157\x72\164"] : 80; goto h1U84; pnfoN: return false; goto jRgIq; J_fza: return $client->getContent(); goto xa5Jc; jRgIq: qhqXq: goto eGN1i; hSm7i: yOGzh: goto pnfoN; MlmY9: $bits = parse_url($url); goto pMYzX; pMYzX: $host = $bits["\x68\x6f\163\x74"]; goto swW3U; YuKOh: $client = new HttpClient($host, $port); goto fOIxO; h1U84: $path = isset($bits["\160\141\164\150"]) ? $bits["\160\141\164\x68"] : "\57"; goto YuKOh; fOIxO: if (!$client->post($path, $data)) { goto yOGzh; } goto J_fza; eGN1i: } function debug($msg, $object = false) { goto CruFG; e3KPv: ob_start(); goto JRkM7; v_uyw: print "\x3c\160\x72\x65\76" . $content . "\74\x2f\160\x72\145\x3e"; goto NZp9E; EIqWi: if (!$object) { goto JnSLi; } goto e3KPv; CruFG: if (!$this->debug) { goto FmKhy; } goto gnGRf; gnGRf: print "\74\144\x69\166\40\x73\x74\171\154\x65\x3d\x22\x62\x6f\x72\x64\x65\x72\x3a\x20\61\x70\170\x20\163\x6f\154\151\144\x20\162\145\144\73\40\x70\141\144\144\151\x6e\147\x3a\40\x30\x2e\x35\145\155\73\x20\x6d\141\x72\x67\x69\156\72\x20\x30\x2e\x35\x65\155\73\x22\x3e\x3c\163\164\x72\x6f\156\147\x3e\x48\164\164\x70\103\154\151\145\x6e\164\x20\x44\145\x62\x75\147\72\74\57\163\x74\162\157\156\147\x3e\40" . $msg; goto EIqWi; DAvhc: print "\x3c\57\x64\151\166\x3e"; goto bGc03; atnsm: ob_end_clean(); goto v_uyw; oafsy: $content = htmlentities(ob_get_contents()); goto atnsm; NZp9E: JnSLi: goto DAvhc; bGc03: FmKhy: goto LoIA0; JRkM7: print_r($object); goto oafsy; LoIA0: } }