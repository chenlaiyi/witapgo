<?php
 class HttpClient { var $host; var $port; var $path; var $method; var $postdata = ''; var $cookies = array(); var $referer; var $accept = "\164\x65\x78\164\x2f\170\x6d\x6c\x2c\x61\160\160\x6c\151\143\x61\164\151\x6f\x6e\57\170\x6d\154\x2c\x61\x70\x70\x6c\151\x63\141\164\x69\157\156\x2f\170\150\164\x6d\154\x2b\170\x6d\154\x2c\x74\145\170\164\x2f\x68\164\x6d\x6c\54\164\145\x78\164\57\160\154\x61\151\156\54\x69\155\141\x67\145\x2f\x70\x6e\x67\x2c\151\x6d\141\147\x65\57\x6a\x70\x65\x67\x2c\151\155\141\147\x65\x2f\x67\151\x66\54\52\x2f\x2a"; var $accept_encoding = "\147\x7a\151\x70"; var $accept_language = "\x65\156\x2d\x75\163"; var $user_agent = "\x49\156\x63\165\x74\151\x6f\40\110\164\164\x70\103\154\x69\145\x6e\164\x20\x76\x30\56\x39"; var $timeout = 20; var $use_gzip = true; var $persist_cookies = true; var $persist_referers = true; var $debug = false; var $handle_redirects = true; var $max_redirects = 5; var $headers_only = false; var $username; var $password; var $status; var $headers = array(); var $content = ''; var $errormsg; var $redirect_count = 0; var $cookie_host = ''; function __construct($host, $port = 80) { $this->host = $host; $this->port = $port; } function get($path, $data = false) { goto X2FN_; zWSZM: $this->method = "\x47\x45\124"; goto ql6NS; X2FN_: $this->path = $path; goto zWSZM; UsgGv: return $this->doRequest(); goto RxXNd; lQyVu: xXkiR: goto UsgGv; va8Ao: $this->path .= "\77" . $this->buildQueryString($data); goto lQyVu; ql6NS: if (!$data) { goto xXkiR; } goto va8Ao; RxXNd: } function post($path, $data) { goto AdwkN; JdvmA: $this->postdata = $this->buildQueryString($data); goto kR39h; kR39h: return $this->doRequest(); goto qf3qp; AdwkN: $this->path = $path; goto ep0hU; ep0hU: $this->method = "\x50\x4f\x53\124"; goto JdvmA; qf3qp: } function buildQueryString($data) { goto p3gQE; mRohQ: RpZfT: goto eiKJV; eiKJV: $querystring = substr($querystring, 0, -1); goto sVSQE; sVSQE: jtypW: goto woywS; woywS: return $querystring; goto AXJW0; p3gQE: $querystring = ''; goto n53Zp; TMLhI: foreach ($data as $key => $val) { goto MTtLQ; Oaz0h: $querystring .= urlencode($key) . "\75" . urlencode($val) . "\x26"; goto fhpq1; evMFk: SwasF: goto GCelu; Dm6Ka: b9sDT: goto YxYIM; qTTtV: wIUzN: goto OBtwH; YxYIM: foreach ($val as $val2) { $querystring .= urlencode($key) . "\x3d" . urlencode($val2) . "\46"; VVIcP: } goto evMFk; MTtLQ: if (is_array($val)) { goto b9sDT; } goto Oaz0h; fhpq1: goto O4uQq; goto Dm6Ka; GCelu: O4uQq: goto qTTtV; OBtwH: } goto mRohQ; O7zJU: Sj2We: goto TMLhI; nRGhD: $querystring = $data; goto n_TIC; n53Zp: if (is_array($data)) { goto Sj2We; } goto nRGhD; n_TIC: goto jtypW; goto O7zJU; AXJW0: } function doRequest() { goto WRXhn; zwefS: $this->content = gzinflate($this->content); goto vTrVZ; PBMZe: $this->errormsg = ''; goto RWM1s; iIZGn: $line = fgets($fp, 4096); goto jAnvg; N2Jwa: $this->debug(trim($line)); goto SVELM; xxHc3: $this->debug("\x52\x65\143\x65\151\166\145\144\40\110\145\x61\144\145\162\x73", $this->headers); goto KK3rv; jAnvg: if (!$atStart) { goto YYlPS; } goto Z_nrJ; ZZCnt: $this->content = substr($this->content, 10); goto zwefS; zgGJN: toQ4y: goto QZDHk; f1u4X: $this->redirect_count = 0; goto dorBm; hcZ6k: $this->headers[$key] = array($this->headers[$key], $val); goto bh3pM; v9Eq9: oYjtn: goto y4bPF; PL70A: $http_version = $m[1]; goto uzQX5; qKHrX: oLW7_: goto I1BVX; fZ9rs: $request = $this->buildRequest(); goto ck0V3; rXwNY: lKtLy: goto zsWgP; pEwjj: $url = parse_url($location . $uri); goto Fp4lv; jX2AW: switch ($errno) { case -3: $this->errormsg = "\123\x6f\x63\x6b\145\x74\40\143\162\x65\141\164\151\x6f\x6e\40\x66\x61\151\x6c\145\144\40\50\55\x33\x29"; case -4: $this->errormsg = "\x44\x4e\x53\40\x6c\157\x6f\x6b\165\x70\40\146\141\151\x6c\165\x72\x65\x20\x28\55\64\51"; case -5: $this->errormsg = "\x43\157\156\156\145\143\x74\151\157\156\40\x72\x65\x66\165\163\x65\144\x20\157\x72\x20\x74\151\155\145\144\40\157\x75\164\x20\x28\55\65\x29"; default: goto LdlOL; LdlOL: $this->errormsg = "\103\157\156\156\x65\x63\x74\151\x6f\156\x20\146\x61\x69\x6c\145\x64\x20\x28" . $errno . "\51"; goto Ka3oT; Ka3oT: $this->errormsg .= "\x20" . $errstr; goto oS6eE; oS6eE: $this->debug($this->errormsg); goto R1eKt; R1eKt: } goto LzyBa; y4bPF: $this->cookie_host = $this->host; goto NE_9p; KK3rv: if (!$this->headers_only) { goto sgR1j; } goto qGhjB; Z_nrJ: $atStart = false; goto EqJRe; RWM1s: $inHeaders = true; goto MSKaI; X1_q2: $cookies = $this->headers["\x73\145\164\x2d\143\x6f\157\153\151\x65"]; goto ycOol; J_6lr: QLuKA: goto q2JkE; eFbiG: return false; goto yKA03; ck0V3: $this->debug("\122\145\x71\x75\x65\163\164", $request); goto LxDMf; sKDZs: $this->debug("\120\145\x72\163\151\x73\x74\x69\x6e\147\40\x72\x65\x66\145\x72\x65\x72\x3a\40" . $this->getRequestURL()); goto kePYa; WRXhn: if ($fp = @fsockopen($this->host, $this->port, $errno, $errstr, $this->timeout)) { goto QLuKA; } goto jX2AW; bELjX: YYlPS: goto P9b8R; p3lnI: goto Urwxs; goto tId7j; hRb9J: yULLP: goto g9qPV; tQ5Q6: if (!($location || $uri)) { goto z6161; } goto pEwjj; LzyBa: rF02l: goto ynRfC; LxDMf: fwrite($fp, $request); goto I0WWa; bh3pM: goto lKtLy; goto h7uLM; Rloz1: tQfEH: goto gYdXt; ldIv6: if (!(++$this->redirect_count >= $this->max_redirects)) { goto toQ4y; } goto A5n1H; h7uLM: GQWx3: goto eYCe8; r566i: foreach ($cookies as $cookie) { goto mjwwT; LOzto: nCiap: goto Vfhb9; Vfhb9: EEv2y: goto OmqOf; VWaOU: $this->cookies[$m[1]] = $m[2]; goto LOzto; mjwwT: if (!preg_match("\x2f\50\x5b\x5e\x3d\135\53\x29\x3d\x28\133\x5e\73\x5d\53\51\73\57", $cookie, $m)) { goto nCiap; } goto VWaOU; OmqOf: } goto v9Eq9; yKA03: Fw_dn: goto PL70A; uzQX5: $this->status = $m[2]; goto C3ECt; MSKaI: $atStart = true; goto hdHXX; jhstI: goto eElEz; goto YycVN; iaqDu: $key = strtolower(trim($m[1])); goto YRBe4; A5n1H: $this->errormsg = "\x4e\x75\155\142\145\162\40\157\146\x20\x72\x65\x64\x69\x72\x65\x63\x74\163\40\x65\x78\143\145\x65\x64\145\x64\40\x6d\141\x78\x69\155\165\x6d\40\x28" . $this->max_redirects . "\51"; goto MrjZI; hdHXX: Urwxs: goto V4qEv; EqJRe: if (preg_match("\x2f\110\x54\124\120\x5c\57\x28\x5c\144\134\x2e\x5c\144\51\134\163\x2a\50\x5c\144\x2b\x29\134\163\x2a\50\56\x2a\x29\x2f", $line, $m)) { goto Fw_dn; } goto WgptX; W_lHt: sgR1j: goto qIiqV; C3ECt: $status_string = $m[3]; goto N2Jwa; Ydlpt: if (!(isset($this->headers["\x63\x6f\x6e\164\145\156\164\55\x65\156\143\x6f\144\151\156\x67"]) && $this->headers["\143\x6f\x6e\164\x65\156\164\55\145\156\143\x6f\x64\x69\x6e\x67"] == "\x67\x7a\151\x70")) { goto Dciqi; } goto YEkIA; ZsvwO: goto Urwxs; goto qKHrX; OqAjj: fzYCT: goto ow6dE; QZDHk: $location = isset($this->headers["\x6c\157\x63\141\x74\x69\x6f\156"]) ? $this->headers["\154\157\143\x61\x74\x69\x6f\x6e"] : ''; goto fbk3j; YycVN: o_aVs: goto hFl1G; i3ri1: if (isset($this->headers[$key])) { goto o_aVs; } goto DnITW; ow6dE: return true; goto PAEwW; qGhjB: goto yULLP; goto W_lHt; MrjZI: $this->debug($this->errormsg); goto f1u4X; P9b8R: if (!$inHeaders) { goto oLW7_; } goto fgWI6; gYdXt: if (preg_match("\57\50\133\136\72\135\x2b\51\72\x5c\163\52\x28\x2e\x2a\51\x2f", $line, $m)) { goto UbnEe; } goto p3lnI; fbk3j: $uri = isset($this->headers["\x75\162\151"]) ? $this->headers["\x75\162\151"] : ''; goto tQ5Q6; ynRfC: bnzrs: goto FtiV7; F7zZ3: $this->content = ''; goto PBMZe; vOb0O: uuQoe: goto r566i; C7ywZ: if (!$this->handle_redirects) { goto fzYCT; } goto ldIv6; V4qEv: if (feof($fp)) { goto yULLP; } goto iIZGn; A77PP: z6161: goto OqAjj; fgWI6: if (!(trim($line) == '')) { goto tQfEH; } goto zpOOE; xhvW9: jzZ3j: goto C7ywZ; YEkIA: $this->debug("\103\x6f\156\164\145\x6e\164\x20\151\163\x20\x67\x7a\x69\x70\x20\x65\x6e\x63\157\x64\145\x64\x2c\40\165\x6e\x7a\151\160\x70\x69\x6e\147\x20\151\164"); goto ZZCnt; YRBe4: $val = trim($m[2]); goto i3ri1; q2JkE: socket_set_timeout($fp, $this->timeout); goto fZ9rs; vTrVZ: Dciqi: goto RnGgl; WgptX: $this->errormsg = "\123\x74\141\164\165\163\x20\143\x6f\x64\145\x20\154\x69\x6e\x65\x20\x69\x6e\x76\141\x6c\x69\144\x3a\x20" . htmlentities($line); goto jXuDY; ycOol: if (is_array($cookies)) { goto uuQoe; } goto zeJyR; zpOOE: $inHeaders = false; goto xxHc3; Fp4lv: return $this->get($url["\x70\x61\x74\150"]); goto A77PP; zeJyR: $cookies = array($cookies); goto vOb0O; SVELM: goto Urwxs; goto bELjX; kePYa: $this->referer = $this->getRequestURL(); goto xhvW9; eYCe8: $this->headers[$key][] = $val; goto rXwNY; UL_hA: if (!$this->persist_referers) { goto jzZ3j; } goto sKDZs; jXuDY: $this->debug($this->errormsg); goto eFbiG; g9qPV: fclose($fp); goto Ydlpt; I0WWa: $this->headers = array(); goto F7zZ3; FtiV7: return false; goto J_6lr; I1BVX: $this->content .= $line; goto xM_NB; hFl1G: if (is_array($this->headers[$key])) { goto GQWx3; } goto hcZ6k; tId7j: UbnEe: goto iaqDu; xM_NB: goto Urwxs; goto hRb9J; RnGgl: if (!($this->persist_cookies && isset($this->headers["\x73\x65\x74\x2d\143\x6f\157\153\151\145"]) && $this->host == $this->cookie_host)) { goto ZqkSl; } goto X1_q2; qIiqV: goto Urwxs; goto Rloz1; zsWgP: eElEz: goto ZsvwO; dorBm: return false; goto zgGJN; DnITW: $this->headers[$key] = $val; goto jhstI; NE_9p: ZqkSl: goto UL_hA; PAEwW: } function buildRequest() { goto f03UR; f03UR: $headers = array(); goto ppCNu; ihKOq: Lb9ie: goto qa0dW; Thp8j: if (!$this->postdata) { goto UABcS; } goto M9VkT; OsH6z: $headers[] = "\x48\x6f\163\164\72\x20{$this->host}"; goto VZsp4; vcBtG: $request = implode("\15\12", $headers) . "\xd\12\15\xa" . $this->postdata; goto tsinU; qdn3q: foreach ($this->cookies as $key => $value) { $cookie .= "{$key}\75{$value}\x3b\40"; VLf6h: } goto l6VLF; tsinU: return $request; goto xjV5A; HToi6: BFQsL: goto Thp8j; ofnfc: $headers[] = "\x41\x75\164\150\x6f\x72\151\172\x61\x74\151\157\x6e\72\x20\102\101\123\111\103\40" . base64_encode($this->username . "\72" . $this->password); goto HToi6; qa0dW: if (!($this->username && $this->password)) { goto BFQsL; } goto ofnfc; ZoIZ0: if (!$this->referer) { goto o5WPg; } goto pDER6; ppCNu: $headers[] = "{$this->method}\40{$this->path}\x20\110\124\x54\120\57\x31\x2e\60"; goto OsH6z; RXU5j: if (!$this->use_gzip) { goto L2ghf; } goto zaU3a; l6VLF: gSceC: goto DFatA; zaU3a: $headers[] = "\x41\143\x63\x65\x70\x74\x2d\x65\x6e\x63\x6f\144\151\156\x67\72\40{$this->accept_encoding}"; goto qoSnt; s1GNj: o5WPg: goto ERTKo; M9VkT: $headers[] = "\x43\x6f\x6e\x74\x65\x6e\x74\x2d\x54\171\x70\x65\72\x20\x61\x70\160\154\151\x63\141\x74\151\x6f\x6e\57\x78\x2d\x77\167\x77\x2d\x66\157\x72\155\55\165\162\x6c\x65\156\x63\x6f\x64\145\144"; goto nnHr5; DFatA: $headers[] = $cookie; goto ihKOq; VZsp4: $headers[] = "\125\x73\145\162\x2d\101\x67\145\156\164\72\x20{$this->user_agent}"; goto arf8r; GpkkH: UABcS: goto vcBtG; qoSnt: L2ghf: goto LKpYD; ERTKo: if (!$this->cookies) { goto Lb9ie; } goto oEquQ; arf8r: $headers[] = "\x41\x63\x63\x65\x70\x74\x3a\x20{$this->accept}"; goto RXU5j; oEquQ: $cookie = "\103\157\157\153\151\145\72\40"; goto qdn3q; nnHr5: $headers[] = "\103\x6f\156\164\x65\156\164\55\x4c\145\156\147\164\x68\72\40" . strlen($this->postdata); goto GpkkH; LKpYD: $headers[] = "\x41\143\143\145\x70\x74\55\x6c\x61\x6e\x67\x75\x61\147\x65\72\x20{$this->accept_language}"; goto ZoIZ0; pDER6: $headers[] = "\122\x65\146\145\162\x65\162\72\40{$this->referer}"; goto s1GNj; xjV5A: } function getStatus() { return $this->status; } function getContent() { return $this->content; } function getHeaders() { return $this->headers; } function getHeader($header) { goto rBXiZ; yK4U2: return false; goto eXAC1; eVE5w: return $this->headers[$header]; goto S1s7s; wSF98: Ly5rv: goto eVE5w; IrldM: if (isset($this->headers[$header])) { goto Ly5rv; } goto yK4U2; eXAC1: goto aMHqM; goto wSF98; S1s7s: aMHqM: goto SfJZt; rBXiZ: $header = strtolower($header); goto IrldM; SfJZt: } function getError() { return $this->errormsg; } function getCookies() { return $this->cookies; } function getRequestURL() { goto zJao8; OF5K2: $url .= "\72" . $this->port; goto NWHK1; NWHK1: AwXfH: goto JQlR2; SDOCI: return $url; goto FY2tq; JQlR2: $url .= $this->path; goto SDOCI; zJao8: $url = "\150\164\164\x70\x3a\x2f\x2f" . $this->host; goto eeda0; eeda0: if (!($this->port != 80)) { goto AwXfH; } goto OF5K2; FY2tq: } function setUserAgent($string) { $this->user_agent = $string; } function setAuthorization($username, $password) { $this->username = $username; $this->password = $password; } function setCookies($array) { $this->cookies = $array; } function useGzip($boolean) { $this->use_gzip = $boolean; } function setPersistCookies($boolean) { $this->persist_cookies = $boolean; } function setPersistReferers($boolean) { $this->persist_referers = $boolean; } function setHandleRedirects($boolean) { $this->handle_redirects = $boolean; } function setMaxRedirects($num) { $this->max_redirects = $num; } function setHeadersOnly($boolean) { $this->headers_only = $boolean; } function setDebug($boolean) { $this->debug = $boolean; } function quickGet($url) { goto zMG_V; V2O8L: if (!isset($bits["\161\165\x65\x72\x79"])) { goto YdSbN; } goto OqlV8; PEwRf: $path = isset($bits["\x70\x61\x74\150"]) ? $bits["\x70\141\x74\x68"] : "\x2f"; goto V2O8L; OJ2vF: h17Qe: goto o4oNL; toj6s: $client = new HttpClient($host, $port); goto MzmFA; BwqB9: return $client->getContent(); goto i7hY6; o4oNL: return false; goto Zj4rJ; SYu1u: $host = $bits["\150\x6f\163\164"]; goto n7XGv; n7XGv: $port = isset($bits["\160\x6f\162\164"]) ? $bits["\160\x6f\162\x74"] : 80; goto PEwRf; OqlV8: $path .= "\77" . $bits["\161\165\x65\x72\171"]; goto xyl2B; xyl2B: YdSbN: goto toj6s; Zj4rJ: P7PmT: goto eO17W; MzmFA: if (!$client->get($path)) { goto h17Qe; } goto BwqB9; zMG_V: $bits = parse_url($url); goto SYu1u; i7hY6: goto P7PmT; goto OJ2vF; eO17W: } function quickPost($url, $data) { goto R_2sG; Vj2s7: goto CRBCo; goto unr5y; nHq6O: $host = $bits["\150\157\163\x74"]; goto rPkgz; qmilq: if (!$client->post($path, $data)) { goto a74Hs; } goto mqsLY; uNSOa: CRBCo: goto hQNfK; zixEN: $path = isset($bits["\160\x61\x74\x68"]) ? $bits["\x70\141\164\x68"] : "\57"; goto NNh5q; mqsLY: return $client->getContent(); goto Vj2s7; rPkgz: $port = isset($bits["\160\x6f\x72\x74"]) ? $bits["\160\157\x72\164"] : 80; goto zixEN; sSd40: return false; goto uNSOa; R_2sG: $bits = parse_url($url); goto nHq6O; NNh5q: $client = new HttpClient($host, $port); goto qmilq; unr5y: a74Hs: goto sSd40; hQNfK: } function debug($msg, $object = false) { goto qPg9X; wyudO: print "\x3c\x70\162\x65\76" . $content . "\x3c\57\x70\x72\x65\x3e"; goto V3Eep; B052y: if (!$object) { goto DEig6; } goto vFVeQ; xzgfU: print "\74\144\x69\166\x20\x73\164\x79\154\x65\75\x22\142\157\x72\x64\145\x72\x3a\x20\x31\x70\x78\x20\x73\x6f\154\151\x64\40\162\145\144\x3b\x20\x70\x61\x64\144\151\x6e\x67\x3a\40\x30\x2e\x35\x65\x6d\73\x20\155\141\x72\147\151\156\72\x20\60\x2e\65\x65\x6d\x3b\x22\x3e\74\163\164\x72\157\x6e\147\x3e\110\x74\164\x70\x43\x6c\x69\x65\x6e\164\40\x44\x65\142\x75\x67\x3a\74\57\163\164\x72\x6f\156\147\76\x20" . $msg; goto B052y; qPg9X: if (!$this->debug) { goto HB1GX; } goto xzgfU; vFVeQ: ob_start(); goto e2Wn2; a84A0: HB1GX: goto n7Cmc; e2Wn2: print_r($object); goto uka8w; wMiIu: ob_end_clean(); goto wyudO; uka8w: $content = htmlentities(ob_get_contents()); goto wMiIu; DyRM8: print "\x3c\57\x64\151\x76\76"; goto a84A0; V3Eep: DEig6: goto DyRM8; n7Cmc: } }