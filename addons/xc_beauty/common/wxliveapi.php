<?php
 class wxliveapi { public function __construct() { } public function liveinglist($refresh = false, $frequency = 300) { goto cIJIp; GTATI: cache_write($cachekey, $newdata); goto olM1s; ruJch: if (is_error($reslut) || $reslut["\145\x72\162\x63\157\x64\145"] == "\x31") { goto q1oyE; } goto HGc8x; xfdNE: $cachekey = "\x78\x63\137\170\x69\156\147\x75\167\x75\x5f\x6c\151\x76\145\151\x6e\x67\x6c\151\x73\164" . "\x5f" . $_W["\165\156\151\141\x63\x69\144"]; goto rib21; JrU2V: q1oyE: goto ccd0n; ymF5A: return array("\163\x74\141\x74\165\163" => 1, "\x6f\x62\152" => $liveobj["\x6f\x62\152"]); goto CbEsk; jPBOm: q_DBi: goto axK2_; ccd0n: return array("\x73\x74\x61\x74\x75\163" => -1, "\155\145\163\x73\x61\147\x65" => "\350\x8e\xb7\xe5\217\226\xe7\233\264\xe6\x92\xad\345\x88\x97\xe8\xa1\xa8\xe5\244\xb1\350\xb4\xa5"); goto Pa3Yk; Pa3Yk: rU_0p: goto UxWj0; rib21: $liveobj = cache_load($cachekey); goto xyhPS; olM1s: return array("\163\x74\x61\164\165\x73" => 1, "\157\x62\x6a" => $newdata["\157\x62\152"]); goto ZX1g6; xyhPS: if ($refresh || empty($liveobj) || empty($liveobj["\x6f\142\x6a"]) || $liveobj["\x65\x78\160\x69\x72\145"] < time()) { goto q_DBi; } goto ymF5A; ZX1g6: goto rU_0p; goto JrU2V; HGc8x: $newdata = array("\145\170\x70\151\162\x65" => time() + $frequency, "\157\x62\152" => $reslut["\162\x6f\x6f\x6d\137\151\x6e\146\157"]); goto GTATI; axK2_: $reslut = $this->__getlivelist(); goto ruJch; CbEsk: goto jtNbr; goto jPBOm; cIJIp: global $_W; goto xfdNE; UxWj0: jtNbr: goto eoxZH; eoxZH: } private function __getlivelist($start = 0, $limit = 100) { goto YXGbD; kzxOr: $account_api = WeAccount::create(); goto qvCOF; RW37w: return $reslut; goto IL0Do; hoJJI: if (!is_string($reslut)) { goto DKUiN; } goto P2GGc; P2GGc: $reslut = json_decode($reslut, true); goto M10pK; oalfr: $para = array("\163\164\141\x72\x74" => $start, "\154\x69\x6d\151\164" => $limit); goto aecU7; qvCOF: $token = $account_api->getAccessToken(); goto HFZV2; YXGbD: load()->classs("\x77\x65\151\x78\151\x6e\56\141\143\x63\157\x75\156\x74"); goto kzxOr; aecU7: $reslut = $this->xet_post($url, $para); goto hoJJI; HFZV2: $url = "\x68\x74\164\160\163\x3a\x2f\x2f\x61\x70\151\x2e\167\145\151\x78\151\156\x2e\161\x71\56\143\x6f\x6d\57\167\x78\x61\x2f\x62\165\163\x69\156\145\163\x73\x2f\x67\145\164\x6c\151\166\x65\151\156\x66\x6f\77\x61\143\143\145\163\163\x5f\164\x6f\x6b\x65\156\x3d{$token}"; goto oalfr; M10pK: DKUiN: goto RW37w; IL0Do: } public function get_replay($room_id, $start = 0, $limit = 100) { goto EBkfs; J4S0K: return $reslut; goto w4maT; yh1i2: $token = $account_api->getAccessToken(); goto hQuYv; hQuYv: $url = "\x68\164\x74\160\x73\x3a\x2f\57\141\x70\x69\x2e\x77\145\151\x78\151\156\x2e\161\161\56\x63\157\155\x2f\x77\170\x61\57\x62\x75\163\151\156\x65\163\x73\57\x67\145\164\x6c\x69\x76\145\x69\156\x66\157\x3f\x61\x63\143\145\163\163\137\x74\x6f\153\145\x6e\75{$token}"; goto WJepv; LSHxa: if (!is_string($reslut)) { goto sWLzw; } goto vz0s0; sZnH7: sWLzw: goto J4S0K; EBkfs: load()->classs("\167\x65\x69\170\x69\156\56\141\143\143\x6f\x75\x6e\164"); goto IaGCT; vz0s0: $reslut = json_decode($reslut, true); goto sZnH7; IaGCT: $account_api = WeAccount::create(); goto yh1i2; uKn1R: $reslut = $this->xet_post($url, $para); goto LSHxa; WJepv: $para = array("\x61\x63\x74\x69\x6f\156" => "\147\x65\164\x5f\162\145\x70\154\141\x79", "\x72\157\157\x6d\137\151\x64" => $room_id, "\x73\x74\141\x72\x74" => $start, "\x6c\151\155\x69\164" => $limit); goto uKn1R; w4maT: } function xet_post($url, $post_data) { goto aPpqi; aPpqi: $curl = curl_init(); goto mvqzR; E2mgu: return $data; goto Qz3Ty; nIu0L: curl_setopt($curl, CURLOPT_POSTFIELDS, json_encode($post_data, true)); goto otyWa; ao5Pu: curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); goto NbX4C; otyWa: $data = curl_exec($curl); goto wEUSL; m9oCJ: curl_setopt($curl, CURLOPT_HEADER, 0); goto EmT4V; NbX4C: curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, FALSE); goto nIu0L; EmT4V: curl_setopt($curl, CURLOPT_POST, 1); goto zdCR2; mvqzR: curl_setopt($curl, CURLOPT_URL, $url); goto m9oCJ; wEUSL: curl_close($curl); goto E2mgu; zdCR2: curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); goto ao5Pu; Qz3Ty: } }