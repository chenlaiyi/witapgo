<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
    <title>{$list['title']}</title>
    <style>
        .link_btn{height: 12vw;background: #e74479;color: #fff;text-align: center;line-height: 12vw;position: fixed;left:0;bottom:0;z-index: 99;width: 100%;}
        .btn_block{height: 12vw;}
        .to_index{position: fixed;width: 10vw;height: 10vw;border-radius: 100%;bottom: 20vw;right: 2vw;}
        .to_share{position: fixed;width: 10vw;height: 10vw;border-radius: 100%;bottom: 32vw;right: 2vw;}
        .w7-window-side{display: none;!important;}
        .articleNav{position: fixed;top: 0;left: 0;width: 100%;z-index: 100;background: #fff;overflow-x: scroll;overflow-y: hidden;white-space: nowrap;border-bottom: #eee 1px solid;font-size: 3.5vw;line-height: 5.5vw;}
        .articleNav .item{display: inline-block;line-height: 12vw;margin: 0 4vw;color: #999999;}
        .articleNav .item.curr{color: #222222;border-bottom:#D55179 2px solid;}
        .articleBlock{height: 12vw;}

        .hbLayer{ width: 78.14vw; position: fixed; left: 50%; margin-left: -39.07vw; top: 50%; transform: translateY(-50%);}
        .hbLayer .closeBtn{ text-align: right; margin-bottom: 4vw;}
        .hbLayer .closeBtn img{ width: 5.34vw; height: 5.34vw;display: inline-block;}
        .hbLayer .hbimg{ margin-bottom:2.67vw;width: 100%;}
        .hbLayer .dlBtn{ height: 10.54vw; line-height:10.4vw; text-align: center; font-size: 3.47vw; color: #fff; background-color: #77d4c0; border-radius: 1.34vw;}
        .hbLayer .dlBtn img{ width: 3.47vw; height: 3.47vw; margin-right: 1.34vw; vertical-align: baseline;display: inline-block;}
        .shade{ position: fixed; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index:101;}

        .content{padding:10px;}
        .content img{max-width: 100%;}
    </style>
</head>
<body>
{if $article_class_status==1}
<div class="articleNav">
    <p class="item" data-id="">全部</p>
    {loop $class $index $item}
    <p class="item" data-id="{$item['id']}">{$item['name']}</p>
    {/loop}
</div>
<p class="articleBlock"></p>
{/if}
<div class="content" style="padding-left:{$list['lr_padding']}px;padding-right: {$list['lr_padding']}px;">
    {$list['content']}
</div>
{if $list}
<img src="{if $list['simg']}{$list['simg']}{else}../addons/{$_GPC['m']}/resource/images/index.png{/if}" class="to_index" />
{if $poster && $poster['status']==1}
<img src="../addons/{$_GPC['m']}/resource/images/share01.png" class="to_share" />
{/if}
{/if}
{if $list['type']==2}
<div class="btn_block"></div>
<div class="link_btn" style="background:{$list['color']}">{if $list['btn']}{$list['btn']}{else}立即参与{/if}</div>
{/if}
<div class='shade' style="display: none;">
    <div class='hbLayer'>
        <div class='closeBtn'>
            <img src="../addons/{$_GPC['m']}/resource/images/close.png" />
        </div>
        <img src='' class='hbimg' />
        <div class='dlBtn'>
            <img src="../addons/{$_GPC['m']}/resource/images/dl.png" />保存图片
        </div>
    </div>
</div>
</body>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>
<script>
    var isLoading=false;
    var code='';
    $(function(){
        $(".btn").click(function(){
            wx.miniProgram.navigateTo({url: "{$list['link']}"});
        });
        $(".to_index").click(function(){
            wx.miniProgram.reLaunch({url: "/xc_beauty/pages/base/base"});
        });
        $(".articleNav .item").click(function(){
            var id=$(this).attr("data-id");
            wx.miniProgram.reLaunch({url: "/xc_beauty/pages/article/list?curr="+id});
        });
        $(".to_share").click(function(){
            if(code!=""){
                $(".shade").show();
            }else{
                if(!isLoading){
                    isLoading=true;
                    $.ajax({
                        type:'post',
                        url:"{php echo $this->createMobileUrl('index',array('op'=>'poster'))}",
                        data:{id:"{$list['id']}"},
                        dataType:'json',
                        success:function(res){
                            if(res.status==1){
                                var param=res.data;
                                code=param.code;
                                $(".shade").show().find(".hbimg").attr("src",param.code);
                            }
                            isLoading=false;
                        }
                    })
                }
            }
        });
        $(".closeBtn").click(function(){
            $(".shade").hide();
        });
        $(".dlBtn").click(function(){
            wx.previewImage({
                current:code,
                urls: [code]
            });
        });
    })
</script>
</html>