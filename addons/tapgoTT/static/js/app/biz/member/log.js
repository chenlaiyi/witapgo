define(["core","tpl"],function(n,t){var i={page:1,type:0,loaded:!1,init:function(t){i.page=1,i.loaded=!1,i.loaded||(i.loaded=!0,$(".container").empty(),i.type=t.type,FoxUI.tab({container:$("#tab"),handlers:{tab1:function(){i.changeTab(0)},tab2:function(){i.changeTab(1)}}}),$(".fui-content").infinite({onLoading:function(){i.getList()}}),1==i.page&&$(".goods-item").length<=0&&($(".container").html(""),i.getList()))},changeTab:function(t){$(".container").html(""),$(".infinite-loading").show(),$(".content-empty").hide(),i.page=1,i.type=t,i.getList()},getList:function(){n.json("member/log/get_list",{page:i.page,type:i.type},function(t){var e=t.result;e.total<=0?($(".container").hide(),$(".content-empty").show(),$(".fui-content").infinite("stop")):($(".container").show(),$(".content-empty").hide(),$(".fui-content").infinite("init"),(e.list.length<=0||e.list.length<e.pagesize)&&$(".fui-content").infinite("stop")),n.tpl(".container","tpl_member_log_list",e,1<i.page),$(".goods-item").length>=e.pagesize*i.page&&i.page++})}};return i});