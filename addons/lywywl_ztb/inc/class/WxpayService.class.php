<?php
 class WxpayService { protected $mchid; protected $appid; protected $apiKey; public function __construct($mchid, $appid, $key) { goto DNgjD; DNgjD: $this->mchid = $mchid; goto Mi6VW; bjIK4: $this->apiKey = $key; goto jY37I; Mi6VW: $this->appid = $appid; goto bjIK4; jY37I: } public function createJsBizPackage($totalFee, $outTradeNo, $orderName, $notifyUrl, $timestamp) { goto U5XBF; LzBCd: $unifiedOrder = simplexml_load_string($responseXml, "\123\x69\155\x70\x6c\145\x58\x4d\x4c\x45\154\x65\155\145\x6e\164", LIBXML_NOCDATA); goto PizwQ; YAs8R: NWlXx: goto PD3Hj; CvEUE: $unified["\x73\x69\x67\x6e"] = self::getSign($unified, $config["\x6b\145\171"]); goto p5mSE; jlLN_: g5mWQ: goto uigjs; RcfmU: if (!($unifiedOrder->result_code != "\x53\125\x43\103\105\x53\123")) { goto OaASu; } goto p9Yt5; PizwQ: if (!($unifiedOrder === false)) { goto NWlXx; } goto RhESn; mAjIL: libxml_disable_entity_loader(true); goto LzBCd; UAINQ: exit("\x67\145\164\40\143\x6f\144\145\137\165\162\154\x20\145\162\162\x6f\x72"); goto jlLN_; QvHl5: $arr["\160\141\x79\123\x69\x67\156"] = self::getSign($arr, $config["\153\x65\171"]); goto q2vml; p5mSE: $responseXml = self::curlPost("\150\164\164\160\x73\72\57\x2f\x61\x70\x69\x2e\x6d\x63\x68\56\167\145\x69\x78\151\156\x2e\161\x71\56\x63\157\x6d\57\160\x61\x79\x2f\x75\x6e\151\x66\x69\x65\x64\x6f\x72\144\x65\x72", self::arrayToXml($unified)); goto mAjIL; EseGa: $unified = array("\141\x70\x70\x69\144" => $config["\x61\x70\160\x69\x64"], "\141\x74\x74\x61\143\150" => "\160\x61\171", "\x62\157\144\x79" => mb_strcut($orderName, 0, 115, "\165\x74\146\55\70"), "\x6d\143\150\137\x69\x64" => $config["\x6d\143\150\x5f\x69\144"], "\x6e\157\x6e\143\145\x5f\163\164\162" => self::createNonceStr(), "\156\x6f\164\151\x66\x79\137\x75\162\154" => $notifyUrl, "\157\x75\x74\x5f\x74\x72\x61\144\x65\x5f\156\157" => $outTradeNo, "\x73\160\142\x69\x6c\154\137\143\x72\145\141\164\145\137\151\x70" => "\61\62\67\x2e\60\x2e\60\56\x31", "\164\157\x74\x61\154\137\x66\145\145" => intval(strval($totalFee * 100)), "\164\x72\x61\x64\145\x5f\164\x79\x70\145" => "\116\101\x54\x49\126\x45"); goto CvEUE; p9Yt5: die($unifiedOrder->err_code); goto CZTYi; uigjs: $arr = array("\141\x70\x70\x49\x64" => $config["\x61\160\x70\151\x64"], "\164\151\x6d\145\x53\x74\x61\x6d\160" => $timestamp, "\x6e\x6f\156\x63\145\x53\x74\x72" => self::createNonceStr(), "\160\141\143\x6b\x61\147\x65" => "\x70\x72\x65\160\x61\171\x5f\x69\x64\x3d" . $unifiedOrder->prepay_id, "\x73\x69\x67\x6e\x54\x79\x70\145" => "\115\x44\65", "\143\x6f\144\145\137\x75\x72\x6c" => $codeUrl[0]); goto QvHl5; YtB4j: if ($codeUrl[0]) { goto g5mWQ; } goto UAINQ; YZgDX: bKWr4: goto RcfmU; PD3Hj: if (!($unifiedOrder->return_code != "\123\125\x43\x43\105\123\x53")) { goto bKWr4; } goto z387L; q2vml: return $arr; goto SdXAq; z387L: die($unifiedOrder->return_msg); goto YZgDX; RhESn: die("\160\141\x72\163\145\40\170\x6d\x6c\40\x65\x72\162\157\x72"); goto YAs8R; U5XBF: $config = array("\155\x63\150\137\151\x64" => $this->mchid, "\141\x70\160\x69\144" => $this->appid, "\x6b\x65\171" => $this->apiKey); goto EseGa; CZTYi: OaASu: goto zglZk; zglZk: $codeUrl = (array) $unifiedOrder->code_url; goto YtB4j; SdXAq: } public function createJsBizPackage_JSAPI($openid, $totalFee, $outTradeNo, $orderName, $notifyUrl, $timestamp) { goto mCjew; VQ4uy: $unifiedOrder = simplexml_load_string($responseXml, "\123\151\x6d\160\x6c\145\x58\115\x4c\105\154\x65\155\145\x6e\164", LIBXML_NOCDATA); goto nJHBr; DFdd2: $responseXml = self::curlPost("\x68\x74\x74\x70\x73\72\57\x2f\141\x70\x69\x2e\155\143\150\56\x77\145\151\x78\151\156\x2e\161\161\56\143\x6f\155\x2f\160\x61\171\57\x75\156\x69\x66\151\145\x64\x6f\x72\x64\145\x72", self::arrayToXml($unified)); goto C1kve; wc426: UG6jz: goto zvGhV; ISp4W: cr88G: goto HLvR0; mCjew: $config = array("\x6d\143\x68\x5f\x69\x64" => $this->mchid, "\141\x70\x70\151\x64" => $this->appid, "\153\145\x79" => $this->apiKey); goto cYgQA; QwXtW: $unified["\163\151\x67\156"] = self::getSign($unified, $config["\153\x65\x79"]); goto DFdd2; cYgQA: $unified = array("\141\x70\160\151\144" => $config["\x61\160\160\151\x64"], "\141\x74\164\x61\143\150" => "\x70\x61\x79", "\142\x6f\x64\x79" => mb_strcut($orderName, 0, 115, "\165\164\x66\55\70"), "\155\143\150\137\x69\144" => $config["\155\x63\x68\x5f\x69\144"], "\x6e\157\156\143\145\137\163\x74\162" => self::createNonceStr(), "\x6e\157\164\x69\x66\x79\x5f\x75\162\x6c" => $notifyUrl, "\157\x70\x65\x6e\151\x64" => $openid, "\x6f\x75\x74\137\164\x72\141\144\145\137\x6e\157" => $outTradeNo, "\x73\x70\x62\151\x6c\x6c\x5f\143\162\x65\141\164\x65\x5f\151\x70" => "\x31\62\x37\56\x30\x2e\60\x2e\61", "\x74\x6f\164\141\x6c\137\x66\x65\145" => intval(strval($totalFee * 100)), "\164\x72\x61\144\145\137\164\x79\160\x65" => "\x4a\x53\101\x50\111"); goto QwXtW; cP8I7: $arr["\160\x61\171\123\151\147\x6e"] = self::getSign($arr, $config["\x6b\x65\171"]); goto b_X30; HLvR0: if (!($unifiedOrder->return_code != "\x53\125\x43\x43\105\123\x53")) { goto GAryH; } goto kl04R; b_X30: return $arr; goto ta4lA; C1kve: libxml_disable_entity_loader(true); goto VQ4uy; MAh4C: GAryH: goto mkDVc; zvGhV: $arr = array("\x61\160\160\x49\x64" => $config["\141\160\160\x69\144"], "\x74\151\155\x65\x53\164\x61\x6d\x70" => "{$timestamp}", "\x6e\157\x6e\x63\145\123\164\162" => self::createNonceStr(), "\160\x61\143\x6b\141\x67\145" => "\x70\162\145\x70\x61\171\x5f\x69\x64\75" . $unifiedOrder->prepay_id, "\163\x69\147\156\x54\x79\x70\145" => "\115\x44\x35"); goto cP8I7; b7V8A: die($unifiedOrder->err_code); goto wc426; nJHBr: if (!($unifiedOrder === false)) { goto cr88G; } goto UZ992; kl04R: die($unifiedOrder->return_msg); goto MAh4C; mkDVc: if (!($unifiedOrder->result_code != "\x53\125\103\103\105\123\123")) { goto UG6jz; } goto b7V8A; UZ992: die("\x70\x61\162\x73\145\40\170\155\x6c\40\145\162\x72\x6f\x72"); goto ISp4W; ta4lA: } public function orderquery($outTradeNo) { goto QW_LL; vaV3x: die("\160\x61\162\163\145\x20\x78\x6d\x6c\40\x65\x72\162\x6f\162"); goto fi4Ec; ync0E: return $data; goto lvYKe; ChB4b: $responseXml = self::curlPost("\150\164\164\x70\163\x3a\57\x2f\141\160\x69\56\x6d\x63\150\56\x77\x65\151\170\151\156\56\161\x71\x2e\143\157\x6d\x2f\x70\141\x79\x2f\x6f\x72\x64\x65\x72\x71\165\x65\162\171", self::arrayToXml($unified)); goto hROH4; kQbaW: if (!($queryResult->return_code != "\x53\125\x43\103\105\123\x53")) { goto qLaJU; } goto UV1dG; h5ANL: $trade_state = $queryResult->trade_state; goto uFO3h; AE4y1: $data["\155\x73\147"] = $this->getTradeSTate($trade_state); goto mN3SP; fi4Ec: SS0TJ: goto kQbaW; lvYKe: exit; goto unwPm; QW_LL: $config = array("\x6d\x63\x68\x5f\151\144" => $this->mchid, "\141\x70\x70\151\x64" => $this->appid, "\x6b\145\171" => $this->apiKey); goto p8Jhb; rsnHt: $data["\144\141\x74\x61"] = $trade_state; goto eHvUg; qnT5L: if (!($queryResult === false)) { goto SS0TJ; } goto vaV3x; cIMtg: qLaJU: goto h5ANL; IqrGa: yjKtO: goto AE4y1; eHvUg: if (empty($queryResult->total_fee)) { goto yjKtO; } goto qQWa_; mN3SP: $data["\164\151\x6d\145"] = date("\x59\x2d\x6d\x2d\144\x20\110\x3a\151\72\163"); goto ync0E; UV1dG: die($queryResult->return_msg); goto cIMtg; hROH4: $queryResult = simplexml_load_string($responseXml, "\123\151\x6d\x70\154\145\130\115\x4c\105\x6c\145\155\145\x6e\x74", LIBXML_NOCDATA); goto qnT5L; uFO3h: $data["\143\x6f\x64\x65"] = $trade_state == "\123\x55\103\103\x45\123\123" ? 0 : 1; goto rsnHt; qQWa_: $data["\160\141\x79\155\x6f\156\145\x79"] = $queryResult->total_fee; goto IqrGa; b6HCp: $unified["\163\151\147\x6e"] = self::getSign($unified, $config["\153\145\x79"]); goto ChB4b; p8Jhb: $unified = array("\x61\x70\160\151\x64" => $config["\141\160\x70\151\144"], "\155\143\150\x5f\x69\x64" => $config["\x6d\x63\150\x5f\x69\x64"], "\x6f\x75\x74\x5f\164\x72\141\144\145\x5f\x6e\157" => $outTradeNo, "\x6e\157\156\143\145\137\163\x74\x72" => self::createNonceStr()); goto b6HCp; unwPm: } public function doRefundByladdercm($totalFee, $refundFee, $refundNo, $wxOrderNo = '', $orderNo = '', $cert_pem, $key_pem) { goto rXEpV; HbTS4: nQhcr: goto SCWl8; lcidt: $unified = array("\141\x70\160\151\144" => $config["\x61\160\x70\x69\144"], "\x6d\143\x68\x5f\x69\x64" => $config["\155\x63\150\x5f\151\144"], "\156\157\x6e\143\145\x5f\163\x74\x72" => self::createNonceStr(), "\164\x6f\164\x61\154\x5f\x66\x65\x65" => intval($totalFee * 100), "\162\x65\x66\165\x6e\x64\137\x66\145\145" => intval($refundFee * 100), "\163\x69\x67\x6e\137\164\171\x70\145" => "\115\x44\x35", "\x74\x72\x61\156\163\x61\143\x74\x69\x6f\x6e\137\x69\144" => $wxOrderNo, "\x6f\165\x74\x5f\x74\162\141\144\145\x5f\x6e\157" => $orderNo, "\157\165\x74\137\x72\x65\146\165\156\144\137\x6e\157" => $refundNo, "\x72\x65\x66\x75\156\x64\137\144\x65\x73\143" => "\345\225\206\xe5\x93\x81\xe5\xb7\xb2\345\224\256\345\256\214"); goto Tqu7o; aHx1d: return true; goto B2hbk; SCWl8: if (!($unifiedOrder->return_code != "\123\125\x43\x43\105\x53\123")) { goto FRtZr; } goto r3rW1; rUKic: zMJid: goto aHx1d; kAg4y: if (!($unifiedOrder->result_code != "\123\125\103\x43\x45\123\x53")) { goto zMJid; } goto PFTtg; WjchU: FRtZr: goto kAg4y; v321j: if (!($unifiedOrder === false)) { goto nQhcr; } goto FBpr3; FBpr3: die("\160\141\x72\x73\145\40\x78\x6d\154\40\x65\162\x72\x6f\162"); goto HbTS4; Tqu7o: $unified["\x73\151\x67\156"] = self::getSign($unified, $config["\x6b\x65\171"]); goto CUFmC; m8tBU: $unifiedOrder = simplexml_load_string($responseXml, "\123\151\x6d\x70\x6c\145\x58\115\114\x45\x6c\x65\x6d\x65\x6e\x74", LIBXML_NOCDATA); goto v321j; rXEpV: $config = array("\155\x63\150\137\151\x64" => $this->mchid, "\x61\x70\x70\151\144" => $this->appid, "\x6b\x65\171" => $this->apiKey); goto lcidt; PFTtg: die($unifiedOrder->err_code); goto rUKic; r3rW1: die($unifiedOrder->return_msg); goto WjchU; CUFmC: $responseXml = $this->curlPost2("\150\x74\164\160\163\x3a\57\57\141\160\151\56\155\143\x68\56\167\145\151\x78\x69\156\x2e\161\x71\56\x63\157\155\x2f\163\x65\143\141\160\151\x2f\x70\x61\x79\x2f\162\145\146\165\x6e\144", self::arrayToXml($unified), $cert_pem, $key_pem); goto m8tBU; B2hbk: } public function doRefund($totalFee, $refundFee, $orderNo, $cert_pem, $key_pem, $notifyUrl = '') { goto TVt4J; X3Ls0: return true; goto sTK7g; ni2k0: die($unifiedOrder->err_code); goto atMIY; EA2H0: $unifiedOrder = simplexml_load_string($responseXml, "\123\151\155\x70\154\145\x58\x4d\114\x45\154\x65\155\x65\156\x74", LIBXML_NOCDATA); goto ndjRY; ZpfEH: aE7og: goto htzp0; WlDfI: $unified["\163\x69\147\156"] = self::getSign($unified, $config["\x6b\x65\x79"]); goto f3TXT; zrSQM: die("\x70\x61\x72\x73\x65\40\x78\155\154\x20\145\162\162\157\162"); goto Aynzu; mdsKP: die($unifiedOrder->return_msg); goto ZpfEH; f3TXT: $responseXml = $this->curlPost2("\150\x74\164\x70\163\x3a\57\57\x61\160\x69\x2e\x6d\x63\150\56\167\145\x69\x78\x69\156\x2e\x71\x71\x2e\143\157\x6d\x2f\x73\145\143\x61\x70\x69\x2f\160\141\x79\57\x72\x65\x66\x75\x6e\144", self::arrayToXml($unified), $cert_pem, $key_pem); goto EA2H0; Rq7Gm: $unified = array("\x61\x70\160\151\144" => $config["\141\x70\160\x69\144"], "\155\x63\150\137\151\144" => $config["\x6d\x63\x68\137\x69\144"], "\x6e\157\x6e\143\x65\x5f\x73\164\x72" => self::createNonceStr(), "\x74\157\x74\141\x6c\x5f\x66\145\x65" => intval($totalFee * 100), "\x72\x65\146\165\x6e\x64\137\146\x65\145" => intval($refundFee * 100), "\x73\151\x67\156\137\x74\x79\x70\x65" => "\115\x44\65", "\x74\x72\141\x6e\x73\141\143\x74\151\157\x6e\137\x69\144" => '', "\x6f\165\164\x5f\164\162\141\144\x65\x5f\x6e\x6f" => $orderNo, "\x6f\x75\x74\x5f\x72\x65\146\x75\x6e\144\137\156\157" => getOrderNumber(), "\162\145\x66\x75\156\144\x5f\144\145\x73\x63" => "\345\225\206\xe6\210\267\345\217\x91\xe8\265\267\351\200\200\346\254\276", "\156\157\164\x69\146\171\137\165\162\x6c" => $notifyUrl); goto WlDfI; atMIY: Pl_yf: goto X3Ls0; gV4Sk: if (!($unifiedOrder->return_code != "\123\125\x43\x43\105\x53\123")) { goto aE7og; } goto mdsKP; Aynzu: G3ZPR: goto gV4Sk; htzp0: if (!($unifiedOrder->result_code != "\123\125\103\x43\105\123\123")) { goto Pl_yf; } goto ni2k0; TVt4J: $config = array("\155\x63\150\x5f\x69\144" => $this->mchid, "\141\160\160\151\x64" => $this->appid, "\153\x65\171" => $this->apiKey); goto Rq7Gm; ndjRY: if (!($unifiedOrder === false)) { goto G3ZPR; } goto zrSQM; sTK7g: } public function getTradeSTate($str) { goto kLYjq; jYa2p: gjjPs: goto FFtK3; kLYjq: switch ($str) { case "\x53\125\103\x43\x45\x53\x53": return "\xe6\224\257\344\xbb\x98\xe6\210\x90\345\x8a\237"; case "\122\105\106\x55\x4e\x44": return "\350\275\xac\xe5\x85\xa5\xe9\200\x80\346\xac\276"; case "\116\117\124\120\x41\131": return "\346\234\252\346\224\257\xe4\xbb\x98"; case "\x43\x4c\x4f\123\x45\104": return "\345\267\262\345\205\263\351\x97\255"; case "\x52\x45\126\117\x4b\x45\x44": return "\xe5\267\xb2\xe6\222\xa4\xe9\x94\200\357\xbc\210\xe5\x88\267\345\215\241\xe6\x94\xaf\xe4\273\x98\357\xbc\x89"; case "\125\123\x45\x52\120\101\x59\111\116\107": return "\347\x94\xa8\346\210\267\xe6\224\257\xe4\273\x98\344\xb8\xad"; case "\120\101\131\105\x52\x52\117\122": return "\xe6\224\257\xe4\xbb\230\345\xa4\xb1\350\264\245"; } goto L9npo; L9npo: wP72s: goto jYa2p; FFtK3: } public function notify() { goto YAsD1; rgFxK: $arr = (array) $postObj; goto BZT5F; FCHcQ: $postObj = simplexml_load_string($postStr, "\x53\151\155\160\x6c\145\130\115\x4c\105\x6c\x65\x6d\145\156\164", LIBXML_NOCDATA); goto jZs9_; GVWl6: $postStr = file_get_contents("\160\150\160\x3a\57\x2f\x69\x6e\160\x75\x74"); goto Er1E5; XcOi5: echo "\x3c\x78\x6d\154\76\74\x72\x65\164\165\x72\156\x5f\x63\x6f\144\145\76\x3c\41\x5b\103\104\x41\x54\x41\x5b\x53\125\x43\103\105\x53\123\135\135\76\74\57\x72\145\x74\165\x72\156\x5f\x63\x6f\144\x65\76\74\162\x65\x74\x75\162\156\x5f\155\163\x67\x3e\x3c\x21\133\103\x44\101\124\101\133\117\113\x5d\135\x3e\74\57\162\145\x74\x75\x72\156\137\x6d\x73\147\76\74\57\170\x6d\154\x3e"; goto mgWZ8; cT3Yw: na1JI: goto rgFxK; zOKBL: die($postObj->err_code); goto cT3Yw; BZT5F: unset($arr["\163\x69\147\x6e"]); goto GZmbe; Er1E5: libxml_disable_entity_loader(true); goto FCHcQ; YAsD1: $config = array("\155\x63\x68\x5f\151\144" => $this->mchid, "\141\160\x70\x69\144" => $this->appid, "\x6b\x65\171" => $this->apiKey); goto GVWl6; jZs9_: if (!($postObj === false)) { goto a73Sk; } goto fzpz8; gOKvX: if (!($postObj->return_code != "\x53\125\x43\103\105\123\x53")) { goto fgVSg; } goto twtuZ; pCFQs: aZyZ9: goto cnQh3; twtuZ: die($postObj->return_msg); goto dMygn; GZmbe: if (!(self::getSign($arr, $config["\153\x65\x79"]) == $postObj->sign)) { goto aZyZ9; } goto XcOi5; fc6nt: if (!($postObj->result_code != "\123\125\x43\103\x45\x53\x53")) { goto na1JI; } goto zOKBL; mgWZ8: return $arr; goto pCFQs; dMygn: fgVSg: goto fc6nt; fzpz8: die("\x70\141\162\x73\145\40\170\x6d\x6c\x20\145\162\162\157\162"); goto fqZk4; fqZk4: a73Sk: goto gOKvX; cnQh3: } function refund_decrypt($str, $key) { goto P4kAv; FiFgt: $pad = ord($str[$len - 1]); goto dFhC1; HDwR8: $pad = ord($str[($len = strlen($str)) - 1]); goto GxE1v; GxE1v: $len = strlen($str); goto FiFgt; dFhC1: return substr($str, 0, strlen($str) - $pad); goto E6n01; or_12: $str = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $str, MCRYPT_MODE_ECB); goto HDwR8; P4kAv: $str = base64_decode($str); goto or_12; E6n01: } public static function curlGet($url = '', $options = array()) { goto YkRY4; FPO2w: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto PKkn0; PKkn0: curl_setopt($ch, CURLOPT_TIMEOUT, 30); goto EQXNH; UN7Qs: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); goto b0VI8; SuTeE: return $data; goto n9ZNr; b0VI8: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); goto JTplZ; YkRY4: $ch = curl_init($url); goto FPO2w; JTplZ: $data = curl_exec($ch); goto WX_0e; ds5Lu: jkJhf: goto UN7Qs; EQXNH: if (empty($options)) { goto jkJhf; } goto aUK2q; WX_0e: curl_close($ch); goto SuTeE; aUK2q: curl_setopt_array($ch, $options); goto ds5Lu; n9ZNr: } public function curlPost2($url = '', $postData = '', $cert_pem, $key_pem, $options = array()) { goto Oumtk; sgXD3: curl_close($ch); goto geTaD; srfHY: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto O3JRz; qwz9Z: curl_setopt($ch, CURLOPT_SSLCERTTYPE, "\x50\105\x4d"); goto kcpty; jTa27: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); goto o7mF4; kcpty: curl_setopt($ch, CURLOPT_SSLCERT, $cert_pem); goto K6Fdd; OsgVz: $postData = http_build_query($postData); goto zQ2xt; zQ2xt: Oujc9: goto PTvw6; PTvw6: $ch = curl_init(); goto yhaIN; yhaIN: curl_setopt($ch, CURLOPT_URL, $url); goto srfHY; xIMk9: curl_setopt($ch, CURLOPT_TIMEOUT, 30); goto dNLcl; TgKeo: curl_setopt($ch, CURLOPT_POSTFIELDS, $postData); goto xIMk9; O3JRz: curl_setopt($ch, CURLOPT_POST, 1); goto TgKeo; Oumtk: if (!is_array($postData)) { goto Oujc9; } goto OsgVz; geTaD: return $data; goto Byfvm; WsmiP: curl_setopt($ch, CURLOPT_SSLKEY, $key_pem); goto rU2hP; ROsc7: pzh0A: goto jTa27; o7mF4: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); goto qwz9Z; dNLcl: if (empty($options)) { goto pzh0A; } goto Uwrh3; rU2hP: $data = curl_exec($ch); goto sgXD3; K6Fdd: curl_setopt($ch, CURLOPT_SSLKEYTYPE, "\120\x45\x4d"); goto WsmiP; Uwrh3: curl_setopt_array($ch, $options); goto ROsc7; Byfvm: } public static function curlPost($url = '', $postData = '', $options = array()) { goto bHNtC; bHNtC: if (!is_array($postData)) { goto JiUoP; } goto wuQTs; KMdeG: return $data; goto YnLf2; cY2yX: curl_setopt($ch, CURLOPT_POSTFIELDS, $postData); goto LIbz5; CwgW3: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); goto A_WVH; KJRCN: curl_close($ch); goto KMdeG; A_WVH: $data = curl_exec($ch); goto KJRCN; ByUev: if (empty($options)) { goto ZPzDi; } goto THPo7; Y3EJB: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); goto CwgW3; TWE_x: curl_setopt($ch, CURLOPT_POST, 1); goto cY2yX; v4Eg2: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto TWE_x; LIbz5: curl_setopt($ch, CURLOPT_TIMEOUT, 30); goto ByUev; sOIAt: $ch = curl_init(); goto U2c7d; U2c7d: curl_setopt($ch, CURLOPT_URL, $url); goto v4Eg2; T9L7P: ZPzDi: goto Y3EJB; ZgCT1: JiUoP: goto sOIAt; THPo7: curl_setopt_array($ch, $options); goto T9L7P; wuQTs: $postData = http_build_query($postData); goto ZgCT1; YnLf2: } public static function createNonceStr($length = 16) { goto J5S7d; zE0HS: jExw7: goto fe_x8; C2n9I: nCIa7: goto JfFYr; j5ecJ: return $str; goto Z45E_; JCvfq: goto jExw7; goto joVZL; joVZL: CkjGO: goto j5ecJ; J5S7d: $chars = "\x61\x62\x63\144\145\x66\147\150\x69\152\153\x6c\x6d\156\x6f\160\161\x72\163\x74\x75\x76\x77\170\x79\x7a\101\x42\103\x44\x45\106\x47\110\111\x4a\113\114\x4d\116\117\x50\x51\x52\x53\124\125\126\x57\x58\131\x5a\x30\61\62\63\x34\65\x36\67\x38\x39"; goto q1b6a; q1b6a: $str = ''; goto xw5FD; fe_x8: if (!($i < $length)) { goto CkjGO; } goto ZysBx; ZysBx: $str .= substr($chars, mt_rand(0, strlen($chars) - 1), 1); goto C2n9I; xw5FD: $i = 0; goto zE0HS; JfFYr: $i++; goto JCvfq; Z45E_: } public static function arrayToXml($arr) { goto XvhTJ; tdx7l: foreach ($arr as $key => $val) { goto kAxPd; Pk3LY: f5_zv: goto QXYm6; QXYm6: L4JtZ: goto sF_2J; kAxPd: if (is_numeric($val)) { goto gvgVe; } goto urqyd; q08Od: gvgVe: goto IGM8T; sRnOp: goto f5_zv; goto q08Od; IGM8T: $xml .= "\x3c" . $key . "\76" . $val . "\x3c\x2f" . $key . "\x3e"; goto Pk3LY; urqyd: $xml .= "\74" . $key . "\76\74\x21\133\x43\x44\101\124\x41\133" . $val . "\x5d\x5d\x3e\x3c\57" . $key . "\76"; goto sRnOp; sF_2J: } goto Gmh3u; Gmh3u: kQoM7: goto p81yT; XvhTJ: $xml = "\74\170\x6d\154\76"; goto tdx7l; Czouu: return $xml; goto rJcKI; p81yT: $xml .= "\74\x2f\x78\x6d\154\76"; goto Czouu; rJcKI: } public static function getSign($params, $key) { goto nq4ie; C5r3W: $unSignParaString = self::formatQueryParaMap($params, false); goto QrA8J; nq4ie: ksort($params, SORT_STRING); goto C5r3W; MoCS_: return $signStr; goto TRKJP; QrA8J: $signStr = strtoupper(md5($unSignParaString . "\46\153\x65\171\75" . $key)); goto MoCS_; TRKJP: } protected static function formatQueryParaMap($paraMap, $urlEncode = false) { goto IsB6V; McDRt: iV29J: goto tOZn3; tOZn3: return $reqPar; goto eXe9o; IsB6V: $buff = ''; goto xGw7e; xGw7e: ksort($paraMap); goto AdJT9; fs7j5: $reqPar = ''; goto LUKKA; LUKKA: if (!(strlen($buff) > 0)) { goto iV29J; } goto MaM9B; sq3nv: WfDPy: goto fs7j5; MaM9B: $reqPar = substr($buff, 0, strlen($buff) - 1); goto McDRt; AdJT9: foreach ($paraMap as $k => $v) { goto vtMja; vtMja: if (!(null != $v && "\156\165\x6c\x6c" != $v)) { goto f8OWr; } goto bhpHa; H0HC3: $buff .= $k . "\x3d" . $v . "\46"; goto lkLGt; ZGwDY: rQEps: goto Eq0UO; GYuQy: $v = urlencode($v); goto VfrvT; lkLGt: f8OWr: goto ZGwDY; bhpHa: if (!$urlEncode) { goto OLS_E; } goto GYuQy; VfrvT: OLS_E: goto H0HC3; Eq0UO: } goto sq3nv; eXe9o: } }
