<?php
 class Hashids { const VERSION = "\61\x2e\x30\56\x35"; const MIN_ALPHABET_LENGTH = 16; const SEP_DIV = 3.5; const GUARD_DIV = 12; const E_ALPHABET_LENGTH = "\x61\154\160\150\x61\142\145\x74\40\x6d\165\163\x74\x20\143\157\x6e\164\x61\x69\x6e\x20\141\x74\x20\154\145\x61\163\164\x20\x25\144\x20\x75\x6e\151\x71\165\145\40\x63\150\141\x72\x61\143\164\145\162\x73"; const E_ALPHABET_SPACE = "\x61\154\160\x68\x61\142\145\164\x20\x63\141\x6e\x6e\157\164\40\143\157\x6e\x74\x61\x69\156\x20\x73\160\x61\143\145\163"; private $_alphabet = "\x41\102\103\104\105\x46\107\110\x49\112\113\114\115\x4e\x4f\x50\x51\122\123\124\125\x56\127\x58\131\x5a\61\62\x33\x34\x35\x36\67\x38\71\x30"; private $_seps = "\x63\146\x68\151\163\x74\165\x43\x46\110\111\123\x54\125"; private $_min_hash_length = 0; private $_math_functions = array(); private $_max_int_value = 1000000000; private static $instance; public static function instance($length = null, $salt = null, $alphabet = null) { goto rSy3b; hvJbB: $salt = config("\x68\141\x73\x68\151\x64\x73\56\x73\x61\154\164"); goto HsDnB; M4oro: if (!($alphabet === null)) { goto iJ7FM; } goto on21j; N7bLi: XrB0J: goto Trp15; tlXgU: iJ7FM: goto uxOcC; r1u9G: if (!($length === null)) { goto XrB0J; } goto HVaBP; Trp15: if (!($salt === null)) { goto lxSQP; } goto hvJbB; uxOcC: self::$instance = new static($salt, $length, $alphabet); goto pUczL; rSy3b: if (!is_null(self::$instance)) { goto U4S6z; } goto r1u9G; pUczL: U4S6z: goto tpMbp; on21j: $alphabet = config("\150\141\163\150\x69\x64\163\56\141\x6c\x70\150\x61\142\145\164"); goto tlXgU; HsDnB: lxSQP: goto M4oro; HVaBP: $length = config("\x68\x61\163\x68\x69\x64\163\x2e\x6c\x65\x6e\147\164\x68"); goto N7bLi; tpMbp: return self::$instance; goto sRE3S; sRE3S: } public function __construct($salt = '', $min_hash_length = 8, $alphabet = '') { goto kU7fY; IKYaH: $this->_math_functions["\141\x64\144"] = "\x67\155\160\x5f\x61\x64\144"; goto edqAm; dBpFw: $this->_salt = $salt; goto JRQvn; G5NTO: $this->_min_hash_length = (int) $min_hash_length; goto KX2fF; pZaLu: if (strlen($this->_alphabet) < 3) { goto HamQb; } goto gUnHY; P1qWH: $this->_alphabet = implode('', array_diff($alphabet_array, $seps_array)); goto tO2Av; mQPxe: if (!(strlen($this->_alphabet) < self::MIN_ALPHABET_LENGTH)) { goto to6YK; } goto VG3lK; Q8a9b: if ($seps_length > strlen($this->_seps)) { goto auW1G; } goto R2mlB; qv9D2: $this->_guards = substr($this->_seps, 0, $guard_count); goto MJROu; rSoCn: $this->_seps = implode('', array_intersect($alphabet_array, $seps_array)); goto P1qWH; G5nHn: TTpWK: goto Q8a9b; BNgVi: goto bUxMp; goto lH_eW; k__0K: if (!function_exists("\142\143\x61\144\x64")) { goto hMsYb; } goto Mqg4W; Y3ILx: bUxMp: goto Uiuoq; Uiuoq: $this->_lower_max_int_value = $this->_max_int_value; goto b9b1s; RwTaO: throw new \Exception(self::E_ALPHABET_SPACE); goto DpkI5; xXLDy: $this->_math_functions["\x73\x74\x72"] = "\163\164\162\166\141\154"; goto c6KYc; WywVl: $this->_math_functions["\144\x69\166"] = "\x62\143\144\151\166"; goto xXLDy; WII3F: auW1G: goto skC69; TWSgX: $this->_max_int_value = PHP_INT_MAX; goto vBxA7; gUnHY: $this->_guards = substr($this->_alphabet, 0, $guard_count); goto T3laC; c6KYc: hMsYb: goto BNgVi; edqAm: $this->_math_functions["\144\151\166"] = "\147\155\x70\137\144\151\166"; goto OA85x; KX2fF: zonuZ: goto WG2Au; lH_eW: lLaM0: goto IKYaH; pAKZB: goto NHL4s; goto WCsRK; Q0mZ4: $this->_alphabet = $this->_consistent_shuffle($this->_alphabet, $this->_salt); goto EUM27; DpkI5: I8O_O: goto EGGL7; Mqg4W: $this->_math_functions["\x61\x64\144"] = "\142\143\x61\x64\x64"; goto WywVl; G_SEl: zAK2E: goto mQPxe; bjO34: if (!(!$this->_seps || strlen($this->_alphabet) / strlen($this->_seps) > self::SEP_DIV)) { goto tLzBk; } goto Hm7qL; JRQvn: if (!((int) $min_hash_length > 0)) { goto zonuZ; } goto G5NTO; Hm7qL: $seps_length = (int) ceil(strlen($this->_alphabet) / self::SEP_DIV); goto ImMFs; WCsRK: HamQb: goto qv9D2; MJROu: $this->_seps = substr($this->_seps, $guard_count); goto OLp_j; WG2Au: if (!$alphabet) { goto zAK2E; } goto rUR5T; jaynH: yKjUr: goto j97Az; i7chu: $seps_length++; goto G5nHn; OLp_j: NHL4s: goto Iogzp; skC69: $diff = $seps_length - strlen($this->_seps); goto Siass; ImMFs: if (!($seps_length == 1)) { goto TTpWK; } goto i7chu; p3ODd: $seps_array = str_split($this->_seps); goto rSoCn; Siass: $this->_seps .= substr($this->_alphabet, 0, $diff); goto VZapD; Vtg2h: goto yKjUr; goto WII3F; VG3lK: throw new \Exception(sprintf(self::E_ALPHABET_LENGTH, self::MIN_ALPHABET_LENGTH)); goto q8MR3; EGGL7: $alphabet_array = str_split($this->_alphabet); goto p3ODd; T3laC: $this->_alphabet = substr($this->_alphabet, $guard_count); goto pAKZB; q8MR3: to6YK: goto vUsHd; rUR5T: $this->_alphabet = implode('', array_unique(str_split($alphabet))); goto G_SEl; kU7fY: if (function_exists("\147\x6d\x70\x5f\141\x64\144")) { goto lLaM0; } goto k__0K; vBxA7: JwX8q: goto dBpFw; j97Az: tLzBk: goto Q0mZ4; EUM27: $guard_count = (int) ceil(strlen($this->_alphabet) / self::GUARD_DIV); goto pZaLu; R2mlB: $this->_seps = substr($this->_seps, 0, $seps_length); goto Vtg2h; VZapD: $this->_alphabet = substr($this->_alphabet, $diff); goto jaynH; vUsHd: if (!is_int(strpos($this->_alphabet, "\x20"))) { goto I8O_O; } goto RwTaO; tO2Av: $this->_seps = $this->_consistent_shuffle($this->_seps, $this->_salt); goto bjO34; b9b1s: if (!$this->_math_functions) { goto JwX8q; } goto TWSgX; OA85x: $this->_math_functions["\163\164\162"] = "\x67\155\x70\x5f\x73\x74\x72\166\141\154"; goto Y3ILx; Iogzp: } public function encode() { goto W6mkn; Qkr1R: return $ret; goto V1dNK; s1f0Q: A4Hv5: goto hrATX; eGE9h: $numbers = func_get_args(); goto uyUYo; x6Xg7: if ($numbers) { goto SGT9m; } goto Qkr1R; V1dNK: SGT9m: goto qLsWx; uyUYo: if (!(func_num_args() == 1 && is_array(func_get_arg(0)))) { goto mZ4qf; } goto Hpn5V; hrATX: return $this->_encode($numbers); goto ObGiS; NJOXc: mZ4qf: goto x6Xg7; Hpn5V: $numbers = $numbers[0]; goto NJOXc; W6mkn: $ret = ''; goto eGE9h; qLsWx: foreach ($numbers as $number) { goto mxbOn; SvoWI: Dke9F: goto Azeyr; Azeyr: mSR5e: goto G0BOB; mxbOn: $is_number = ctype_digit((string) $number); goto h0bB0; fmmZ9: return $ret; goto SvoWI; h0bB0: if (!(!$is_number || $number < 0 || $number > $this->_max_int_value)) { goto Dke9F; } goto fmmZ9; G0BOB: } goto s1f0Q; ObGiS: } public function decode($hash) { goto CUlG6; Ysk3b: return $ret; goto OhrSh; OhrSh: JFPhe: goto C3D3v; C3D3v: return $this->_decode(trim($hash), $this->_alphabet); goto ALqWP; CUlG6: $ret = array(); goto ie5Vn; ie5Vn: if (!(!$hash || !is_string($hash) || !trim($hash))) { goto JFPhe; } goto Ysk3b; ALqWP: } public function encode_hex($str) { goto LDs1x; L9bMu: Jtfte: goto jdpLi; LDs1x: if (ctype_xdigit((string) $str)) { goto damI3; } goto P5MiF; n9Blk: $numbers = trim(chunk_split($str, 12, "\x20")); goto ri55I; Sb3g0: foreach ($numbers as $i => $number) { $numbers[$i] = hexdec("\61" . $number); tL1Ok: } goto L9bMu; P5MiF: return ''; goto mxAoJ; jdpLi: return call_user_func_array(array($this, "\145\x6e\x63\157\x64\x65"), $numbers); goto SWthk; ri55I: $numbers = explode("\x20", $numbers); goto Sb3g0; mxAoJ: damI3: goto n9Blk; SWthk: } public function decode_hex($hash) { goto O4l66; i_YJ6: $numbers = $this->decode($hash); goto SCgWG; WihE0: Zc1sd: goto Bo1Kf; O4l66: $ret = ''; goto i_YJ6; SCgWG: foreach ($numbers as $i => $number) { $ret .= substr(dechex($number), 1); W2HID: } goto WihE0; Bo1Kf: return $ret; goto KVbhA; KVbhA: } public function get_max_int_value() { return $this->_max_int_value; } private function _encode(array $numbers) { goto xCOaz; txr1Y: $guard = $this->_guards[$guard_index]; goto qjb7Z; sxcxx: OHyOo: goto hArj7; F2ajm: $ret = substr($ret, $excess / 2, $this->_min_hash_length); goto SPXjM; hj7ax: $guard_index = ($numbers_hash_int + ord($ret[0])) % strlen($this->_guards); goto txr1Y; ECCSS: $excess = strlen($ret) - $this->_min_hash_length; goto rHazc; EsUJN: $ret = substr($alphabet, $half_length) . $ret . substr($alphabet, 0, $half_length); goto ECCSS; z22Li: $half_length = (int) (strlen($alphabet) / 2); goto fKgst; knKbk: $guard_index = ($numbers_hash_int + ord($ret[2])) % strlen($this->_guards); goto Urqtz; rHazc: if (!($excess > 0)) { goto VcDiN; } goto F2ajm; qjb7Z: $ret = $guard . $ret; goto vRlzB; rgAOk: return $ret; goto qK1bD; Urqtz: $guard = $this->_guards[$guard_index]; goto l_Q5y; wGZCW: $alphabet = $this->_consistent_shuffle($alphabet, $alphabet); goto EsUJN; d8GBo: $numbers_hash_int = 0; goto gPIQK; xCOaz: $alphabet = $this->_alphabet; goto jlQd9; jlQd9: $numbers_size = sizeof($numbers); goto d8GBo; s2tqd: kDcjf: goto AlcQm; B3sM0: goto jX_zu; goto oXr1F; PJZ6h: if (!(strlen($ret) < $this->_min_hash_length)) { goto t4Rt9; } goto wGZCW; oXr1F: t4Rt9: goto rgAOk; l_Q5y: $ret .= $guard; goto sxcxx; AlcQm: $lottery = $ret = $alphabet[$numbers_hash_int % strlen($alphabet)]; goto i27x9; FZEUo: if (!(strlen($ret) < $this->_min_hash_length)) { goto RrfMn; } goto hj7ax; SPXjM: VcDiN: goto B3sM0; vRlzB: if (!(strlen($ret) < $this->_min_hash_length)) { goto OHyOo; } goto knKbk; i27x9: foreach ($numbers as $i => $number) { goto FfCdr; E7uzJ: if (!($i + 1 < $numbers_size)) { goto pqaJF; } goto DeR7e; fmzlu: pqaJF: goto CQLxu; j_TKo: $ret .= $this->_seps[$seps_index]; goto fmzlu; CQLxu: q90X3: goto utwFA; Hp7bX: $ret .= $last = $this->_hash($number, $alphabet); goto E7uzJ; FfCdr: $alphabet = $this->_consistent_shuffle($alphabet, substr($lottery . $this->_salt . $alphabet, 0, strlen($alphabet))); goto Hp7bX; mAe4_: $seps_index = $number % strlen($this->_seps); goto j_TKo; DeR7e: $number %= ord($last) + $i; goto mAe4_; utwFA: } goto m13Sd; hArj7: RrfMn: goto z22Li; gPIQK: foreach ($numbers as $i => $number) { $numbers_hash_int += $number % ($i + 100); UlsWB: } goto s2tqd; fKgst: jX_zu: goto PJZ6h; m13Sd: DFx7m: goto FZEUo; qK1bD: } private function _decode($hash, $alphabet) { goto KOtm2; N82Pg: $hash_breakdown = str_replace(str_split($this->_guards), "\x20", $hash); goto v0JtS; q53GN: $i = 1; goto PIyXI; eLK3B: $i = 0; goto Lylps; YdREP: $hash_breakdown = str_replace(str_split($this->_seps), "\40", $hash_breakdown); goto nrS5N; nrS5N: $hash_array = explode("\40", $hash_breakdown); goto cRgWW; KOtm2: $ret = array(); goto N82Pg; poAMJ: Cq16m: goto vsbWw; vsbWw: yEndb: goto rGVKp; dkQBx: $hash_breakdown = substr($hash_breakdown, 1); goto YdREP; v0JtS: $hash_array = explode("\x20", $hash_breakdown); goto eLK3B; Lylps: if (!(sizeof($hash_array) == 3 || sizeof($hash_array) == 2)) { goto pqk7w; } goto q53GN; K8X1H: $lottery = $hash_breakdown[0]; goto dkQBx; rGVKp: return $ret[0]; goto D8psA; Nuhxb: if (!isset($hash_breakdown[0])) { goto yEndb; } goto K8X1H; PIyXI: pqk7w: goto NGLmb; NGLmb: $hash_breakdown = $hash_array[$i]; goto Nuhxb; LM8Rs: if (!($this->_encode($ret) != $hash)) { goto Cq16m; } goto MoOcI; zhq40: UtyYU: goto LM8Rs; cRgWW: foreach ($hash_array as $sub_hash) { goto ijJ4Z; aQSHB: YRK53: goto vc17h; ijJ4Z: $alphabet = $this->_consistent_shuffle($alphabet, substr($lottery . $this->_salt . $alphabet, 0, strlen($alphabet))); goto tg_Fz; tg_Fz: $ret[] = (int) $this->_unhash($sub_hash, $alphabet); goto aQSHB; vc17h: } goto zhq40; MoOcI: $ret = array(); goto poAMJ; D8psA: } private function _consistent_shuffle($alphabet, $salt) { goto D48ki; D48ki: if (strlen($salt)) { goto Xkz89; } goto m2XQ3; tNfVW: $v++; goto gUIqw; O7m2w: $alphabet[$i] = $temp; goto p4SXl; p4SXl: dz1i0: goto s7Rfa; RcS2J: Xkz89: goto pks_n; aY0dj: $v %= strlen($salt); goto kjntz; PK8WU: $p = 0; goto Xe0K9; Xe0K9: Sp3IT: goto Qu7bC; kjntz: $p += $int = ord($salt[$v]); goto MT2In; s7Rfa: $i--; goto tNfVW; lFKrI: $temp = $alphabet[$j]; goto xhk0W; Qu7bC: if (!($i > 0)) { goto l9vPe; } goto aY0dj; pks_n: $i = strlen($alphabet) - 1; goto Q_Qxq; xhk0W: $alphabet[$j] = $alphabet[$i]; goto O7m2w; Q_Qxq: $v = 0; goto PK8WU; MT2In: $j = ($int + $v + $p) % $i; goto lFKrI; gUIqw: goto Sp3IT; goto WSpxq; nlBr3: return $alphabet; goto zz6mx; WSpxq: l9vPe: goto nlBr3; m2XQ3: return $alphabet; goto RcS2J; zz6mx: } private function _hash($input, $alphabet) { goto KSwbk; KXYer: $hash = $alphabet[$input % $alphabet_length] . $hash; goto VCYlt; xkMJi: H74Ow: goto mkXy_; VCYlt: if ($input > $this->_lower_max_int_value && $this->_math_functions) { goto H74Ow; } goto koABx; mkXy_: $input = $this->_math_functions["\163\x74\x72"]($this->_math_functions["\x64\151\166"]($input, $alphabet_length)); goto acb5u; T49PD: TZiNn: goto KXYer; koABx: $input = (int) ($input / $alphabet_length); goto dujPy; MCO2r: return $hash; goto mqNA1; acb5u: FB51Q: goto xHth7; xHth7: if ($input) { goto TZiNn; } goto theqy; theqy: MftKQ: goto MCO2r; oRC64: $alphabet_length = strlen($alphabet); goto T49PD; dujPy: goto FB51Q; goto xkMJi; KSwbk: $hash = ''; goto oRC64; mqNA1: } private function _unhash($input, $alphabet) { goto ciXGl; RhkYy: foreach ($input_chars as $i => $char) { goto v5ZpQ; jb7iU: ByGjp: goto CLP6U; CAwAY: goto ByGjp; goto GBl3u; V28nZ: $number = $this->_math_functions["\x73\164\162"]($this->_math_functions["\141\x64\144"]($number, $pos * pow($alphabet_length, strlen($input) - $i - 1))); goto jb7iU; px10h: $number += $pos * pow($alphabet_length, strlen($input) - $i - 1); goto CAwAY; oL9b3: if ($this->_math_functions) { goto vWCOU; } goto px10h; CLP6U: zkwA6: goto Y_UZi; v5ZpQ: $pos = strpos($alphabet, $char); goto oL9b3; GBl3u: vWCOU: goto V28nZ; Y_UZi: } goto cr2bH; j5Zfx: if (!(strlen($input) && $alphabet)) { goto yPOcq; } goto GkKKq; cr2bH: LOlum: goto rIcEi; ciXGl: $number = 0; goto j5Zfx; GkKKq: $alphabet_length = strlen($alphabet); goto Y40UU; rIcEi: yPOcq: goto nBAht; nBAht: return $number; goto Wq0c4; Y40UU: $input_chars = str_split($input); goto RhkYy; Wq0c4: } }
