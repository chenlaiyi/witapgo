# TapGo E-commerce - 版本管理说明

## 📋 项目信息

**项目名称**: TapGo E-commerce (基于 WeEngine 框架)
**当前版本**: 1.0.0
**版本家族**: x (正式版)
**发布日期**: 2025-01-17
**管理团队**: TapGo Team
**官方网站**: https://w.itapgo.com

---

## 🎯 独立版本管理体系

### 与 WeEngine 官方的关系

- ✅ **基于 WeEngine 2.7.8 框架** 开发
- ✅ **完全独立的版本管理**
- ✅ **不连接微擎云端** (api-upgrade.w7.cc)
- ✅ **独立的版本号体系**
- ✅ **独立的版权信息**

---

## 📦 版本号规则

### 版本格式

```
主版本号.次版本号.修订号 (例如: 1.0.0)
```

- **主版本号**: 重大架构更新或功能重构
- **次版本号**: 新增功能或重要改进
- **修订号**: Bug 修复或小改进

### 版本家族代码

- `x` = 正式版 (Production)
- `s` = 体验版 (Staging)
- `v` = 虚拟版 (Virtual)
- `l` = 长期版 (Long-term)

当前使用: **x** (正式版)

---

## 🔄 升级策略

### 禁用云端升级

已修改配置，**禁用微擎云端自动升级**：

```php
$_W['is独立版本'] = true;
$_W['upgrade_server'] = 'local';  // 本地升级
```

### 手动升级流程

1. **下载更新包**
   ```bash
   # 从 GitHub 获取最新版本
   git pull origin main
   ```

2. **备份数据**
   ```bash
   # 数据库自动备份（每天3:00）
   # 文件自动备份（每周日4:00）
   ```

3. **应用更新**
   - 测试环境先验证
   - 生产环境再更新
   - 检查兼容性

4. **回滚计划**
   - 保留 7 天数据库备份
   - 保留 30 天文件备份
   - Git 版本控制可随时回退

---

## 📊 版本历史

| 版本号 | 发布日期 | 主要更新 | Git 提交 |
|--------|----------|----------|-----------|
| 1.0.0 | 2025-01-17 | 初始独立版本，安全加固，环境变量化 | f0432403 |

---

## 🔐 版本管理规范

### 开发流程

1. **分支管理**
   - `main` - 生产环境
   - `develop` - 开发环境
   - `feature/*` - 功能分支

2. **提交规范**
   ```
   类型(范围): 简短描述

   例如:
   feat(支付): 添加微信支付功能
   fix(订单): 修复订单状态更新问题
   security: 更新 Redis 密码配置
   ```

3. **版本发布**
   - 创建 Git tag
   - 更新 `framework/version.inc.php`
   - 编写 CHANGELOG
   - 通知相关人员

---

## 📝 配置文件

### 版本配置文件

**位置**: `/framework/version.inc.php`

```php
define('IMS_FAMILY', "x");           // 版本家族
define('IMS_VERSION', "1.0.0");       // 当前版本
define('IMS_RELEASE_DATE', "20250117001");  // 发布日期
define('IMS_SITE_NAME', "TapGo E-commerce");
define('IMS_COMPANY', "TapGo Team");
```

### 环境变量

**位置**: `/.env` (不提交到 Git)

```bash
# 系统配置
IMS_FAMILY=x
IMS_VERSION=1.0.0
```

---

## 🚨 注意事项

### ⚠️ 重要提醒

1. **不要升级到微擎官方版本**
   - 会导致自定义代码丢失
   - 会覆盖独立版本配置
   - 可能引起数据不一致

2. **保持备份**
   - 自动备份已配置
   - 重要更新前手动备份
   - 验证备份完整性

3. **版本兼容性**
   - WeEngine 框架更新需谨慎
   - 测试后再部署到生产
   - 记录所有修改

---

## 📞 联系方式

- **技术支持**: TapGo Team
- **官方网站**: https://w.itapgo.com
- **GitHub**: https://github.com/chenlaiyi/witapgo

---

**最后更新**: 2025-01-17
**维护者**: TapGo Team
